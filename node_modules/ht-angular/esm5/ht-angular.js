import { __extends, __spread, __read, __values } from 'tslib';
import { HtClient, HtUsersClient, HtGroupsClient, AccountsClient, HtActionsClient, usersClientFactory, groupsClientFactory, htClientService, actionsClientFactory, ApiType, dateRangeService, DateRange, dateRangeFactory } from 'ht-client';
import { InjectionToken, Inject, NgModule, Component, Input, EventEmitter, Output, ChangeDetectionStrategy, Pipe, Directive, HostListener, HostBinding, ChangeDetectorRef, ElementRef, ViewChild, Optional, ContentChild, ViewContainerRef, Injectable, ComponentFactoryResolver, Renderer2 } from '@angular/core';
import { HtMapClass, MapInstance, StopsHeatmapTrace, mapTypeService, ActionsHeatmapTrace, ActionTrace } from 'ht-maps';
import { HtRequest, htRequestService, HtTrackingApi } from 'ht-api';
import { HttpClient, HttpClientModule } from '@angular/common/http';
import { animate, style, transition, trigger, keyframes, query, state } from '@angular/animations';
import { TimeString, DateString, NameCase, DotString, DateHumanize, DistanceLocale, HMString, Color, GetUrlParam, dateRangeDisplay } from 'ht-utility';
import { htAction, listwithSelectedId$, listWithItem$, HtPlaceline, isSameDateRange, DateRangeLabelMap, tableFormat, userTableFormat, DateRangeMap, actionTableFormat } from 'ht-data';
import { CommonModule } from '@angular/common';
import { RouterModule } from '@angular/router';
import { last, reduce, reject, sortBy, map } from 'underscore';
import { distinctUntilChanged, map as map$1, skip, take, filter, switchMap, withLatestFrom, takeUntil, tap, catchError, concatMap, expand, debounceTime } from 'rxjs/operators';
import { merge } from 'rxjs/observable/merge';
import { of } from 'rxjs/observable/of';
import { Subject } from 'rxjs/Subject';
import { BehaviorSubject } from 'rxjs/BehaviorSubject';
import { addDays, addMonths, addWeeks, endOfDay, format, isBefore, isFuture, isSameDay, isSameMonth, isToday, isWithinRange, startOfMonth, startOfWeek } from 'date-fns';
import { combineLatest } from 'rxjs/observable/combineLatest';
import Chart from 'frappe-charts/dist/frappe-charts.min.esm';
import { Observable } from 'rxjs/Observable';
import { timer } from 'rxjs/observable/timer';
import { ReplaySubject } from 'rxjs/ReplaySubject';
import Popper from 'popper.js';

var HtClientService = /** @class */ (function (_super) {
    __extends(HtClientService, _super);
    function HtClientService() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    return HtClientService;
}(HtClient));
var HtUsersService = /** @class */ (function (_super) {
    __extends(HtUsersService, _super);
    function HtUsersService() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    return HtUsersService;
}(HtUsersClient));
var HtMapService = /** @class */ (function (_super) {
    __extends(HtMapService, _super);
    function HtMapService() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    return HtMapService;
}(HtMapClass));
var MAP_TYPE = new InjectionToken('app.mapType');
var HtGroupsService = /** @class */ (function (_super) {
    __extends(HtGroupsService, _super);
    function HtGroupsService() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    return HtGroupsService;
}(HtGroupsClient));
var HtAccountService = /** @class */ (function (_super) {
    __extends(HtAccountService, _super);
    function HtAccountService() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    return HtAccountService;
}(AccountsClient));
var HtActionsService = /** @class */ (function (_super) {
    __extends(HtActionsService, _super);
    function HtActionsService() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    return HtActionsService;
}(HtActionsClient));
var HtRequestService = /** @class */ (function (_super) {
    __extends(HtRequestService, _super);
    function HtRequestService(http, token) {
        var _this = _super.call(this, token) || this;
        _this.http = http;
        return _this;
    }
    HtRequestService.prototype.getObservable = function (url, options) {
        if (options === void 0) { options = {}; }
        return this.http.get(url, options);
    };
    HtRequestService.prototype.postObservable = function (url, body, options) {
        if (options === void 0) { options = {}; }
        return this.http.post(url, body, options);
    };
    return HtRequestService;
}(HtRequest));
var TOKEN = new InjectionToken('app.token');
var MAP_KEY = new InjectionToken('app.mapKey');
var BASE_URL = new InjectionToken('app.baseUrl');
function requestServiceFactory(http, token, baseUrl) {
    var request = new HtRequestService(http, token);
    if (baseUrl)
        request.baseUrl = baseUrl;
    return request;
}
function clientServiceFactory(token, request) {
    var client = htClientService.getInstance(token, request);
    return client;
}
function mapServiceFactory(mapType, mapKey) {
    if (mapType === void 0) {
        mapType = 'google';
    }
    var options = {};
    if (mapKey)
        options.mapKey = mapKey;
    return new HtMapService(mapType, options);
}
function userClientServiceFactory() {
    return usersClientFactory();
}
function actionClientServiceFactory() {
    return actionsClientFactory();
}
function groupClientServiceFactory() {
    return groupsClientFactory();
}
function accountUsersClientServiceFactory() {
    return new AccountsClient();
}
var HtModule = /** @class */ (function () {
    function HtModule(token, clientService, mapService) {
    }
    HtModule.forRoot = function (config) {
        return {
            ngModule: HtModule,
            providers: [
                HttpClient,
                { provide: MAP_TYPE, useValue: config.mapType },
                { provide: TOKEN, useValue: config.token },
                { provide: MAP_KEY, useValue: config.mapKey },
                { provide: BASE_URL, useValue: config.baseUrl },
                { provide: HtMapService, useFactory: mapServiceFactory, deps: [MAP_TYPE, MAP_KEY] },
                { provide: HtRequestService, useFactory: requestServiceFactory, deps: [HttpClient, TOKEN, BASE_URL] },
                { provide: HtClientService,
                    useFactory: clientServiceFactory,
                    deps: [TOKEN, HtRequestService]
                },
                {
                    provide: HtUsersService,
                    useFactory: userClientServiceFactory
                },
                {
                    provide: HtActionsService,
                    useFactory: actionClientServiceFactory
                },
                {
                    provide: HtGroupsService,
                    useFactory: groupClientServiceFactory
                },
                {
                    provide: HtAccountService,
                    useFactory: accountUsersClientServiceFactory
                },
            ]
        };
    };
    
    return HtModule;
}());
HtModule.decorators = [
    { type: NgModule, args: [{
                imports: [HttpClientModule]
            },] },
];
HtModule.ctorParameters = function () { return [
    { type: undefined, decorators: [{ type: Inject, args: [TOKEN,] },] },
    { type: HtClientService, },
    { type: HtMapService, },
]; };
var UsersSummaryContainerComponent = /** @class */ (function () {
    function UsersSummaryContainerComponent(usersClientService) {
        this.usersClientService = usersClientService;
        this.hideTotal = false;
        this.selectable = false;
        this.clearDataOnDestroy = true;
        this.toSetActive = true;
    }
    UsersSummaryContainerComponent.prototype.ngOnInit = function () {
        if (this.toSetActive)
            this.usersClientService.summary.setActive();
        this.summary$ = this.usersClientService.listStatusChart$(this.queryLabels);
    };
    UsersSummaryContainerComponent.prototype.onClearQueryKey = function (key) {
        this.usersClientService.list.clearQueryKey(key);
    };
    UsersSummaryContainerComponent.prototype.setQuery = function (query$$1) {
        this.usersClientService.list.setQueryReset(query$$1);
    };
    UsersSummaryContainerComponent.prototype.ngOnDestroy = function () {
        if (this.clearDataOnDestroy)
            this.usersClientService.summary.clearData();
    };
    return UsersSummaryContainerComponent;
}());
UsersSummaryContainerComponent.decorators = [
    { type: Component, args: [{
                selector: 'ht-users-summary-container',
                template: "<div [@summaryAnim] *ngIf=\"summary$ | async as summary\">\n  <ht-users-summary\n    [hideTotal]=\"hideTotal\"\n    (clearQueryKey)=\"onClearQueryKey($event)\"\n    (setQuery)=\"setQuery($event)\"\n    [selectable]=\"selectable\"\n    [summary]=\"summary\"></ht-users-summary>\n</div>\n",
                styles: ["ht-users-summary{\n  padding:10px 20px;\n}\n"],
                animations: [
                    trigger('summaryAnim', [
                        transition(':enter', [
                            style({ transform: 'translateX(-100px) scaleY(0)', height: 0, opacity: 0 }),
                            animate('0.3s' + ' ease-out')
                        ]),
                        transition(':leave', [
                            animate('0.3s' + ' ease-in', style({ transform: 'translateX(-100px)', height: 0, opacity: 0 }))
                        ])
                    ])
                ]
            },] },
];
UsersSummaryContainerComponent.ctorParameters = function () { return [
    { type: HtUsersService, },
]; };
UsersSummaryContainerComponent.propDecorators = {
    "queryLabels": [{ type: Input },],
    "hideTotal": [{ type: Input },],
    "selectable": [{ type: Input },],
    "clearDataOnDestroy": [{ type: Input },],
    "toSetActive": [{ type: Input },],
};
var UsersSummaryComponent = /** @class */ (function () {
    function UsersSummaryComponent() {
        this.setQuery = new EventEmitter();
        this.clearQueryKey = new EventEmitter();
        this.selectable = false;
    }
    UsersSummaryComponent.prototype.ngOnInit = function () {
    };
    UsersSummaryComponent.prototype.onHoverQuery = function (query$$1) {
        this.hoveredQuery = query$$1.label;
    };
    UsersSummaryComponent.prototype.onHoveroutQuery = function () {
        this.hoveredQuery = "";
    };
    UsersSummaryComponent.prototype.indexId = function (index, item) {
        return item.label;
    };
    UsersSummaryComponent.prototype.setFilter = function (datum) {
        var query$$1 = { status: datum.values.toString() };
        this.setQuery.next(query$$1);
    };
    UsersSummaryComponent.prototype.clearFilter = function (datum) {
        this.clearQueryKey.next('status');
    };
    UsersSummaryComponent.prototype.selectLabel = function (datum) {
        if (!this.selectable)
            return false;
        if (datum.selected) {
            this.clearFilter(datum);
        }
        else {
            this.setFilter(datum);
        }
    };
    return UsersSummaryComponent;
}());
UsersSummaryComponent.decorators = [
    { type: Component, args: [{
                selector: 'ht-users-summary',
                template: "<div class=\"flex-column justify-center label-container has-text-grey\">\n  <div *ngIf=\"!hideTotal\" class=\"count text-center\">{{summary.totalUsers}} {{'user' | pluralize: summary.totalUsers}}</div>\n  <div class=\"flex-row\" *ngIf=\"summary.totalUsers\">\n    <ng-container *ngFor=\"let datum of summary.chart; trackBy:indexId; let i = index\">\n      <div\n        class=\"bar\"\n        [style.flex-basis.%]=\"datum.value/summary.totalUsers * 100\"\n        [style.background-color]=\"datum.color\"\n        [class.faded]=\"hoveredQuery && hoveredQuery !== datum.label\"\n        [class.bar-selected]=\"hoveredQuery && hoveredQuery === datum.label\"\n      *ngIf=\"datum.value\"></div>\n    </ng-container>\n  </div>\n  <div *ngIf=\"summary.totalUsers == 0\" class=\"bar\" style=\"width: 100%; background: #ccc\"></div>\n  <div class=\"flex-row row-gap-4\">\n    <!--<div class=\"box\" [style.background-color]=\"datum.color\"></div>-->\n    <div\n      class=\"graph-label flex-column\"\n      [class.graph-active]=\"datum.selected\"\n      [class.graph-label-selectable]=\"selectable\"\n      (click)=\"selectLabel(datum)\"\n      (mouseenter)=\"onHoverQuery(datum)\"\n      (mouseleave)=\"onHoveroutQuery()\"\n      *ngFor=\"let datum of summary.chart; trackBy:indexId; let i = index\">\n      <strong class=\"text-center is-size-4\" [style.color]=\"datum.color\">\n        {{datum.value}}\n      </strong>\n      <span class=\"text-center\">{{datum.label}}</span>\n    </div>\n    <!--<div class=\"box\" style=\"background-color: #ccc;\"></div>-->\n  </div>\n</div>\n<!--{{summary | json}}-->\n",
                styles: [".text-center{\n  text-align:center;\n}\n.text-muted{\n  color:#798E9B;\n}\n.text-right{\n  text-align:right;\n}\n.text-left{\n  text-align:left;\n}\n.text-1{\n  font-size:2em;\n}\n.text-4{\n  font-size:0.8em;\n}\n.text-capitalize{\n  text-transform:capitalize;\n}\n.text-uppercase{\n  text-transform:uppercase;\n}\n.text-ontime{\n  color:#58ae5b;\n}\n.text-late{\n  color:#E6413E;\n}\n.text-warning{\n  color:#E6413E !important;\n}\n.text-red{\n  color:#E6413E;\n}\n.text-blue{\n  color:#5496F8;\n}\n.truncate{\n  white-space:nowrap;\n  overflow:hidden;\n  text-overflow:ellipsis;\n}\n.flex-row{\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  -webkit-box-orient:horizontal;\n  -webkit-box-direction:normal;\n      -ms-flex-direction:row;\n          flex-direction:row;\n}\n.flex-column{\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  -webkit-box-orient:vertical;\n  -webkit-box-direction:normal;\n      -ms-flex-direction:column;\n          flex-direction:column;\n}\n.column-gap-4 > :not(:last-child){\n  margin-bottom:4px;\n}\n.row-gap-4 > :not(:last-child){\n  margin-right:4px;\n}\n.column-gap-7 > :not(:last-child){\n  margin-bottom:7px;\n}\n.row-gap-7 > :not(:last-child){\n  margin-right:7px;\n}\n.column-gap-10 > :not(:last-child){\n  margin-bottom:10px;\n}\n.row-gap-10 > :not(:last-child){\n  margin-right:10px;\n}\n.column-gap-20 > :not(:last-child){\n  margin-bottom:20px;\n}\n.row-gap-20 > :not(:last-child){\n  margin-right:20px;\n}\n.wrap{\n  -ms-flex-wrap:wrap;\n      flex-wrap:wrap;\n}\n.flex{\n  -webkit-box-flex:1;\n      -ms-flex:1;\n          flex:1;\n}\n.auto{\n  margin:auto;\n}\n.relative{\n  position:relative;\n}\n.space-between{\n  -webkit-box-pack:justify;\n      -ms-flex-pack:justify;\n          justify-content:space-between;\n}\n.space-around{\n  -ms-flex-pack:distribute;\n      justify-content:space-around;\n}\n.justify-center{\n  -webkit-box-pack:center;\n      -ms-flex-pack:center;\n          justify-content:center;\n}\n.flex-center{\n  -webkit-box-align:center;\n      -ms-flex-align:center;\n          align-items:center;\n}\n.align-center{\n  -webkit-box-align:center;\n      -ms-flex-align:center;\n          align-items:center;\n}\n.clickable{\n  cursor:pointer;\n}\n.round-icon{\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  width:23px;\n  height:23px;\n  background:#315790;\n  border-radius:50%;\n}\n.flex-half{\n  -ms-flex-preferred-size:50%;\n      flex-basis:50%;\n}\n.link-unstyled{\n  color:inherit;\n}\n.link-unstyled:hover{\n  text-decoration:none;\n}\n.half{\n  width:50%;\n}\n.noselect{\n  -webkit-touch-callout:none;\n  -webkit-user-select:none;\n  -moz-user-select:none;\n  -ms-user-select:none;\n  user-select:none;\n}\n.hover-shadow:hover{\n  -webkit-box-shadow:0px 0px 4px 2px rgba(0, 0, 0, 0.16);\n          box-shadow:0px 0px 4px 2px rgba(0, 0, 0, 0.16);\n}\n.marker-transparent{\n  opacity:0.4;\n}\n.marker-fade{\n  -webkit-filter:contrast(16%) brightness(160%) blur(0.6px);\n          filter:contrast(16%) brightness(160%) blur(0.6px);\n}\n.tooltip-warning{\n  background:#e04745;\n  color:#fff;\n}\n.tooltip-warning-arrow{\n  border-right-color:#e04745 !important;\n}\n.tooltip-info{\n  background:#5496F8;\n  color:#fff;\n}\n.tooltip-info-arrow{\n  border-right-color:#5496F8 !important;\n}\na{\n  color:inherit;\n  text-decoration:none;\n}\na:hover{\n  color:inherit;\n  text-decoration:none;\n}\na:active{\n  color:inherit;\n  text-decoration:none;\n}\na:focus{\n  outline:none;\n  color:inherit;\n  text-decoration:none;\n}\n.spinner-wave{\n  margin:0 auto;\n  width:100px;\n  height:20px;\n  text-align:center;\n}\n.spinner-wave > div{\n  background-color:#5496F8;\n  height:100%;\n  width:6px;\n  display:inline-block;\n  -webkit-animation:wave 1.2s infinite ease-in-out;\n  animation:wave 1.2s infinite ease-in-out;\n}\n.spinner-wave div:nth-child(2){\n  -webkit-animation-delay:-1.1s;\n  animation-delay:-1.1s;\n}\n.spinner-wave div:nth-child(3){\n  -webkit-animation-delay:-1s;\n  animation-delay:-1s;\n}\n.spinner-wave div:nth-child(4){\n  -webkit-animation-delay:-0.9s;\n  animation-delay:-0.9s;\n}\n.spinner-wave div:nth-child(5){\n  -webkit-animation-delay:-0.8s;\n  animation-delay:-0.8s;\n}\n@-webkit-keyframes wave{\n  0%,\n  40%,\n  100%{\n    -webkit-transform:scaleY(0.4);\n  }\n  20%{\n    -webkit-transform:scaleY(1);\n  }\n}\n@keyframes wave{\n  0%,\n  40%,\n  100%{\n    -webkit-transform:scaleY(0.4);\n            transform:scaleY(0.4);\n  }\n  20%{\n    -webkit-transform:scaleY(1);\n            transform:scaleY(1);\n  }\n}\n@media screen and (max-width: 480px){\n  .hide-xs{\n    display:none !important;\n  }\n}\n@media screen and (min-width: 480px){\n  .show-xs{\n    display:none !important;\n  }\n}\n.ht-btn{\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  -webkit-box-align:center;\n      -ms-flex-align:center;\n          align-items:center;\n  padding:5px 13px;\n  border:0;\n  background:#ffffff;\n  color:#52616A;\n  -webkit-box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12);\n          box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12);\n}\n.ht-btn:focus{\n  background:#fcfcfc;\n  outline:0;\n}\n.ht-btn-card:hover{\n  background:#5496F8;\n  color:rgba(255, 255, 255, 0.96);\n  -webkit-box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12);\n          box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12);\n}\n.stopped-color{\n  color:#FFBB44;\n}\n.drive-color{\n  color:#5496F8;\n}\n.walk-color{\n  color:#5496F8;\n}\n.moving-color{\n  color:#5496F8;\n}\n.logged_off-color{\n  color:#A9BAC4;\n}\n.network_offline-color{\n  color:#d19191;\n}\n.location_disabled-color{\n  color:#d19191;\n}\n.location_low_accuracy-color{\n  color:#d19191;\n}\n.stopped-bg{\n  background:#FFBB44;\n}\n.drive-bg{\n  background:#5496F8;\n}\n.walk-bg{\n  background:#5496F8;\n}\n.moving-bg{\n  background:#5496F8;\n}\n.logged_off-bg{\n  background:#A9BAC4;\n}\n.network_offline-bg{\n  background:#d19191;\n}\n.location_disabled-bg{\n  background-color:#d19191;\n}\n.location_low_accuracy-bg{\n  background-color:#d19191;\n}\n.ht-box{\n  height:20px;\n  min-width:20px;\n  border-radius:50%;\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  color:white;\n  text-shadow:0px 0.5px 1px #ffffff;\n  font-weight:bold;\n}\n.label-container{\n  min-width:170px;\n}\n.graph-label{\n  -webkit-transition:color 0.2s;\n  transition:color 0.2s;\n  padding:1px 5px;\n  color:#52616A;\n  -webkit-box-align:center;\n      -ms-flex-align:center;\n          align-items:center;\n  border-radius:4px;\n  font-size:14px;\n  margin-top:5px;\n}\n.graph-label:hover{\n  outline:1px solid #d6d6d6;\n}\n.graph-label-selectable{\n  cursor:pointer;\n}\n.bar{\n  height:10px;\n  -webkit-transition:width 1s ease-in-out;\n  transition:width 1s ease-in-out;\n  -webkit-transition:opacity 0.3s ease-in-out;\n  transition:opacity 0.3s ease-in-out;\n  float:right;\n}\n.bar:first-child{\n  border-bottom-left-radius:3px;\n  border-top-left-radius:3px;\n}\n.bar:last-child{\n  border-bottom-right-radius:3px;\n  border-top-right-radius:3px;\n}\n.graph-active{\n  background:#e2e2e2;\n}\n.count{\n  font-size:21px;\n  color:#52616A;\n  padding-bottom:18px;\n}\n:host{\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  -webkit-box-orient:vertical;\n  -webkit-box-direction:normal;\n      -ms-flex-direction:column;\n          flex-direction:column;\n}\n.faded{\n  opacity:0.4;\n}\n.bar-selected{\n  outline:1px solid;\n}\n"]
            },] },
];
UsersSummaryComponent.ctorParameters = function () { return []; };
UsersSummaryComponent.propDecorators = {
    "setQuery": [{ type: Output },],
    "clearQueryKey": [{ type: Output },],
    "summary": [{ type: Input },],
    "hideTotal": [{ type: Input },],
    "selectable": [{ type: Input },],
};
var ProfileComponent = /** @class */ (function () {
    function ProfileComponent() {
        this.height = 30;
        this.defaultUrl = "";
    }
    ProfileComponent.prototype.ngOnInit = function () {
    };
    return ProfileComponent;
}());
ProfileComponent.decorators = [
    { type: Component, args: [{
                selector: 'ht-profile',
                template: "<div [style.height.px]=\"height\" [style.width.px]=\"height\" class=\"profile-img\" [ngStyle]=\"{ 'background-image': 'url(' + (url || defaultUrl) + ')'}\">\n</div>\n",
                styles: [":host .profile-img{\n  background-repeat:no-repeat;\n  background-size:cover;\n  background-position:center;\n  border-radius:50%;\n}\n"],
                changeDetection: ChangeDetectionStrategy.OnPush
            },] },
];
ProfileComponent.ctorParameters = function () { return []; };
ProfileComponent.propDecorators = {
    "url": [{ type: Input },],
    "height": [{ type: Input },],
};
var BatteryIconComponent = /** @class */ (function () {
    function BatteryIconComponent() {
        this.battery = 0;
        this.layout = 'row';
        this.reverse = false;
        this.iconType = 'fa';
    }
    BatteryIconComponent.prototype.ngOnInit = function () {
    };
    BatteryIconComponent.prototype.batteryClass = function (level) {
        return this.iconType == 'ionicon' ? this.ioniconBatteryClass(level) : this.faBatteryClass(level);
    };
    BatteryIconComponent.prototype.faBatteryClass = function (level) {
        var className = '';
        if (level > 90) {
            className = 'fa fa-battery-4';
        }
        else if (level > 70) {
            className = 'fa fa-battery-3';
        }
        else if (level > 25) {
            className = 'fa fa-battery-2';
        }
        else if (level > 5) {
            className = 'fa fa-battery-1 text-red';
        }
        else {
            className = 'fa fa-battery-0 text-red';
        }
        return className;
    };
    
    BatteryIconComponent.prototype.ioniconBatteryClass = function (level) {
        var className = '';
        if (level > 90) {
            className = 'ion-battery-full';
        }
        else if (level > 50) {
            className = 'ion-battery-half';
        }
        else if (level > 10) {
            className = 'ion-battery-low';
        }
        else {
            className = 'ion-battery-empty text-red';
        }
        return className;
    };
    return BatteryIconComponent;
}());
BatteryIconComponent.decorators = [
    { type: Component, args: [{
                selector: 'ht-battery-icon',
                template: "<div *ngIf=\"battery\" [ngClass]=\"layout == 'column' ? 'flex-column column-gap-4 justify-center' : 'flex-row row-gap-4 align-center'\" class=\"\">\n  <i class=\"fa\" *ngIf=\"reverse\" [ngClass]=\"batteryClass(battery)\"></i>\n  <div>\n    {{battery}}%\n  </div>\n  <i class=\"fa\" *ngIf=\"!reverse\" [ngClass]=\"batteryClass(battery)\"></i>\n</div>\n",
                styles: [".text-center{\n  text-align:center;\n}\n.text-muted{\n  color:#798E9B;\n}\n.text-right{\n  text-align:right;\n}\n.text-left{\n  text-align:left;\n}\n.text-1{\n  font-size:2em;\n}\n.text-4{\n  font-size:0.8em;\n}\n.text-capitalize{\n  text-transform:capitalize;\n}\n.text-uppercase{\n  text-transform:uppercase;\n}\n.text-ontime{\n  color:#58ae5b;\n}\n.text-late{\n  color:#E6413E;\n}\n.text-warning{\n  color:#E6413E !important;\n}\n.text-red{\n  color:#E6413E;\n}\n.text-blue{\n  color:#5496F8;\n}\n.truncate{\n  white-space:nowrap;\n  overflow:hidden;\n  text-overflow:ellipsis;\n}\n.flex-row{\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  -webkit-box-orient:horizontal;\n  -webkit-box-direction:normal;\n      -ms-flex-direction:row;\n          flex-direction:row;\n}\n.flex-column{\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  -webkit-box-orient:vertical;\n  -webkit-box-direction:normal;\n      -ms-flex-direction:column;\n          flex-direction:column;\n}\n.column-gap-4 > :not(:last-child){\n  margin-bottom:4px;\n}\n.row-gap-4 > :not(:last-child){\n  margin-right:4px;\n}\n.column-gap-7 > :not(:last-child){\n  margin-bottom:7px;\n}\n.row-gap-7 > :not(:last-child){\n  margin-right:7px;\n}\n.column-gap-10 > :not(:last-child){\n  margin-bottom:10px;\n}\n.row-gap-10 > :not(:last-child){\n  margin-right:10px;\n}\n.column-gap-20 > :not(:last-child){\n  margin-bottom:20px;\n}\n.row-gap-20 > :not(:last-child){\n  margin-right:20px;\n}\n.wrap{\n  -ms-flex-wrap:wrap;\n      flex-wrap:wrap;\n}\n.flex{\n  -webkit-box-flex:1;\n      -ms-flex:1;\n          flex:1;\n}\n.auto{\n  margin:auto;\n}\n.relative{\n  position:relative;\n}\n.space-between{\n  -webkit-box-pack:justify;\n      -ms-flex-pack:justify;\n          justify-content:space-between;\n}\n.space-around{\n  -ms-flex-pack:distribute;\n      justify-content:space-around;\n}\n.justify-center{\n  -webkit-box-pack:center;\n      -ms-flex-pack:center;\n          justify-content:center;\n}\n.flex-center{\n  -webkit-box-align:center;\n      -ms-flex-align:center;\n          align-items:center;\n}\n.align-center{\n  -webkit-box-align:center;\n      -ms-flex-align:center;\n          align-items:center;\n}\n.clickable{\n  cursor:pointer;\n}\n.round-icon{\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  width:23px;\n  height:23px;\n  background:#315790;\n  border-radius:50%;\n}\n.flex-half{\n  -ms-flex-preferred-size:50%;\n      flex-basis:50%;\n}\n.link-unstyled{\n  color:inherit;\n}\n.link-unstyled:hover{\n  text-decoration:none;\n}\n.half{\n  width:50%;\n}\n.noselect{\n  -webkit-touch-callout:none;\n  -webkit-user-select:none;\n  -moz-user-select:none;\n  -ms-user-select:none;\n  user-select:none;\n}\n.hover-shadow:hover{\n  -webkit-box-shadow:0px 0px 4px 2px rgba(0, 0, 0, 0.16);\n          box-shadow:0px 0px 4px 2px rgba(0, 0, 0, 0.16);\n}\n.marker-transparent{\n  opacity:0.4;\n}\n.marker-fade{\n  -webkit-filter:contrast(16%) brightness(160%) blur(0.6px);\n          filter:contrast(16%) brightness(160%) blur(0.6px);\n}\n.tooltip-warning{\n  background:#e04745;\n  color:#fff;\n}\n.tooltip-warning-arrow{\n  border-right-color:#e04745 !important;\n}\n.tooltip-info{\n  background:#5496F8;\n  color:#fff;\n}\n.tooltip-info-arrow{\n  border-right-color:#5496F8 !important;\n}\na{\n  color:inherit;\n  text-decoration:none;\n}\na:hover{\n  color:inherit;\n  text-decoration:none;\n}\na:active{\n  color:inherit;\n  text-decoration:none;\n}\na:focus{\n  outline:none;\n  color:inherit;\n  text-decoration:none;\n}\n.spinner-wave{\n  margin:0 auto;\n  width:100px;\n  height:20px;\n  text-align:center;\n}\n.spinner-wave > div{\n  background-color:#5496F8;\n  height:100%;\n  width:6px;\n  display:inline-block;\n  -webkit-animation:wave 1.2s infinite ease-in-out;\n  animation:wave 1.2s infinite ease-in-out;\n}\n.spinner-wave div:nth-child(2){\n  -webkit-animation-delay:-1.1s;\n  animation-delay:-1.1s;\n}\n.spinner-wave div:nth-child(3){\n  -webkit-animation-delay:-1s;\n  animation-delay:-1s;\n}\n.spinner-wave div:nth-child(4){\n  -webkit-animation-delay:-0.9s;\n  animation-delay:-0.9s;\n}\n.spinner-wave div:nth-child(5){\n  -webkit-animation-delay:-0.8s;\n  animation-delay:-0.8s;\n}\n@-webkit-keyframes wave{\n  0%,\n  40%,\n  100%{\n    -webkit-transform:scaleY(0.4);\n  }\n  20%{\n    -webkit-transform:scaleY(1);\n  }\n}\n@keyframes wave{\n  0%,\n  40%,\n  100%{\n    -webkit-transform:scaleY(0.4);\n            transform:scaleY(0.4);\n  }\n  20%{\n    -webkit-transform:scaleY(1);\n            transform:scaleY(1);\n  }\n}\n@media screen and (max-width: 480px){\n  .hide-xs{\n    display:none !important;\n  }\n}\n@media screen and (min-width: 480px){\n  .show-xs{\n    display:none !important;\n  }\n}\n.ht-btn{\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  -webkit-box-align:center;\n      -ms-flex-align:center;\n          align-items:center;\n  padding:5px 13px;\n  border:0;\n  background:#ffffff;\n  color:#52616A;\n  -webkit-box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12);\n          box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12);\n}\n.ht-btn:focus{\n  background:#fcfcfc;\n  outline:0;\n}\n.ht-btn-card:hover{\n  background:#5496F8;\n  color:rgba(255, 255, 255, 0.96);\n  -webkit-box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12);\n          box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12);\n}\n.stopped-color{\n  color:#FFBB44;\n}\n.drive-color{\n  color:#5496F8;\n}\n.walk-color{\n  color:#5496F8;\n}\n.moving-color{\n  color:#5496F8;\n}\n.logged_off-color{\n  color:#A9BAC4;\n}\n.network_offline-color{\n  color:#d19191;\n}\n.location_disabled-color{\n  color:#d19191;\n}\n.location_low_accuracy-color{\n  color:#d19191;\n}\n.stopped-bg{\n  background:#FFBB44;\n}\n.drive-bg{\n  background:#5496F8;\n}\n.walk-bg{\n  background:#5496F8;\n}\n.moving-bg{\n  background:#5496F8;\n}\n.logged_off-bg{\n  background:#A9BAC4;\n}\n.network_offline-bg{\n  background:#d19191;\n}\n.location_disabled-bg{\n  background-color:#d19191;\n}\n.location_low_accuracy-bg{\n  background-color:#d19191;\n}\n"],
                changeDetection: ChangeDetectionStrategy.OnPush
            },] },
];
BatteryIconComponent.ctorParameters = function () { return []; };
BatteryIconComponent.propDecorators = {
    "battery": [{ type: Input },],
    "layout": [{ type: Input },],
    "reverse": [{ type: Input },],
    "iconType": [{ type: Input },],
};
var TimeStringPipe = /** @class */ (function () {
    function TimeStringPipe() {
    }
    TimeStringPipe.prototype.transform = function (value, args) {
        return TimeString(value, args);
    };
    return TimeStringPipe;
}());
TimeStringPipe.decorators = [
    { type: Pipe, args: [{
                name: 'timeString'
            },] },
];
TimeStringPipe.ctorParameters = function () { return []; };
var DateStringPipe = /** @class */ (function () {
    function DateStringPipe() {
    }
    DateStringPipe.prototype.transform = function (value, args) {
        return DateString(value, args);
    };
    return DateStringPipe;
}());
DateStringPipe.decorators = [
    { type: Pipe, args: [{
                name: 'dateString'
            },] },
];
DateStringPipe.ctorParameters = function () { return []; };
var NameCasePipe = /** @class */ (function () {
    function NameCasePipe() {
    }
    NameCasePipe.prototype.transform = function (value, args) {
        return NameCase(value);
    };
    return NameCasePipe;
}());
NameCasePipe.decorators = [
    { type: Pipe, args: [{
                name: 'nameCase'
            },] },
];
NameCasePipe.ctorParameters = function () { return []; };
var DotPipe = /** @class */ (function () {
    function DotPipe() {
    }
    DotPipe.prototype.transform = function (value, args) {
        return DotString(value, args);
    };
    return DotPipe;
}());
DotPipe.decorators = [
    { type: Pipe, args: [{
                name: 'dot'
            },] },
];
DotPipe.ctorParameters = function () { return []; };
var LoadingDotsComponent = /** @class */ (function () {
    function LoadingDotsComponent() {
        this.show = true;
    }
    LoadingDotsComponent.prototype.ngOnInit = function () {
    };
    return LoadingDotsComponent;
}());
LoadingDotsComponent.decorators = [
    { type: Component, args: [{
                selector: 'ht-loading-dots',
                template: "<ng-content></ng-content>\n<span [style.fontSize.px]=\"size || 'inherit'\" class=\"loading-dots\"><span> &bull;</span><span> &bull;</span><span> &bull;</span></span>\n",
                styles: [".loading-dots{\n  font-size:inherit;\n  margin:auto;\n}\n.loading-dots span{\n  -webkit-animation-name:blink;\n          animation-name:blink;\n  -webkit-animation-duration:1.4s;\n          animation-duration:1.4s;\n  -webkit-animation-iteration-count:infinite;\n          animation-iteration-count:infinite;\n  -webkit-animation-fill-mode:both;\n          animation-fill-mode:both;\n}\n.loading-dots span:nth-child(2){\n  -webkit-animation-delay:.2s;\n          animation-delay:.2s;\n}\n.loading-dots span:nth-child(3){\n  -webkit-animation-delay:.4s;\n          animation-delay:.4s;\n}\n@-webkit-keyframes blink{\n  0%{\n    opacity:.2;\n  }\n  20%{\n    opacity:1;\n  }\n  100%{\n    opacity:.2;\n  }\n}\n@keyframes blink{\n  0%{\n    opacity:.2;\n  }\n  20%{\n    opacity:1;\n  }\n  100%{\n    opacity:.2;\n  }\n}\n"],
                changeDetection: ChangeDetectionStrategy.OnPush
            },] },
];
LoadingDotsComponent.ctorParameters = function () { return []; };
LoadingDotsComponent.propDecorators = {
    "show": [{ type: Input },],
    "size": [{ type: Input },],
};
var LoadingDataComponent = /** @class */ (function () {
    function LoadingDataComponent() {
        this.message = "";
    }
    LoadingDataComponent.prototype.ngOnInit = function () {
    };
    return LoadingDataComponent;
}());
LoadingDataComponent.decorators = [
    { type: Component, args: [{
                selector: 'ht-loading-data',
                template: "<div [style.fontSize.px]=\"size || 'inherit'\" loading-dots><span>{{customMessage || message}}</span></div>\n",
                styles: [":host{\n  color:#798E9B;\n  text-align:center;\n}\n"],
                changeDetection: ChangeDetectionStrategy.OnPush
            },] },
];
LoadingDataComponent.ctorParameters = function () { return []; };
LoadingDataComponent.propDecorators = {
    "size": [{ type: Input },],
    "message": [{ type: Input },],
    "customMessage": [{ type: Input },],
};
var DateHumanizePipe = /** @class */ (function () {
    function DateHumanizePipe() {
    }
    DateHumanizePipe.prototype.transform = function (value, args) {
        return DateHumanize(value);
    };
    return DateHumanizePipe;
}());
DateHumanizePipe.decorators = [
    { type: Pipe, args: [{
                name: 'dateHumanize'
            },] },
];
DateHumanizePipe.ctorParameters = function () { return []; };
var DistanceLocalePipe = /** @class */ (function () {
    function DistanceLocalePipe() {
    }
    DistanceLocalePipe.prototype.transform = function (value, args) {
        return DistanceLocale(value, args);
    };
    return DistanceLocalePipe;
}());
DistanceLocalePipe.decorators = [
    { type: Pipe, args: [{
                name: 'distanceLocale'
            },] },
];
DistanceLocalePipe.ctorParameters = function () { return []; };
var HmStringPipe = /** @class */ (function () {
    function HmStringPipe() {
    }
    HmStringPipe.prototype.transform = function (value, args, args2) {
        return HMString(value, args);
    };
    return HmStringPipe;
}());
HmStringPipe.decorators = [
    { type: Pipe, args: [{
                name: 'hmString'
            },] },
];
HmStringPipe.ctorParameters = function () { return []; };
var UsersStatusStringPipe = /** @class */ (function () {
    function UsersStatusStringPipe() {
    }
    UsersStatusStringPipe.prototype.transform = function (value, args) {
        if (status.split(',').length === 4)
            return 'Fit to map';
    };
    return UsersStatusStringPipe;
}());
UsersStatusStringPipe.decorators = [
    { type: Pipe, args: [{
                name: 'usersStatusString'
            },] },
];
UsersStatusStringPipe.ctorParameters = function () { return []; };
var ActionStatusStringPipe = /** @class */ (function () {
    function ActionStatusStringPipe() {
    }
    ActionStatusStringPipe.prototype.transform = function (value, args) {
        return htAction().getFilterString(value);
    };
    return ActionStatusStringPipe;
}());
ActionStatusStringPipe.decorators = [
    { type: Pipe, args: [{
                name: 'actionStatusString'
            },] },
];
ActionStatusStringPipe.ctorParameters = function () { return []; };
var UserSortingStringPipe = /** @class */ (function () {
    function UserSortingStringPipe() {
    }
    UserSortingStringPipe.prototype.transform = function (value, args) {
        return value;
    };
    return UserSortingStringPipe;
}());
UserSortingStringPipe.decorators = [
    { type: Pipe, args: [{
                name: 'userSortingString'
            },] },
];
UserSortingStringPipe.ctorParameters = function () { return []; };
var ActionSortingStringPipe = /** @class */ (function () {
    function ActionSortingStringPipe() {
    }
    ActionSortingStringPipe.prototype.transform = function (value, args) {
        return htAction().getSortingString(value);
    };
    return ActionSortingStringPipe;
}());
ActionSortingStringPipe.decorators = [
    { type: Pipe, args: [{
                name: 'actionSortingString'
            },] },
];
ActionSortingStringPipe.ctorParameters = function () { return []; };
var SafeUrlPipe = /** @class */ (function () {
    function SafeUrlPipe() {
    }
    SafeUrlPipe.prototype.transform = function (value, args) {
    };
    return SafeUrlPipe;
}());
SafeUrlPipe.decorators = [
    { type: Pipe, args: [{ name: 'safeUrl' },] },
];
SafeUrlPipe.ctorParameters = function () { return []; };
var PluralizePipe = /** @class */ (function () {
    function PluralizePipe() {
    }
    PluralizePipe.prototype.transform = function (value, args, suffix, singularSuffix) {
        if (suffix === void 0) { suffix = 's'; }
        if (singularSuffix === void 0) { singularSuffix = ''; }
        if (args && typeof args === 'number') {
            return args > 1 ? value + suffix : value + singularSuffix;
        }
        return value;
    };
    return PluralizePipe;
}());
PluralizePipe.decorators = [
    { type: Pipe, args: [{
                name: 'pluralize'
            },] },
];
PluralizePipe.ctorParameters = function () { return []; };
var ButtonComponent = /** @class */ (function () {
    function ButtonComponent() {
    }
    ButtonComponent.prototype.ngOnInit = function () {
    };
    return ButtonComponent;
}());
ButtonComponent.decorators = [
    { type: Component, args: [{
                selector: 'ht-button',
                template: "<p>\n  button works!\n</p>\n",
                styles: [""]
            },] },
];
ButtonComponent.ctorParameters = function () { return []; };
var LoadingBarComponent = /** @class */ (function () {
    function LoadingBarComponent() {
    }
    LoadingBarComponent.prototype.ngOnInit = function () {
    };
    return LoadingBarComponent;
}());
LoadingBarComponent.decorators = [
    { type: Component, args: [{
                selector: 'ht-loading-bar',
                template: "<div class=\"relative\">\n  <div class=\"load-bar\">\n    <div class=\"bar\"></div>\n    <div class=\"bar\"></div>\n    <div class=\"bar\"></div>\n  </div>\n</div>\n",
                styles: [".text-center{\n  text-align:center;\n}\n.text-muted{\n  color:#798E9B;\n}\n.text-right{\n  text-align:right;\n}\n.text-left{\n  text-align:left;\n}\n.text-1{\n  font-size:2em;\n}\n.text-4{\n  font-size:0.8em;\n}\n.text-capitalize{\n  text-transform:capitalize;\n}\n.text-uppercase{\n  text-transform:uppercase;\n}\n.text-ontime{\n  color:#58ae5b;\n}\n.text-late{\n  color:#E6413E;\n}\n.text-warning{\n  color:#E6413E !important;\n}\n.text-red{\n  color:#E6413E;\n}\n.text-blue{\n  color:#5496F8;\n}\n.truncate{\n  white-space:nowrap;\n  overflow:hidden;\n  text-overflow:ellipsis;\n}\n.flex-row{\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  -webkit-box-orient:horizontal;\n  -webkit-box-direction:normal;\n      -ms-flex-direction:row;\n          flex-direction:row;\n}\n.flex-column{\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  -webkit-box-orient:vertical;\n  -webkit-box-direction:normal;\n      -ms-flex-direction:column;\n          flex-direction:column;\n}\n.column-gap-4 > :not(:last-child){\n  margin-bottom:4px;\n}\n.row-gap-4 > :not(:last-child){\n  margin-right:4px;\n}\n.column-gap-7 > :not(:last-child){\n  margin-bottom:7px;\n}\n.row-gap-7 > :not(:last-child){\n  margin-right:7px;\n}\n.column-gap-10 > :not(:last-child){\n  margin-bottom:10px;\n}\n.row-gap-10 > :not(:last-child){\n  margin-right:10px;\n}\n.column-gap-20 > :not(:last-child){\n  margin-bottom:20px;\n}\n.row-gap-20 > :not(:last-child){\n  margin-right:20px;\n}\n.wrap{\n  -ms-flex-wrap:wrap;\n      flex-wrap:wrap;\n}\n.flex{\n  -webkit-box-flex:1;\n      -ms-flex:1;\n          flex:1;\n}\n.auto{\n  margin:auto;\n}\n.relative{\n  position:relative;\n}\n.space-between{\n  -webkit-box-pack:justify;\n      -ms-flex-pack:justify;\n          justify-content:space-between;\n}\n.space-around{\n  -ms-flex-pack:distribute;\n      justify-content:space-around;\n}\n.justify-center{\n  -webkit-box-pack:center;\n      -ms-flex-pack:center;\n          justify-content:center;\n}\n.flex-center{\n  -webkit-box-align:center;\n      -ms-flex-align:center;\n          align-items:center;\n}\n.align-center{\n  -webkit-box-align:center;\n      -ms-flex-align:center;\n          align-items:center;\n}\n.clickable{\n  cursor:pointer;\n}\n.round-icon{\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  width:23px;\n  height:23px;\n  background:#315790;\n  border-radius:50%;\n}\n.flex-half{\n  -ms-flex-preferred-size:50%;\n      flex-basis:50%;\n}\n.link-unstyled{\n  color:inherit;\n}\n.link-unstyled:hover{\n  text-decoration:none;\n}\n.half{\n  width:50%;\n}\n.noselect{\n  -webkit-touch-callout:none;\n  -webkit-user-select:none;\n  -moz-user-select:none;\n  -ms-user-select:none;\n  user-select:none;\n}\n.hover-shadow:hover{\n  -webkit-box-shadow:0px 0px 4px 2px rgba(0, 0, 0, 0.16);\n          box-shadow:0px 0px 4px 2px rgba(0, 0, 0, 0.16);\n}\n.marker-transparent{\n  opacity:0.4;\n}\n.marker-fade{\n  -webkit-filter:contrast(16%) brightness(160%) blur(0.6px);\n          filter:contrast(16%) brightness(160%) blur(0.6px);\n}\n.tooltip-warning{\n  background:#e04745;\n  color:#fff;\n}\n.tooltip-warning-arrow{\n  border-right-color:#e04745 !important;\n}\n.tooltip-info{\n  background:#5496F8;\n  color:#fff;\n}\n.tooltip-info-arrow{\n  border-right-color:#5496F8 !important;\n}\na{\n  color:inherit;\n  text-decoration:none;\n}\na:hover{\n  color:inherit;\n  text-decoration:none;\n}\na:active{\n  color:inherit;\n  text-decoration:none;\n}\na:focus{\n  outline:none;\n  color:inherit;\n  text-decoration:none;\n}\n.spinner-wave{\n  margin:0 auto;\n  width:100px;\n  height:20px;\n  text-align:center;\n}\n.spinner-wave > div{\n  background-color:#5496F8;\n  height:100%;\n  width:6px;\n  display:inline-block;\n  -webkit-animation:wave 1.2s infinite ease-in-out;\n  animation:wave 1.2s infinite ease-in-out;\n}\n.spinner-wave div:nth-child(2){\n  -webkit-animation-delay:-1.1s;\n  animation-delay:-1.1s;\n}\n.spinner-wave div:nth-child(3){\n  -webkit-animation-delay:-1s;\n  animation-delay:-1s;\n}\n.spinner-wave div:nth-child(4){\n  -webkit-animation-delay:-0.9s;\n  animation-delay:-0.9s;\n}\n.spinner-wave div:nth-child(5){\n  -webkit-animation-delay:-0.8s;\n  animation-delay:-0.8s;\n}\n@-webkit-keyframes wave{\n  0%,\n  40%,\n  100%{\n    -webkit-transform:scaleY(0.4);\n  }\n  20%{\n    -webkit-transform:scaleY(1);\n  }\n}\n@keyframes wave{\n  0%,\n  40%,\n  100%{\n    -webkit-transform:scaleY(0.4);\n            transform:scaleY(0.4);\n  }\n  20%{\n    -webkit-transform:scaleY(1);\n            transform:scaleY(1);\n  }\n}\n@media screen and (max-width: 480px){\n  .hide-xs{\n    display:none !important;\n  }\n}\n@media screen and (min-width: 480px){\n  .show-xs{\n    display:none !important;\n  }\n}\n.ht-btn{\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  -webkit-box-align:center;\n      -ms-flex-align:center;\n          align-items:center;\n  padding:5px 13px;\n  border:0;\n  background:#ffffff;\n  color:#52616A;\n  -webkit-box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12);\n          box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12);\n}\n.ht-btn:focus{\n  background:#fcfcfc;\n  outline:0;\n}\n.ht-btn-card:hover{\n  background:#5496F8;\n  color:rgba(255, 255, 255, 0.96);\n  -webkit-box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12);\n          box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12);\n}\n.stopped-color{\n  color:#FFBB44;\n}\n.drive-color{\n  color:#5496F8;\n}\n.walk-color{\n  color:#5496F8;\n}\n.moving-color{\n  color:#5496F8;\n}\n.logged_off-color{\n  color:#A9BAC4;\n}\n.network_offline-color{\n  color:#d19191;\n}\n.location_disabled-color{\n  color:#d19191;\n}\n.location_low_accuracy-color{\n  color:#d19191;\n}\n.stopped-bg{\n  background:#FFBB44;\n}\n.drive-bg{\n  background:#5496F8;\n}\n.walk-bg{\n  background:#5496F8;\n}\n.moving-bg{\n  background:#5496F8;\n}\n.logged_off-bg{\n  background:#A9BAC4;\n}\n.network_offline-bg{\n  background:#d19191;\n}\n.location_disabled-bg{\n  background-color:#d19191;\n}\n.location_low_accuracy-bg{\n  background-color:#d19191;\n}\n.load-bar{\n  position:absolute;\n  width:100%;\n  height:3px;\n  top:0;\n  background-color:#fdba2c;\n  z-index:10000;\n}\n.bar{\n  content:\"\";\n  display:inline;\n  position:absolute;\n  width:0;\n  height:100%;\n  left:50%;\n  text-align:center;\n}\n.bar:nth-child(1){\n  background-color:#da4733;\n  -webkit-animation:loading 3s linear infinite;\n          animation:loading 3s linear infinite;\n}\n.bar:nth-child(2){\n  background-color:#3b78e7;\n  -webkit-animation:loading 3s linear 1s infinite;\n          animation:loading 3s linear 1s infinite;\n}\n.bar:nth-child(3){\n  background-color:#fdba2c;\n  -webkit-animation:loading 3s linear 2s infinite;\n          animation:loading 3s linear 2s infinite;\n}\n@-webkit-keyframes loading{\n  from{\n    left:50%;\n    width:0;\n    z-index:100;\n  }\n  33.3333%{\n    left:0;\n    width:100%;\n    z-index:10;\n  }\n  to{\n    left:0;\n    width:100%;\n  }\n}\n@keyframes loading{\n  from{\n    left:50%;\n    width:0;\n    z-index:100;\n  }\n  33.3333%{\n    left:0;\n    width:100%;\n    z-index:10;\n  }\n  to{\n    left:0;\n    width:100%;\n  }\n}\n"]
            },] },
];
LoadingBarComponent.ctorParameters = function () { return []; };
var DropdownDirective = /** @class */ (function () {
    function DropdownDirective() {
        this.show = false;
        this.appDropdown = 'onHover';
    }
    DropdownDirective.prototype.onMouseEnter = function (event) {
        if (!this.appDropdown || this.appDropdown === 'onHover') {
            this.show = true;
        }
    };
    DropdownDirective.prototype.onMouseLeave = function (event) {
        if (!this.appDropdown || this.appDropdown === 'onHover') {
            this.show = false;
        }
    };
    DropdownDirective.prototype.onClick = function (event) {
        if (this.appDropdown == 'onClick') {
            this.show = !this.show;
        }
    };
    DropdownDirective.prototype.ngOnInit = function () {
    };
    return DropdownDirective;
}());
DropdownDirective.decorators = [
    { type: Directive, args: [{
                selector: '[htDropdown]'
            },] },
];
DropdownDirective.ctorParameters = function () { return []; };
DropdownDirective.propDecorators = {
    "show": [{ type: HostBinding, args: ['class.is-active',] },],
    "appDropdown": [{ type: Input },],
    "hover": [{ type: Input },],
    "onMouseEnter": [{ type: HostListener, args: ['mouseenter', ['$event'],] },],
    "onMouseLeave": [{ type: HostListener, args: ['mouseleave', ['$event'],] },],
    "onClick": [{ type: HostListener, args: ['click', ['$event'],] },],
};
var SharedModule = /** @class */ (function () {
    function SharedModule() {
    }
    return SharedModule;
}());
SharedModule.decorators = [
    { type: NgModule, args: [{
                imports: [
                    CommonModule,
                    RouterModule
                ],
                declarations: [
                    ProfileComponent,
                    BatteryIconComponent,
                    DateStringPipe,
                    TimeStringPipe,
                    DotPipe,
                    NameCasePipe,
                    LoadingDotsComponent,
                    LoadingDataComponent,
                    DateHumanizePipe,
                    DistanceLocalePipe,
                    HmStringPipe,
                    UsersStatusStringPipe,
                    ActionStatusStringPipe,
                    SafeUrlPipe,
                    UserSortingStringPipe,
                    ActionSortingStringPipe,
                    PluralizePipe,
                    ButtonComponent,
                    LoadingBarComponent,
                    DropdownDirective,
                ],
                exports: [
                    ProfileComponent,
                    BatteryIconComponent,
                    DateStringPipe,
                    TimeStringPipe,
                    DotPipe,
                    NameCasePipe,
                    LoadingDotsComponent,
                    LoadingDataComponent,
                    DateHumanizePipe,
                    DistanceLocalePipe,
                    HmStringPipe,
                    UsersStatusStringPipe,
                    ActionStatusStringPipe,
                    SafeUrlPipe,
                    UserSortingStringPipe,
                    ActionSortingStringPipe,
                    PluralizePipe,
                    LoadingBarComponent,
                    DropdownDirective,
                ]
            },] },
];
SharedModule.ctorParameters = function () { return []; };
var UsersSummaryModule = /** @class */ (function () {
    function UsersSummaryModule() {
    }
    return UsersSummaryModule;
}());
UsersSummaryModule.decorators = [
    { type: NgModule, args: [{
                imports: [
                    CommonModule,
                    SharedModule
                ],
                declarations: [UsersSummaryComponent],
                exports: [UsersSummaryComponent]
            },] },
];
UsersSummaryModule.ctorParameters = function () { return []; };
var UsersSummaryContainerModule = /** @class */ (function () {
    function UsersSummaryContainerModule() {
    }
    return UsersSummaryContainerModule;
}());
UsersSummaryContainerModule.decorators = [
    { type: NgModule, args: [{
                imports: [
                    CommonModule,
                    UsersSummaryModule
                ],
                declarations: [UsersSummaryContainerComponent],
                exports: [UsersSummaryContainerComponent]
            },] },
];
UsersSummaryContainerModule.ctorParameters = function () { return []; };
var UserCardComponent = /** @class */ (function () {
    function UserCardComponent() {
        this.selectedUserId = null;
        this.action = 'default';
        this.onAction = new EventEmitter();
        this.showStatus = true;
        this.hovered = false;
    }
    UserCardComponent.prototype.hoverIn = function () {
        this.hovered = true;
    };
    UserCardComponent.prototype.hoverOut = function () {
        this.hovered = false;
    };
    UserCardComponent.prototype.ngOnInit = function () {
    };
    UserCardComponent.prototype.getShowStatus = function (user) {
        if (user.segments) {
            return !!user.segments.length && !last(user.segments)['ended_at'];
        }
        return !!user;
    };
    UserCardComponent.prototype.fireAction = function () {
        this.onAction.next({ user: this.user, action: this.action });
    };
    UserCardComponent.prototype.ngOnChanges = function (a) {
        this.showStatus = a.user ? this.getShowStatus(a.user.currentValue) : this.showStatus;
    };
    UserCardComponent.prototype.getActionText = function () {
        switch (this.action) {
            case "close":
                return "Close";
            case "detail":
                return "";
            case "loading":
                return "loading";
            default:
                return "View on Map";
        }
    };
    UserCardComponent.prototype.debug = function (e) {
        console.log(e);
    };
    return UserCardComponent;
}());
UserCardComponent.decorators = [
    { type: Component, args: [{
                selector: 'ht-user-card',
                template: "<div class=\"ht-card-content flex-row flex\">\n  <div class=\"text-left flex-row row-gap-10 flex\">\n    <ht-profile [height]=\"35\" [url]=\"user.photo\"></ht-profile>\n    <div class=\"\">\n      <div class=\"flex-row\">\n        {{user.name | nameCase | dot: 'Unknown users'}}\n      </div>\n      <ng-template [ngIf]=\"showStatus\">\n        <div class=\"user-status-display\" [ngClass]=\"user.status + '-color'\">\n          <div [class.text-warning]=\"user.display.is_warning\">{{user.display.status_text}}</div>\n        </div>\n        <div class=\"flex-row user-status\">\n          <div>{{user.display.sub_status_text}}<span *ngIf=\"user.display.battery\">&nbsp; &bull; &nbsp;</span></div>\n          <ht-battery-icon *ngIf=\"user.display.battery\" [battery]=\"user.display.battery\"></ht-battery-icon>\n        </div>\n      </ng-template>\n      <div class=\"flex-row\" *ngIf=\"!user['segments'] && user['total_distance']\">\n        <div>{{user['total_distance'] | distanceLocale}}</div>\n        <div>&nbsp; &bull; &nbsp;</div>\n        <div>{{user['total_duration'] | hmString:60}}</div>\n      </div>\n      <div class=\"\">\n        {{user['phone']}}\n      </div>\n    </div>\n  </div>\n  <!--<div *ngIf=\"action !== 'loading'; else loading\" [@cardAction]=\"action == 'close' ? 'active' : 'inactive'\" class=\"flex-row\">-->\n    <!--<button class=\"auto ht-btn ht-btn-card text-uppercase\" (click)=\"fireAction()\" *ngIf=\"getActionText()\">-->\n      <!--{{getActionText()}}-->\n    <!--</button>-->\n  <!--</div>-->\n  <ng-template #loading>\n    <div class=\"text-1 flex-row\">\n      <ht-loading-dots class=\"auto\"></ht-loading-dots>\n    </div>\n  </ng-template>\n</div>\n<ng-content></ng-content>\n<!--<div class=\"card-quick-action\" *ngIf=\"action == 'default'\">-->\n  <!--<div class=\"flex-row align-center\">-->\n    <!--<span class=\"element\">View on map &nbsp;</span>-->\n    <!--<i class=\"fa fa-map-o\"></i>-->\n  <!--</div>-->\n<!--</div>-->\n",
                styles: [".ht-card-content{\n  padding:5px 10px;\n}\n"],
                changeDetection: ChangeDetectionStrategy.OnPush
            },] },
];
UserCardComponent.ctorParameters = function () { return []; };
UserCardComponent.propDecorators = {
    "user": [{ type: Input },],
    "selectedUserId": [{ type: Input },],
    "action": [{ type: Input },],
    "onAction": [{ type: Output },],
    "hoverIn": [{ type: HostListener, args: ['mouseenter',] },],
    "hoverOut": [{ type: HostListener, args: ['mouseleave',] },],
};
var UserCardModule = /** @class */ (function () {
    function UserCardModule() {
    }
    return UserCardModule;
}());
UserCardModule.decorators = [
    { type: NgModule, args: [{
                imports: [
                    CommonModule,
                    SharedModule
                ],
                declarations: [UserCardComponent],
                exports: [UserCardComponent]
            },] },
];
UserCardModule.ctorParameters = function () { return []; };
var UsersComponent = /** @class */ (function () {
    function UsersComponent() {
        this.hasMap = false;
        this.showExtraBtn = true;
        this.onSelectUser = new EventEmitter();
        this.onAction = new EventEmitter();
        this.onHover = new EventEmitter();
    }
    UsersComponent.prototype.ngOnInit = function () {
    };
    UsersComponent.prototype.getAction = function (user) {
        var id = user.id;
        if (!this.hasMap)
            return 'detail';
        if (this.selectedUserId === user.id) {
            return "close";
        }
        else if (id === this.loadingUserDataId && (!this.selectedUserId || !user.segments)) {
            return 'loading';
        }
        else if (this.selectedUserDataId === user.id) {
            return 'detail';
        }
        else {
            return "default";
        }
    };
    UsersComponent.prototype.indexId = function (index, item) {
        return item.id;
    };
    UsersComponent.prototype.selectUser = function (user) {
        this.onSelectUser.next(user);
    };
    UsersComponent.prototype.hover = function (id) {
        this.onHover.next(id);
    };
    UsersComponent.prototype.ngOnDestroy = function () {
    };
    return UsersComponent;
}());
UsersComponent.decorators = [
    { type: Component, args: [{
                selector: 'ht-users',
                template: "<div class=\"card-stack\" *ngIf=\"users\" [@cardStack]=\"users.length\">\n  <ht-user-card\n    [@sort]=\"i\"\n    class=\"flex-row card card-clickable is-marginless\"\n    [class.card-selected]=\"selectedUserDataId == user.id\"\n    (mouseenter)=\"hover(user.id)\"\n    (mouseleave)=\"hover(null)\"\n    (click)=\"selectUser(user)\"\n    [user]=\"user\" *ngFor=\"let user of users; let i = index; trackBy:indexId\">\n    <div *ngIf=\"selectedUserId\" class=\"card-content-mid card-action flex-row align-center\" (click)=\"onAction.next({event: $event, action: 'close'})\">\n      <a class=\"delete is-medium\"></a>\n    </div>\n    <ht-loading-dots\n      *ngIf=\"user.id === loadingUserDataId && !selectedUserId\" class=\"card-content-mid text-1 card-action flex-row align-center\">\n    </ht-loading-dots>\n  </ht-user-card>\n</div>\n",
                styles: [".card-action-clicked{\n  color:white;\n}\n.card-action{\n  font-size:1.3em;\n  font-weight:bold;\n  min-width:46px;\n}\n.card-action.clickable:hover{\n  background:#e6e6e6;\n}\n"],
                changeDetection: ChangeDetectionStrategy.OnPush,
                animations: [
                    trigger('card', [
                        transition(':enter', [
                            style({ transform: 'translateX(-100px)', height: 0, opacity: 0 }),
                            animate('0.3s' + ' ease-out')
                        ]),
                        transition(':leave', [
                            style({ transform: 'translateX(0px)', height: '*', opacity: 1 }),
                            animate('0.3s' + ' ease-in', style({ transform: 'translateX(-100px)', height: 0, opacity: 0 }))
                        ])
                    ]),
                    trigger('image', []),
                    trigger('sort', [
                        transition('* => *', animate(500, keyframes([
                            style('*'),
                            style({ opacity: 0.1 }),
                            style('*'),
                        ]))),
                    ]),
                    trigger('cardStack', [
                        transition('* => *', [
                            query('.card:enter', [
                                style({ transform: 'translateX(-100px)', height: 0, opacity: 0 }),
                                animate('0.3s' + ' ease-out')
                            ], { optional: true }),
                            query('.card:leave', [
                                style({ transform: 'translateX(0px)', height: '*', opacity: 1 }),
                                animate('0.3s' + ' ease-in', style({ transform: 'translateX(-100px)', height: 0, opacity: 0 }))
                            ], { optional: true })
                        ])
                    ])
                ]
            },] },
];
UsersComponent.ctorParameters = function () { return []; };
UsersComponent.propDecorators = {
    "users": [{ type: Input },],
    "selectedUserId": [{ type: Input },],
    "selectedUserDataId": [{ type: Input },],
    "loadingUserDataId": [{ type: Input },],
    "hasMap": [{ type: Input },],
    "showExtraBtn": [{ type: Input },],
    "onSelectUser": [{ type: Output },],
    "onAction": [{ type: Output },],
    "onHover": [{ type: Output },],
};
var UsersModule = /** @class */ (function () {
    function UsersModule() {
    }
    return UsersModule;
}());
UsersModule.decorators = [
    { type: NgModule, args: [{
                imports: [
                    CommonModule,
                    SharedModule,
                    UserCardModule
                ],
                declarations: [UsersComponent],
                exports: [UsersComponent]
            },] },
];
UsersModule.ctorParameters = function () { return []; };
var UsersContainerComponent = /** @class */ (function () {
    function UsersContainerComponent(userService, mapService) {
        this.userService = userService;
        this.mapService = mapService;
        this.hasPlaceline = true;
        this.hasMap = false;
        this.showStatusSummary = true;
        this.showActiveSummary = true;
        this.apiType = ApiType.analytics;
        this.showAll = false;
        this._queryMap = [
            {
                label: 'Logged in',
                values: ['stopped', 'on_trip', 'network_offline'],
                color: Color.blue
            },
            {
                label: 'Logged off',
                values: ['logged_off'],
                color: '#a8a8a8',
            },
            {
                label: 'Location disabled',
                values: ['location_disabled'],
                color: Color.red
            },
        ];
    }
    UsersContainerComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.userService.list.setActive();
        if (this.hasPlaceline) {
            var selectedUser$ = listwithSelectedId$(this.userService.list.data$, this.userService.list.id$);
            this.user$ = this.userService.placeline.data$;
            this.usersPage$ = listWithItem$(selectedUser$, this.user$);
            this.mapService.usersCluster.onClick = function (entity) {
                _this.selectUserCard(entity.data);
            };
        }
        else {
            this.usersPage$ = this.userService.list.data$;
        }
        this.users$ = this.usersPage$.pipe(map$1(function (pageData) {
            return pageData ? pageData.results : pageData;
        }));
        this.loadingUsers$ = this.userService.getLoading$();
        this.loadingUserDataId$ = this.userService.placeline.loading$
            .pipe(map$1(function (data) { return !!data; }), distinctUntilChanged());
        this.selectedUserDataId$ = this.userService.placeline.id$;
        this.selectedUserId$ = this.userService.list.id$;
        this.showSummary$ = this.selectedUserId$.pipe(map$1(function (id) {
            return id ? false : true;
        }), distinctUntilChanged());
    };
    Object.defineProperty(UsersContainerComponent.prototype, "queryMap", {
        get: function () {
            var showAllLabel = this.userService.filterClass.showAllQueryArray;
            return this.showAll ? __spread(this._queryMap, showAllLabel) : this._queryMap;
        },
        enumerable: true,
        configurable: true
    });
    UsersContainerComponent.prototype.clear = function () {
        this.mapService.segmentTrace.trace(null);
    };
    UsersContainerComponent.prototype.selectUserMarker = function (user) {
        this.mapService.usersCluster.highlight(user);
    };
    UsersContainerComponent.prototype.onAction = function (payload) {
        switch (payload['action']) {
            case "close":
                this.closeUser(payload.event);
                break;
            case "detail": {
                this.selectUserCard(payload.user);
                break;
            }
            case "default": {
                this.selectUserCardAction(payload.user, payload.event);
                break;
            }
            default:
        }
    };
    
    UsersContainerComponent.prototype.selectUserCard = function (user) {
        if (this.hasPlaceline) {
            this.selectUser(user);
        }
        else {
            this.selectUserMarker(user);
        }
    };
    UsersContainerComponent.prototype.selectUserCardAction = function (user, event) {
        if (this.hasPlaceline) {
            this.selectUserData(user, event);
        }
        else {
            this.selectUserMarker(user);
        }
    };
    UsersContainerComponent.prototype.closeUser = function (event) {
        event.stopPropagation();
        this.userService.list.setId(null);
        this.userService.placeline.setId(null);
    };
    UsersContainerComponent.prototype.selectUser = function (user) {
        var id = user.id;
        this.userService.list.toggleId(id);
        this.userService.placeline.toggleId(id);
    };
    
    UsersContainerComponent.prototype.selectUserData = function (userData, event) {
        var id = userData.id;
        event.stopPropagation();
        this.userService.placeline.toggleId(id);
    };
    UsersContainerComponent.prototype.fetchPage = function (number) {
        this.userService.list.addQuery({ page: number });
    };
    UsersContainerComponent.prototype.hoverUser = function (userId) {
        this.mapService.usersCluster.setPopup(userId);
    };
    UsersContainerComponent.prototype.closeHoverUser = function () {
        this.hoverUser(null);
    };
    UsersContainerComponent.prototype.ngOnDestroy = function () {
        this.userService.list.clearData();
        this.userService.list.setId(null);
    };
    return UsersContainerComponent;
}());
UsersContainerComponent.decorators = [
    { type: Component, args: [{
                selector: 'ht-users-container',
                template: "<div class=\"flex-column relative\">\n  <ng-container *ngIf=\"showSummary$ | async\">\n    <ht-users-summary-container\n      *ngIf=\"showStatusSummary\"\n      [clearDataOnDestroy]=\"false\"\n      [selectable]=\"true\"></ht-users-summary-container>\n    <ht-users-summary-container\n      *ngIf=\"showActiveSummary\"\n      [selectable]=\"true\"\n      [hideTotal]=\"true\"\n      [toSetActive]=\"false\"\n      [clearDataOnDestroy]=\"false\"\n      [queryLabels]=\"queryMap\"></ht-users-summary-container>\n  </ng-container>\n  <ht-users\n    [selectedUserDataId]=\"selectedUserDataId$ | async\"\n    [selectedUserId]=\"selectedUserId$ | async\"\n    [loadingUserDataId]=\"loadingUserDataId$ | async\"\n    [hasMap]=\"hasMap\"\n    (onHover)=\"hoverUser($event)\"\n    (onAction)=\"onAction($event)\"\n    (onSelectUser)=\"selectUserCard($event)\"\n    [showExtraBtn]=\"hasPlaceline\"\n    [users]=\"users$ | async\"></ht-users>\n  <ht-placeline-container [showUserCard]=\"false\" *ngIf=\"(selectedUserId$ | async)\"></ht-placeline-container>\n  <!--<div *ngIf=\"(selectedUserId$ | async) && user$ | async as userData\">-->\n    <!--&lt;!&ndash;<ht-user-card [user]=\"userData\"></ht-user-card>&ndash;&gt;-->\n    <!--<ht-placeline [userData]=\"userData\"></ht-placeline>-->\n  <!--</div>-->\n  <div class=\"loading-box\" *ngIf=\"loadingUsers$ | async\"></div>\n  <ng-container *ngIf=\"usersPage$ | async as usersPage\">\n    <ht-pagination (fetchPage)=\"fetchPage($event)\" [pageDate]=\"usersPage\"></ht-pagination>\n  </ng-container>\n</div>\n",
                styles: [".text-center{\n  text-align:center;\n}\n.text-muted{\n  color:#798E9B;\n}\n.text-right{\n  text-align:right;\n}\n.text-left{\n  text-align:left;\n}\n.text-1{\n  font-size:2em;\n}\n.text-4{\n  font-size:0.8em;\n}\n.text-capitalize{\n  text-transform:capitalize;\n}\n.text-uppercase{\n  text-transform:uppercase;\n}\n.text-ontime{\n  color:#58ae5b;\n}\n.text-late{\n  color:#E6413E;\n}\n.text-warning{\n  color:#E6413E !important;\n}\n.text-red{\n  color:#E6413E;\n}\n.text-blue{\n  color:#5496F8;\n}\n.truncate{\n  white-space:nowrap;\n  overflow:hidden;\n  text-overflow:ellipsis;\n}\n.flex-row{\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  -webkit-box-orient:horizontal;\n  -webkit-box-direction:normal;\n      -ms-flex-direction:row;\n          flex-direction:row;\n}\n.flex-column{\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  -webkit-box-orient:vertical;\n  -webkit-box-direction:normal;\n      -ms-flex-direction:column;\n          flex-direction:column;\n}\n.column-gap-4 > :not(:last-child){\n  margin-bottom:4px;\n}\n.row-gap-4 > :not(:last-child){\n  margin-right:4px;\n}\n.column-gap-7 > :not(:last-child){\n  margin-bottom:7px;\n}\n.row-gap-7 > :not(:last-child){\n  margin-right:7px;\n}\n.column-gap-10 > :not(:last-child){\n  margin-bottom:10px;\n}\n.row-gap-10 > :not(:last-child){\n  margin-right:10px;\n}\n.column-gap-20 > :not(:last-child){\n  margin-bottom:20px;\n}\n.row-gap-20 > :not(:last-child){\n  margin-right:20px;\n}\n.wrap{\n  -ms-flex-wrap:wrap;\n      flex-wrap:wrap;\n}\n.flex{\n  -webkit-box-flex:1;\n      -ms-flex:1;\n          flex:1;\n}\n.auto{\n  margin:auto;\n}\n.relative{\n  position:relative;\n}\n.space-between{\n  -webkit-box-pack:justify;\n      -ms-flex-pack:justify;\n          justify-content:space-between;\n}\n.space-around{\n  -ms-flex-pack:distribute;\n      justify-content:space-around;\n}\n.justify-center{\n  -webkit-box-pack:center;\n      -ms-flex-pack:center;\n          justify-content:center;\n}\n.flex-center{\n  -webkit-box-align:center;\n      -ms-flex-align:center;\n          align-items:center;\n}\n.align-center{\n  -webkit-box-align:center;\n      -ms-flex-align:center;\n          align-items:center;\n}\n.clickable{\n  cursor:pointer;\n}\n.round-icon{\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  width:23px;\n  height:23px;\n  background:#315790;\n  border-radius:50%;\n}\n.flex-half{\n  -ms-flex-preferred-size:50%;\n      flex-basis:50%;\n}\n.link-unstyled{\n  color:inherit;\n}\n.link-unstyled:hover{\n  text-decoration:none;\n}\n.half{\n  width:50%;\n}\n.noselect{\n  -webkit-touch-callout:none;\n  -webkit-user-select:none;\n  -moz-user-select:none;\n  -ms-user-select:none;\n  user-select:none;\n}\n.hover-shadow:hover{\n  -webkit-box-shadow:0px 0px 4px 2px rgba(0, 0, 0, 0.16);\n          box-shadow:0px 0px 4px 2px rgba(0, 0, 0, 0.16);\n}\n.marker-transparent{\n  opacity:0.4;\n}\n.marker-fade{\n  -webkit-filter:contrast(16%) brightness(160%) blur(0.6px);\n          filter:contrast(16%) brightness(160%) blur(0.6px);\n}\n.tooltip-warning{\n  background:#e04745;\n  color:#fff;\n}\n.tooltip-warning-arrow{\n  border-right-color:#e04745 !important;\n}\n.tooltip-info{\n  background:#5496F8;\n  color:#fff;\n}\n.tooltip-info-arrow{\n  border-right-color:#5496F8 !important;\n}\na{\n  color:inherit;\n  text-decoration:none;\n}\na:hover{\n  color:inherit;\n  text-decoration:none;\n}\na:active{\n  color:inherit;\n  text-decoration:none;\n}\na:focus{\n  outline:none;\n  color:inherit;\n  text-decoration:none;\n}\n.spinner-wave{\n  margin:0 auto;\n  width:100px;\n  height:20px;\n  text-align:center;\n}\n.spinner-wave > div{\n  background-color:#5496F8;\n  height:100%;\n  width:6px;\n  display:inline-block;\n  -webkit-animation:wave 1.2s infinite ease-in-out;\n  animation:wave 1.2s infinite ease-in-out;\n}\n.spinner-wave div:nth-child(2){\n  -webkit-animation-delay:-1.1s;\n  animation-delay:-1.1s;\n}\n.spinner-wave div:nth-child(3){\n  -webkit-animation-delay:-1s;\n  animation-delay:-1s;\n}\n.spinner-wave div:nth-child(4){\n  -webkit-animation-delay:-0.9s;\n  animation-delay:-0.9s;\n}\n.spinner-wave div:nth-child(5){\n  -webkit-animation-delay:-0.8s;\n  animation-delay:-0.8s;\n}\n@-webkit-keyframes wave{\n  0%,\n  40%,\n  100%{\n    -webkit-transform:scaleY(0.4);\n  }\n  20%{\n    -webkit-transform:scaleY(1);\n  }\n}\n@keyframes wave{\n  0%,\n  40%,\n  100%{\n    -webkit-transform:scaleY(0.4);\n            transform:scaleY(0.4);\n  }\n  20%{\n    -webkit-transform:scaleY(1);\n            transform:scaleY(1);\n  }\n}\n@media screen and (max-width: 480px){\n  .hide-xs{\n    display:none !important;\n  }\n}\n@media screen and (min-width: 480px){\n  .show-xs{\n    display:none !important;\n  }\n}\n.ht-btn{\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  -webkit-box-align:center;\n      -ms-flex-align:center;\n          align-items:center;\n  padding:5px 13px;\n  border:0;\n  background:#ffffff;\n  color:#52616A;\n  -webkit-box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12);\n          box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12);\n}\n.ht-btn:focus{\n  background:#fcfcfc;\n  outline:0;\n}\n.ht-btn-card:hover{\n  background:#5496F8;\n  color:rgba(255, 255, 255, 0.96);\n  -webkit-box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12);\n          box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12);\n}\n.stopped-color{\n  color:#FFBB44;\n}\n.drive-color{\n  color:#5496F8;\n}\n.walk-color{\n  color:#5496F8;\n}\n.moving-color{\n  color:#5496F8;\n}\n.logged_off-color{\n  color:#A9BAC4;\n}\n.network_offline-color{\n  color:#d19191;\n}\n.location_disabled-color{\n  color:#d19191;\n}\n.location_low_accuracy-color{\n  color:#d19191;\n}\n.stopped-bg{\n  background:#FFBB44;\n}\n.drive-bg{\n  background:#5496F8;\n}\n.walk-bg{\n  background:#5496F8;\n}\n.moving-bg{\n  background:#5496F8;\n}\n.logged_off-bg{\n  background:#A9BAC4;\n}\n.network_offline-bg{\n  background:#d19191;\n}\n.location_disabled-bg{\n  background-color:#d19191;\n}\n.location_low_accuracy-bg{\n  background-color:#d19191;\n}\n.loading-box{\n  position:absolute;\n  background:rgba(255, 255, 255, 0.7);\n  top:0;\n  left:0;\n  width:100%;\n  height:100%;\n  -webkit-transition:background 0.5s;\n  transition:background 0.5s;\n  pointer-events:none;\n}\n.loading-box-active{\n  background:rgba(255, 255, 255, 0.7);\n}\n"]
            },] },
];
UsersContainerComponent.ctorParameters = function () { return [
    { type: HtUsersService, },
    { type: HtMapService, },
]; };
UsersContainerComponent.propDecorators = {
    "hasPlaceline": [{ type: Input },],
    "hasMap": [{ type: Input },],
    "showStatusSummary": [{ type: Input },],
    "showActiveSummary": [{ type: Input },],
    "apiType": [{ type: Input },],
    "showAll": [{ type: Input },],
};
var PlacelineComponent = /** @class */ (function () {
    function PlacelineComponent(ref) {
        this.ref = ref;
        this.highlightedSegmentId = new EventEmitter();
        this.hoveredAction = new EventEmitter();
        this.selectedSegment = new EventEmitter();
        this.selectedSegmentId = "__";
        this.isMobile = false;
        this.selectedAction = null;
        this.selectedActivity = "";
        this.hardSelectedActivity = "";
        this.actionMap = {};
    }
    PlacelineComponent.prototype.selectInUserData = function (segment, event) {
        if (segment && (segment.type === 'trip' || segment.type === 'stop')) {
            var id = segment.id;
            var hardSelectedActivity = this.selectedSegmentId === id ? null : segment.id;
            console.log("emit", this.hardSelectedActivity);
            this.selectedSegment.next(hardSelectedActivity);
        }
        else {
            this.hardSelectedActivity = "";
            this.selectedSegment.next(null);
            if (event)
                event.stopPropagation();
        }
    };
    PlacelineComponent.prototype.selectSegment = function (segment, toShow) {
        if (toShow === void 0) { toShow = true; }
        if (segment.actionText) {
            var actionId = toShow ? segment.action_id : null;
            this.selectAction(actionId);
        }
        else {
            var userId = toShow ? segment.id : null;
            this.highlightActivity(userId);
        }
    };
    PlacelineComponent.prototype.hoverActivity = function (activityId) {
        this.selectedActivity = activityId;
        this.ref.detectChanges();
    };
    PlacelineComponent.prototype.highlightActivity = function (activityId) {
        if (this.selectedSegmentId)
            return false;
        this.highlightedSegmentId.next(activityId);
        this.hoverActivity(activityId);
    };
    PlacelineComponent.prototype.selectAction = function (actionId) {
        this.selectedAction = actionId;
        this.hoveredAction.next(actionId);
        this.ref.detectChanges();
    };
    Object.defineProperty(PlacelineComponent.prototype, "placelineMod", {
        get: function () {
            var _this = this;
            var placeline = this.userData;
            if (this.userData.segments.length === 0)
                return [];
            var actions = placeline.actions;
            this.actionMap = {};
            var _a = this.currentExpActions(actions), currentActions = _a.currentActions, expActions = _a.expActions;
            var allEvents = this.userData.events;
            var activitySegments = reduce(this.userData.segments, function (acc, segment) {
                var time = segment.started_at;
                var activityText = _this.getActivityText(segment);
                var activityClass = _this.getActivityClass(segment);
                var placeAddress = _this.getActivityPlaceAddress(segment);
                var lastSeg = segment;
                var gapSegment = _this.getGapSegment(segment, acc.lastSeg);
                var currentActivitySegment = Object.assign({}, segment, { time: time, events: [] }, _this.getSegmentStyle(activityClass), { activityText: activityText, placeAddress: placeAddress });
                var events = reject(acc.events, function (event) {
                    if (_this.isEventInSegment(segment, event)) {
                        var eventDisplay = _this.getEventDisplay(event);
                        event = Object.assign({}, event, eventDisplay);
                        if (eventDisplay)
                            currentActivitySegment.events.push(event);
                        return true;
                    }
                    return false;
                });
                var activitySegments = __spread(acc.activitySegments, gapSegment, [currentActivitySegment]);
                return { activitySegments: activitySegments, events: events, lastSeg: lastSeg };
            }, { activitySegments: [], events: allEvents, lastSeg: null }).activitySegments;
            var lastSeg = this.lastSeg(placeline);
            var _b = reduce(__spread(activitySegments, [lastSeg]), function (acc, segment, i, placelineM) {
                activitySegments = acc.activitySegments;
                var lastSeg = segment;
                var activityClass = acc.lastSeg ? acc.lastSeg.activityClass : 'no-info';
                var actionSegments = acc.actionSegments;
                var actionEvents = reject(acc.actionEvents, function (actionEvent) {
                    var actionMin = _this.getMinute(actionEvent.actionTime);
                    var segTime = _this.getMinute(segment.time);
                    if (actionMin == segTime && !segment.ended && !segment.actionText) {
                        var actionSegment = _this.createActionSegment(actionEvent, activityClass, acc.lastSeg);
                        segment = Object.assign({}, actionSegment, segment);
                        return true;
                    }
                    else if (actionEvent.actionTime <= segment.time) {
                        var actionSegment = _this.createActionSegment(actionEvent, activityClass, acc.lastSeg);
                        actionSegments.push(actionSegment);
                        return true;
                    }
                    else {
                    }
                    return false;
                });
                if (segment.ended && !segment.actionText) {
                }
                else if (segment.ended) {
                    activitySegments.push(Object.assign({}, segment, { ended: false, type: segment.type }));
                }
                else {
                    activitySegments.push(Object.assign({}, segment, { type: segment.type }));
                }
                return { activitySegments: activitySegments, actionEvents: actionEvents, lastSeg: lastSeg, actionSegments: actionSegments };
            }, { activitySegments: [], actionEvents: currentActions, lastSeg: null, actionSegments: [] }), actionSegments = _b.actionSegments, actionEvents = _b.actionEvents;
            var unsortedCurrentSegment = __spread(activitySegments, actionSegments);
            var currentSegment = sortBy(unsortedCurrentSegment, function (segment) {
                return segment.time;
            });
            var restActiviySegments = map(actionEvents, function (actionEvent, i) {
                lastSeg['activityBorder'] = 'no-info-border';
                lastSeg['activityText'] = 'No information';
                return _this.createActionSegment(actionEvent, 'no-info');
            });
            var expActionSegments = map(expActions, function (actionEvent, i, expEvents) {
                if (actionEvents.length === 0) {
                    lastSeg['activityBorder'] = 'line-border';
                }
                var activityClass = i < expEvents.length - 2 ? 'line' : '';
                return _this.createActionSegment(actionEvent, activityClass);
            });
            if (restActiviySegments.length == 1 && restActiviySegments[0].actionText && lastSeg['time']) {
                var actionTime = this.getMinute(restActiviySegments[0].time);
                var lastTime = this.getMinute(lastSeg['time']);
                if (actionTime == lastTime) {
                    return lastSeg['time'] ? __spread(currentSegment, restActiviySegments, expActionSegments) : __spread(currentSegment, expActionSegments);
                }
            }
            return lastSeg['time'] ? __spread(currentSegment, [lastSeg], restActiviySegments, expActionSegments) : __spread(currentSegment, expActionSegments);
        },
        enumerable: true,
        configurable: true
    });
    PlacelineComponent.prototype.createActionSegment = function (actionEvent, activityClass, seg) {
        if (activityClass === void 0) { activityClass = 'no-info'; }
        if (seg === void 0) { seg = {}; }
        var id = seg ? seg['id'] : '';
        return Object.assign({}, actionEvent, { time: actionEvent.actionTime }, this.getSegmentStyle(activityClass), { ended: false, isLive: false, id: id });
    };
    PlacelineComponent.prototype.getSegmentStyle = function (activityClass) {
        if (activityClass === void 0) { activityClass = 'no-info'; }
        return activityClass ?
            {
                activityBg: activityClass + "-bg",
                activityBorder: activityClass + "-border",
                activityClass: activityClass,
                activityColor: activityClass + "-color"
            } : {};
    };
    PlacelineComponent.prototype.isEventInSegment = function (segment, event) {
        if (!!segment.ended_at && !!event.recorded_at) {
            var eventMin = this.getMinute(event.recorded_at);
            var segEndMin = this.getMinute(segment.ended_at);
            var segStartMin = this.getMinute(segment.started_at);
            return eventMin >= segStartMin && eventMin <= segEndMin;
        }
        return false;
    };
    PlacelineComponent.prototype.getMinute = function (time) {
        var timeStamp = new Date(time).getTime();
        return Math.round(timeStamp - timeStamp % 60000);
    };
    PlacelineComponent.prototype.currentExpActions = function (actions) {
        var _this = this;
        return reduce(actions, function (acc, action) {
            var expActions = [];
            _this.actionMap = _this.setActionMap(action);
            var assign = Object.assign({ actionText: NameCase(action.type) + " assigned", actionTime: action.assigned_at, actionD: NameCase(action.type[0]) + _this.actionMap[action.id], action_id: action.id, actionLookupId: action.lookup_id }, action);
            var currentActions = (assign.actionTime) ? __spread(acc.currentActions, [assign]) : acc.currentActions;
            if (action.display.ended_at) {
                var end = Object.assign({ actionText: NameCase(action.type) + " " + action.status, actionTime: action.display.ended_at, actionD: NameCase(action.type[0]) + _this.actionMap[action.id], actionEnd: true, action_id: action.id, action_distance: action.distance, action_duration: action.duration, actionEnded: true, actionLookupId: action.lookup_id }, action);
                currentActions = __spread(currentActions, [end]);
            }
            else {
                var end = Object.assign({ actionText: NameCase(action.type) + " scheduled", actionTime: action.eta || null, actionD: NameCase(action.type[0]) + _this.actionMap[action.id], actionEnd: true, action_id: action.id, action_distance: action.distance, action_duration: action.duration, actionLookupId: action.lookup_id }, action);
                expActions.push(end);
            }
            return { currentActions: currentActions, expActions: expActions };
        }, { currentActions: [], expActions: [] });
    };
    PlacelineComponent.prototype.lastSeg = function (placeline) {
        var lastSeg = last(placeline.segments);
        if (!lastSeg)
            return {};
        var pipeClass = "";
        var time;
        var isLive = new HtPlaceline().isLive(placeline);
        if (!isLive) {
            time = lastSeg.ended_at;
        }
        else {
            isLive = true;
            time = placeline.last_heartbeat_at;
        }
        var activityClass = this.getActivityClass(lastSeg);
        return {
            time: time,
            pipeClass: pipeClass,
            id: '..',
            lastSeg: true,
            isLive: isLive,
            ended: true,
            activityClass: activityClass,
            activityBg: this.getActivityClass(lastSeg) + "-bg",
            type: lastSeg.type
        };
    };
    PlacelineComponent.prototype.isSegmentLive = function (placeline) {
        var old = placeline.display.seconds_elapsed_since_last_heartbeat;
        var status = placeline.display.status_text;
        return status !== 'Logged off' && old < 15 * 60;
    };
    PlacelineComponent.prototype.getActivityClass = function (segment) {
        var type = segment.type;
        if (type === 'location_void') {
            return 'warning';
        }
        return type === 'stop' ? 'stop' : 'trip';
    };
    PlacelineComponent.prototype.getPipeClass = function (status) {
        return status === 'stop' ? 'stop solid' : 'trip solid';
    };
    PlacelineComponent.prototype.getActivityText = function (segment) {
        if (segment.type === 'stop') {
            return segment.place && segment.place.display_text ? segment.place.display_text : 'Stop';
        }
        else if (segment.activity) {
            return segment.activity;
        }
        else if (segment.reason) {
            return this.getLocationVoidText(segment);
        }
        else {
            return NameCase(segment.type);
        }
    };
    PlacelineComponent.prototype.getActivityPlaceAddress = function (segment) {
        if (segment.type === 'stop' && segment.place && segment.place.locality) {
            return segment.place.locality;
        }
        return "";
    };
    PlacelineComponent.prototype.getLocationVoidText = function (segment) {
        switch (segment.reason) {
            case 'disabled':
                return "Location disabled";
            case 'no_permission':
                return "Location permission unavailable";
            case 'unknown':
                return "Location unavailable";
            case 'sdk_inactive': {
                return "SDK inactive";
            }
            case "no_activity_permission": {
                return "No activity permission";
            }
            case "device_off": {
                return "Device off";
            }
            default:
                return "Location unavailable";
        }
    };
    PlacelineComponent.prototype.getEventDisplay = function (event) {
        switch (event.type) {
            case 'tracking.started':
                return {
                    text: 'Tracking started',
                    subtext: ''
                };
            case 'tracking.ended':
                return {
                    text: 'Tracking ended',
                    subtext: ''
                };
            case 'device.secondary.ignored':
                return {
                    text: 'Secondary device ignored',
                    subtext: ''
                };
        }
        return {
            text: "",
            subtext: ""
        };
    };
    PlacelineComponent.prototype.getGapSegment = function (segment, lastSeg) {
        var gaps = [];
        if (!lastSeg)
            return [];
        if (segment.started_at && lastSeg.ended_at) {
            var endMin = this.getMinute(segment.started_at);
            var startMin = this.getMinute(lastSeg.ended_at);
            var duration = (new Date(segment.started_at).getTime() - new Date(lastSeg.ended_at).getTime()) / 1000;
            if (endMin !== startMin && startMin < endMin) {
                var gap = Object.assign({}, this.getSegmentStyle('no-info'), { time: lastSeg.ended_at, activityText: 'No information', events: [], id: '...', duration: duration });
                gaps.push(gap);
            }
        }
        return gaps;
    };
    PlacelineComponent.prototype.setActionMap = function (action) {
        var actionMap = this.actionMap;
        var type = action.type;
        var id = action.id;
        var typeCount = this.actionMap[type];
        var actionShort = this.actionMap[id];
        if (typeCount) {
            if (!actionShort) {
                actionMap[type] = this.actionMap[type] + 1;
                actionMap[id] = '' + this.actionMap[type];
            }
        }
        else {
            actionMap[type] = 1;
            actionMap[id] = '';
        }
        return Object.assign({}, actionMap);
    };
    PlacelineComponent.prototype.indexId = function (index, item) {
        return item.id;
    };
    PlacelineComponent.prototype.indexPlaceline = function (index, item) {
        return item.time || "";
    };
    PlacelineComponent.prototype.log = function (a) {
        console.log(a);
    };
    PlacelineComponent.prototype.ngOnInit = function () {
    };
    return PlacelineComponent;
}());
PlacelineComponent.decorators = [
    { type: Component, args: [{
                selector: 'ht-placeline',
                template: "<div class=\"flex-column\">\n  <div\n    class=\"flex-row segment\"\n    (click)=\"selectInUserData(segment)\"\n    [class.active-segment]=\"(selectedActivity == segment.id && segment.activityBorder && !selectedSegmentId) || selectedSegmentId === segment.id\"\n    (mouseenter)=\"highlightActivity(segment.id)\"\n    (mouseleave)=\"highlightActivity(null)\"\n    *ngFor=\"let segment of placelineMod; trackBy:indexPlaceline; let last = last\">\n    <div class=\"time-container action-time\">\n      <div class=\"target-status text-muted\">\n      </div>\n      <div class=\"timestamp\">\n        {{segment.time | timeString | dot: 'Unknown ETA'}}\n      </div>\n      <div class=\"text-muted\">\n        {{segment.time | dateString: 'short'}}\n      </div>\n      <!--<div class=\"time-container-mid text-muted\" *ngIf=\"!segment.actionD\">-->\n        <!--<span>{{segment.duration / 60 | hmString}}</span>-->\n      <!--</div>-->\n    </div>\n    <div class=\"pipe\">\n      <div class=\"bar\" *ngIf=\"!last\" [class.big]=\"(selectedActivity == segment.id && segment.activityBorder && !selectedSegmentId) || selectedSegmentId === segment.id\" [class.solid]=\"segment.activityBorder\" [ngClass]=\"segment.activityBorder\"></div>\n    </div>\n    <div class=\"flex-column flex timeline-detail\">\n      <div class=\"activity-dot segment-dot\" [class.activity-dot-ended]=\"segment.actionEnded\" *ngIf=\"segment.actionD\"><div class=\"auto\">{{segment.actionD}} </div></div>\n      <div *ngIf=\"segment.isLive\" [ngClass]=\"segment.activityBg\" class=\"segment-dot\"><div *ngIf=\"segment.isLive\" [ngClass]=\"segment.activityBg\" class=\"is-live\" [class.is-pulse]=\"segment.type == 'stop' || segment.type === 'trip'\"></div></div>\n      <div *ngIf=\"!segment.isLive && !segment.actionD\" class=\"a-dot\" [ngClass]=\"segment.activityBorder\"></div>\n      <div class=\"flex-column column-gap-10\">\n        <div (mouseenter)=\"selectAction(segment.action_id)\" (mouseleave)=\"selectAction(null)\" class=\"action-card\" *ngIf=\"segment.actionText\">\n          <div class=\"flex-column column-gap-4\">\n            <div class=\"title\">\n              {{segment.actionText}}\n            </div>\n            <div class=\"lookup\" *ngIf=\"segment.actionLookupId\">{{segment.actionLookupId}}</div>\n            <div *ngIf=\"segment.expected_at && segment.actionEnd\">Scheduled at {{segment.expected_at | timeString}}</div>\n            <div *ngIf=\"segment.action_duration\" class=\"flex-row row-gap-4\">\n              <span>{{segment.action_duration / 60 | hmString}}</span>\n              <ng-template [ngIf]=\"(segment.action_distance || segment.action_distance == 0)\">\n                <span>&bull;</span>\n                <span>{{segment.action_distance | distanceLocale: timezone}}</span>\n              </ng-template>\n            </div>\n          </div>\n        </div>\n        <!--<pre>-->\n        <!--{{segment | json}}-->\n        <!--</pre>-->\n        <div class=\"activity-card flex-column\" *ngIf=\"segment.activityText\">\n          <div [ngClass]=\"segment.activityColor\" class=\"truncate\" style=\"max-width: 128px;\">\n            {{segment.activityText | nameCase}}\n          </div>\n          <div class=\"flex-row row-gap-4 activity-stats align-center\" *ngIf=\"segment.duration\">\n            <span>{{segment.duration / 60 | hmString}}</span>\n            <ng-template [ngIf]=\"(segment.distance || segment.distance == 0) && segment.type == 'trip'\">\n              <span>&bull;</span>\n              <span>{{segment.distance | distanceLocale: timezone}}</span>\n            </ng-template>\n            <ng-container *ngIf=\"segment.step_count && (segment.type == 'stop' || segment.activityText == 'walk')\">\n              <span>&bull;</span>\n              <span>{{segment.step_count}} {{'step' | pluralize: segment.step_count}}</span>\n            </ng-container>\n          </div>\n          <!--<div>-->\n            <!--{{segment.placeAddress}}-->\n          <!--</div>-->\n          <table class=\"table table-bordered table-condensed\" *ngIf=\"segment.events && segment.events.length\">\n            <tbody>\n            <tr *ngFor=\"let event of segment.events; trackBy:indexId\">\n              <td>{{event.recorded_at | timeString}}</td>\n              <td>{{event.text}}</td>\n            </tr>\n            </tbody>\n          </table>\n          <div class=\"text-muted\" *ngIf=\"selectedSegmentId == segment.id && segment.place\">\n            {{segment.place.address}}\n          </div>\n          <div class=\"close-card\" *ngIf=\"selectedSegmentId == segment.id && !isMobile\" (click)=\"selectInUserData(null, $event)\">\n            <i class=\"fa fa-times-circle fa-2x\"></i>\n          </div>\n        </div>\n        <div *ngIf=\"segment.isLive\" class=\"text-muted heatbeat\">\n          Last heartbeat\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n<div class=\"card\" *ngIf=\"placelineMod && placelineMod.length == 0\">\n  <div class=\"card-content-mid text-center\"><strong>No Placeline</strong></div>\n</div>\n",
                styles: [".text-center{\n  text-align:center;\n}\n.text-muted{\n  color:#798E9B;\n}\n.text-right{\n  text-align:right;\n}\n.text-left{\n  text-align:left;\n}\n.text-1{\n  font-size:2em;\n}\n.text-4{\n  font-size:0.8em;\n}\n.text-capitalize{\n  text-transform:capitalize;\n}\n.text-uppercase{\n  text-transform:uppercase;\n}\n.text-ontime{\n  color:#58ae5b;\n}\n.text-late{\n  color:#E6413E;\n}\n.text-warning{\n  color:#E6413E !important;\n}\n.text-red{\n  color:#E6413E;\n}\n.text-blue{\n  color:#5496F8;\n}\n.truncate{\n  white-space:nowrap;\n  overflow:hidden;\n  text-overflow:ellipsis;\n}\n.flex-row{\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  -webkit-box-orient:horizontal;\n  -webkit-box-direction:normal;\n      -ms-flex-direction:row;\n          flex-direction:row;\n}\n.flex-column{\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  -webkit-box-orient:vertical;\n  -webkit-box-direction:normal;\n      -ms-flex-direction:column;\n          flex-direction:column;\n}\n.column-gap-4 > :not(:last-child){\n  margin-bottom:4px;\n}\n.row-gap-4 > :not(:last-child){\n  margin-right:4px;\n}\n.column-gap-7 > :not(:last-child){\n  margin-bottom:7px;\n}\n.row-gap-7 > :not(:last-child){\n  margin-right:7px;\n}\n.column-gap-10 > :not(:last-child){\n  margin-bottom:10px;\n}\n.row-gap-10 > :not(:last-child){\n  margin-right:10px;\n}\n.column-gap-20 > :not(:last-child){\n  margin-bottom:20px;\n}\n.row-gap-20 > :not(:last-child){\n  margin-right:20px;\n}\n.wrap{\n  -ms-flex-wrap:wrap;\n      flex-wrap:wrap;\n}\n.flex{\n  -webkit-box-flex:1;\n      -ms-flex:1;\n          flex:1;\n}\n.auto{\n  margin:auto;\n}\n.relative{\n  position:relative;\n}\n.space-between{\n  -webkit-box-pack:justify;\n      -ms-flex-pack:justify;\n          justify-content:space-between;\n}\n.space-around{\n  -ms-flex-pack:distribute;\n      justify-content:space-around;\n}\n.justify-center{\n  -webkit-box-pack:center;\n      -ms-flex-pack:center;\n          justify-content:center;\n}\n.flex-center{\n  -webkit-box-align:center;\n      -ms-flex-align:center;\n          align-items:center;\n}\n.align-center{\n  -webkit-box-align:center;\n      -ms-flex-align:center;\n          align-items:center;\n}\n.clickable{\n  cursor:pointer;\n}\n.round-icon{\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  width:23px;\n  height:23px;\n  background:#315790;\n  border-radius:50%;\n}\n.flex-half{\n  -ms-flex-preferred-size:50%;\n      flex-basis:50%;\n}\n.link-unstyled{\n  color:inherit;\n}\n.link-unstyled:hover{\n  text-decoration:none;\n}\n.half{\n  width:50%;\n}\n.noselect{\n  -webkit-touch-callout:none;\n  -webkit-user-select:none;\n  -moz-user-select:none;\n  -ms-user-select:none;\n  user-select:none;\n}\n.hover-shadow:hover{\n  -webkit-box-shadow:0px 0px 4px 2px rgba(0, 0, 0, 0.16);\n          box-shadow:0px 0px 4px 2px rgba(0, 0, 0, 0.16);\n}\n.marker-transparent{\n  opacity:0.4;\n}\n.marker-fade{\n  -webkit-filter:contrast(16%) brightness(160%) blur(0.6px);\n          filter:contrast(16%) brightness(160%) blur(0.6px);\n}\n.tooltip-warning{\n  background:#e04745;\n  color:#fff;\n}\n.tooltip-warning-arrow{\n  border-right-color:#e04745 !important;\n}\n.tooltip-info{\n  background:#5496F8;\n  color:#fff;\n}\n.tooltip-info-arrow{\n  border-right-color:#5496F8 !important;\n}\na{\n  color:inherit;\n  text-decoration:none;\n}\na:hover{\n  color:inherit;\n  text-decoration:none;\n}\na:active{\n  color:inherit;\n  text-decoration:none;\n}\na:focus{\n  outline:none;\n  color:inherit;\n  text-decoration:none;\n}\n.spinner-wave{\n  margin:0 auto;\n  width:100px;\n  height:20px;\n  text-align:center;\n}\n.spinner-wave > div{\n  background-color:#5496F8;\n  height:100%;\n  width:6px;\n  display:inline-block;\n  -webkit-animation:wave 1.2s infinite ease-in-out;\n  animation:wave 1.2s infinite ease-in-out;\n}\n.spinner-wave div:nth-child(2){\n  -webkit-animation-delay:-1.1s;\n  animation-delay:-1.1s;\n}\n.spinner-wave div:nth-child(3){\n  -webkit-animation-delay:-1s;\n  animation-delay:-1s;\n}\n.spinner-wave div:nth-child(4){\n  -webkit-animation-delay:-0.9s;\n  animation-delay:-0.9s;\n}\n.spinner-wave div:nth-child(5){\n  -webkit-animation-delay:-0.8s;\n  animation-delay:-0.8s;\n}\n@-webkit-keyframes wave{\n  0%,\n  40%,\n  100%{\n    -webkit-transform:scaleY(0.4);\n  }\n  20%{\n    -webkit-transform:scaleY(1);\n  }\n}\n@keyframes wave{\n  0%,\n  40%,\n  100%{\n    -webkit-transform:scaleY(0.4);\n            transform:scaleY(0.4);\n  }\n  20%{\n    -webkit-transform:scaleY(1);\n            transform:scaleY(1);\n  }\n}\n@media screen and (max-width: 480px){\n  .hide-xs{\n    display:none !important;\n  }\n}\n@media screen and (min-width: 480px){\n  .show-xs{\n    display:none !important;\n  }\n}\n.ht-btn{\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  -webkit-box-align:center;\n      -ms-flex-align:center;\n          align-items:center;\n  padding:5px 13px;\n  border:0;\n  background:#ffffff;\n  color:#52616A;\n  -webkit-box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12);\n          box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12);\n}\n.ht-btn:focus{\n  background:#fcfcfc;\n  outline:0;\n}\n.ht-btn-card:hover{\n  background:#5496F8;\n  color:rgba(255, 255, 255, 0.96);\n  -webkit-box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12);\n          box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12);\n}\n.stopped-color{\n  color:#FFBB44;\n}\n.drive-color{\n  color:#5496F8;\n}\n.walk-color{\n  color:#5496F8;\n}\n.moving-color{\n  color:#5496F8;\n}\n.logged_off-color{\n  color:#A9BAC4;\n}\n.network_offline-color{\n  color:#d19191;\n}\n.location_disabled-color{\n  color:#d19191;\n}\n.location_low_accuracy-color{\n  color:#d19191;\n}\n.stopped-bg{\n  background:#FFBB44;\n}\n.drive-bg{\n  background:#5496F8;\n}\n.walk-bg{\n  background:#5496F8;\n}\n.moving-bg{\n  background:#5496F8;\n}\n.logged_off-bg{\n  background:#A9BAC4;\n}\n.network_offline-bg{\n  background:#d19191;\n}\n.location_disabled-bg{\n  background-color:#d19191;\n}\n.location_low_accuracy-bg{\n  background-color:#d19191;\n}\n:host{\n  margin:30px 0;\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  -webkit-box-orient:vertical;\n  -webkit-box-direction:normal;\n      -ms-flex-direction:column;\n          flex-direction:column;\n}\n.segment{\n  border-radius:4px;\n  padding-right:18px;\n}\n.active-segment{\n  background:rgba(255, 255, 255, 0.75);\n}\n.trip-status{\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  -webkit-box-orient:vertical;\n  -webkit-box-direction:normal;\n      -ms-flex-direction:column;\n          flex-direction:column;\n  text-align:center;\n  color:#52616A;\n  margin-bottom:20px;\n  position:relative;\n}\n.trip-status .status-main{\n  font-size:31px;\n  font-weight:600;\n}\n.trip-status .status-sub{\n  color:#798E9B;\n  font-size:12px;\n}\n.ht-breadcrumb{\n  padding-bottom:19px;\n}\n.card{\n  margin-bottom:9px;\n}\n.card .action-img{\n  margin:0 auto;\n}\n.card .content-right{\n  -ms-flex-pack:distribute;\n      justify-content:space-around;\n  position:relative;\n  text-align:center;\n}\n.driver-container{\n  margin-bottom:20px;\n  border-bottom:1px solid #C9D6DE;\n  padding-bottom:16px;\n}\n.driver-container .text-muted{\n  color:#A9BAC4;\n}\n.task-status{\n  padding-bottom:20px;\n  text-align:center;\n  color:#52616A;\n}\n.time-container{\n  width:84px;\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  -webkit-box-orient:vertical;\n  -webkit-box-direction:normal;\n      -ms-flex-direction:column;\n          flex-direction:column;\n  text-align:right;\n  padding-right:20px;\n  padding-bottom:16px;\n  z-index:5;\n  color:#52616A;\n}\n.time-container .target-status{\n  font-size:10px;\n}\n.time-container .timestamp{\n  font-size:14px;\n  color:#52616A;\n}\n.time-container .text-muted{\n  color:#A9BAC4;\n  font-size:12px;\n}\n.time-container .timestamp-text{\n  font-size:12px;\n  color:#52616A;\n  font-weight:700;\n}\n.time-container-mid{\n  height:100%;\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  -webkit-box-pack:end;\n      -ms-flex-pack:end;\n          justify-content:flex-end;\n  -webkit-box-align:center;\n      -ms-flex-align:center;\n          align-items:center;\n}\n.pipe{\n  width:20px;\n  min-width:20px;\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  -webkit-box-orient:vertical;\n  -webkit-box-direction:normal;\n      -ms-flex-direction:column;\n          flex-direction:column;\n  -webkit-box-pack:center;\n      -ms-flex-pack:center;\n          justify-content:center;\n  -webkit-box-align:center;\n      -ms-flex-align:center;\n          align-items:center;\n  z-index:1;\n}\n.pipe .bar{\n  height:100%;\n  -webkit-box-flex:1;\n      -ms-flex:1;\n          flex:1;\n}\n.pipe .big{\n  outline:2px solid;\n}\n.pipe .solid{\n  border-right:3px solid #798E9B;\n}\n.pipe .line{\n  border-right:3px dotted #798E9B;\n}\n.pipe .line-border{\n  border-right:3px dotted #798E9B;\n  outline:0;\n}\n.pipe .light{\n  border-right:3px dashed rgba(121, 142, 155, 0.4);\n}\n.pipe .fade{\n  border-right:3px solid rgba(121, 142, 155, 0.14);\n}\n.timeline-detail{\n  padding-bottom:22px;\n  position:relative;\n  padding-left:16px;\n  min-height:66px;\n}\n.timeline-detail .task-action{\n  font-size:16px;\n  color:#52616A;\n  text-transform:capitalize;\n  margin-bottom:4px;\n  -webkit-transition:font-size 0.4s;\n  transition:font-size 0.4s;\n}\n.timeline-detail .action-title{\n  font-size:16px;\n  color:#52616A;\n  text-transform:capitalize;\n  -webkit-transition:font-size 0.4s;\n  transition:font-size 0.4s;\n  font-weight:700;\n}\n.timeline-detail .task-detail{\n  background:#fff;\n  padding:6px 10px;\n  color:#52616A;\n  -webkit-transition:font-size 0.4s;\n  transition:font-size 0.4s;\n}\n.timeline-detail .task-icon{\n  position:absolute;\n  left:-23px;\n  top:-2px;\n}\n.timeline-detail .task-ontime-status{\n  color:#55ad58;\n  padding-bottom:4px;\n  font-size:11px;\n  -webkit-transition:font-size 0.4s;\n  transition:font-size 0.4s;\n}\n.timeline-detail .text-late{\n  color:#E6413E;\n}\n.selected-task .task-action{\n  font-size:18px;\n}\n.selected-task .task-detail{\n  font-size:13px;\n}\n.selected-task .task-ontime-status{\n  font-size:13px;\n}\n.trip-event .pipe{\n  padding-top:7px;\n}\n.trip-event .time-container{\n  padding-bottom:24px;\n}\n.segment-dot{\n  width:25px;\n  height:25px;\n  border-radius:50%;\n  background:#fff;\n  position:absolute;\n  top:-1px;\n  left:-23px;\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  z-index:2;\n}\n.a-dot{\n  width:9px;\n  height:9px;\n  border-radius:50%;\n  background:#fff;\n  border:2px solid #798E9B;\n  position:absolute;\n  top:-4px;\n  left:-14px;\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  background-color:white;\n  z-index:2;\n}\n.activity-dot{\n  border:1px solid #798E9B;\n  font-size:10px;\n}\n.activity-dot-ended{\n  background:#798E9B;\n  color:#fff;\n}\n.trip-dot{\n  border:0px solid #5496F8;\n  background:#5496F8;\n}\n.trip-dot .pulse{\n  background:#5496F8;\n}\n.stop-dot{\n  border:0px solid #5496F8;\n  background:#5496F8;\n}\n.stop-dot .pulse{\n  background:#5496F8;\n}\n@-webkit-keyframes pulse{\n  0%{\n    -webkit-transform:scale(0.3, 0.3);\n            transform:scale(0.3, 0.3);\n    opacity:0.9;\n  }\n  100%{\n    -webkit-transform:scale(3, 3);\n            transform:scale(3, 3);\n    opacity:0;\n  }\n}\n@keyframes pulse{\n  0%{\n    -webkit-transform:scale(0.3, 0.3);\n            transform:scale(0.3, 0.3);\n    opacity:0.9;\n  }\n  100%{\n    -webkit-transform:scale(3, 3);\n            transform:scale(3, 3);\n    opacity:0;\n  }\n}\n.ranges li.active{\n  background:#52616A;\n  border-color:#52616A;\n}\n.ranges li{\n  color:#52616A;\n}\n.ranges li:hover{\n  background:#52616A;\n  border-color:#52616A;\n}\n.is-live{\n  border-radius:50%;\n  height:25px;\n  width:25px;\n  position:absolute;\n  z-index:10;\n  opacity:1;\n  margin:auto;\n}\n.is-pulse{\n  -webkit-animation:pulse 3s ease-out;\n          animation:pulse 3s ease-out;\n  -webkit-animation-iteration-count:infinite;\n          animation-iteration-count:infinite;\n}\n.trip{\n  color:#5496F8;\n  border-color:#5496F8 !important;\n}\n.stop{\n  color:#FFBB44;\n  border-color:#FFBB44 !important;\n}\n.no-info{\n  color:#FFBB44;\n  border-color:#A9BAC4 !important;\n}\n.ht-faded{\n  opacity:0.4;\n}\n.action{\n  position:absolute;\n  top:6px;\n  padding:3px;\n  font-size:19px;\n  color:#798E9B;\n}\n.action-left{\n  left:11px;\n  font-size:35px;\n  color:#A9BAC4;\n}\n.action-left:hover{\n  color:#798E9B;\n}\n.text-sm{\n  font-size:11px;\n  color:#52616A;\n  padding-bottom:7px;\n}\n.title{\n  font-size:13px;\n  font-weight:bold;\n}\n.activity-card{\n  padding:6px 10px;\n  color:#52616A;\n  -webkit-transition:font-size 0.4s;\n  transition:font-size 0.4s;\n  font-size:13px;\n  position:relative;\n  cursor:pointer;\n}\n.activity-card-selected{\n  background:#fff;\n}\n.activity-card-selected:hover{\n  background:#fff;\n}\n.activity-card .close-card{\n  position:absolute;\n  top:-3px;\n  right:-3px;\n  color:#52616A;\n  height:14px;\n  width:14px;\n  border-radius:50%;\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n}\n.activity-card .close-card .fa{\n  margin:auto;\n}\n.action-card{\n  background:#fff;\n  padding:3px 11px;\n  border:1px solid #C9D6DE;\n  font-size:11px;\n  cursor:pointer;\n  color:#52616A;\n  margin-left:-127px;\n  padding-left:134px;\n  margin-top:-9px;\n  min-height:50px;\n  -webkit-box-shadow:1px 2px 2px 0px rgba(0, 0, 0, 0.07);\n          box-shadow:1px 2px 2px 0px rgba(0, 0, 0, 0.07);\n}\n.action-card:hover{\n  border:1px solid #798E9B;\n}\n.action-card-active{\n  border:1px solid #798E9B;\n}\n.trip-border{\n  border-color:#5496F8 !important;\n  outline-color:#5496F8 !important;\n}\n.stop-border{\n  border-color:#FFBB44 !important;\n  outline-color:#FFBB44 !important;\n}\n.no-info-border{\n  border-color:#A9BAC4 !important;\n  outline-color:#A9BAC4 !important;\n}\n.warning-border{\n  border-color:#d19191 !important;\n  outline-color:#d19191 !important;\n}\n.trip-bg{\n  background:#5496F8;\n}\n.stop-bg{\n  background:#FFBB44;\n}\n.no-info-bg{\n  background:#A9BAC4;\n}\n.warning-bg{\n  background:#d19191;\n}\n.trip-color{\n  color:#5496F8;\n}\n.stop-color{\n  color:#ffb025;\n}\n.no-info-color{\n  color:#A9BAC4;\n}\n.warning-color{\n  color:#d19191;\n}\n.table{\n  margin:7px 0;\n  font-size:11px;\n}\n.activity-stats{\n  font-size:12px;\n  font-weight:bold;\n}\n.heatbeat{\n  padding-left:12px;\n  font-size:13px;\n}\n"],
                changeDetection: ChangeDetectionStrategy.OnPush
            },] },
];
PlacelineComponent.ctorParameters = function () { return [
    { type: ChangeDetectorRef, },
]; };
PlacelineComponent.propDecorators = {
    "highlightedSegmentId": [{ type: Output },],
    "hoveredAction": [{ type: Output },],
    "selectedSegment": [{ type: Output },],
    "userData": [{ type: Input },],
    "selectedSegmentId": [{ type: Input },],
    "isMobile": [{ type: Input },],
    "timezone": [{ type: Input },],
};
var PlacelineModule = /** @class */ (function () {
    function PlacelineModule() {
    }
    return PlacelineModule;
}());
PlacelineModule.decorators = [
    { type: NgModule, args: [{
                imports: [
                    CommonModule,
                    SharedModule
                ],
                declarations: [PlacelineComponent],
                exports: [PlacelineComponent]
            },] },
];
PlacelineModule.ctorParameters = function () { return []; };
var PlacelineContainerComponent = /** @class */ (function () {
    function PlacelineContainerComponent(userClientService) {
        this.userClientService = userClientService;
        this.showUserCard = true;
    }
    PlacelineContainerComponent.prototype.ngOnInit = function () {
        this.selectedSegmentId$ = this.userClientService.placeline.segmentResetId$;
        this.userData$ = this.userClientService.placeline.data$;
        if (this.userId) {
            this.userClientService.placeline.setId(this.userId);
        }
    };
    PlacelineContainerComponent.prototype.onHighlightSegment = function (segmentId) {
        this.userClientService.placeline.setSegmentSelectedId(segmentId);
    };
    PlacelineContainerComponent.prototype.onSelectSegmentId = function (segmentId) {
        this.userClientService.placeline.setSegmentResetMapId(segmentId);
    };
    PlacelineContainerComponent.prototype.ngOnDestroy = function () {
        this.userClientService.placeline.setId(null);
        this.userClientService.placeline.clearData();
    };
    return PlacelineContainerComponent;
}());
PlacelineContainerComponent.decorators = [
    { type: Component, args: [{
                selector: 'ht-placeline-container',
                template: "<div class=\"flex-column column-gap-10\" *ngIf=\"userData$ | async as userData; else loading\">\n  <ht-user-card *ngIf=\"showUserCard\" [user]=\"userData\"></ht-user-card>\n  <ht-placeline [selectedSegmentId]=\"selectedSegmentId$ | async\" (selectedSegment)=\"onSelectSegmentId($event)\" (highlightedSegmentId)=\"onHighlightSegment($event)\" [userData]=\"userData\"></ht-placeline>\n</div>\n<ng-template #loading>\n  <ht-loading-dots class=\"text-1 text-center flex-row\"></ht-loading-dots>\n</ng-template>\n",
                styles: [".text-center{\n  text-align:center;\n}\n.text-muted{\n  color:#798E9B;\n}\n.text-right{\n  text-align:right;\n}\n.text-left{\n  text-align:left;\n}\n.text-1{\n  font-size:2em;\n}\n.text-4{\n  font-size:0.8em;\n}\n.text-capitalize{\n  text-transform:capitalize;\n}\n.text-uppercase{\n  text-transform:uppercase;\n}\n.text-ontime{\n  color:#58ae5b;\n}\n.text-late{\n  color:#E6413E;\n}\n.text-warning{\n  color:#E6413E !important;\n}\n.text-red{\n  color:#E6413E;\n}\n.text-blue{\n  color:#5496F8;\n}\n.truncate{\n  white-space:nowrap;\n  overflow:hidden;\n  text-overflow:ellipsis;\n}\n.flex-row{\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  -webkit-box-orient:horizontal;\n  -webkit-box-direction:normal;\n      -ms-flex-direction:row;\n          flex-direction:row;\n}\n.flex-column{\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  -webkit-box-orient:vertical;\n  -webkit-box-direction:normal;\n      -ms-flex-direction:column;\n          flex-direction:column;\n}\n.column-gap-4 > :not(:last-child){\n  margin-bottom:4px;\n}\n.row-gap-4 > :not(:last-child){\n  margin-right:4px;\n}\n.column-gap-7 > :not(:last-child){\n  margin-bottom:7px;\n}\n.row-gap-7 > :not(:last-child){\n  margin-right:7px;\n}\n.column-gap-10 > :not(:last-child){\n  margin-bottom:10px;\n}\n.row-gap-10 > :not(:last-child){\n  margin-right:10px;\n}\n.column-gap-20 > :not(:last-child){\n  margin-bottom:20px;\n}\n.row-gap-20 > :not(:last-child){\n  margin-right:20px;\n}\n.wrap{\n  -ms-flex-wrap:wrap;\n      flex-wrap:wrap;\n}\n.flex{\n  -webkit-box-flex:1;\n      -ms-flex:1;\n          flex:1;\n}\n.auto{\n  margin:auto;\n}\n.relative{\n  position:relative;\n}\n.space-between{\n  -webkit-box-pack:justify;\n      -ms-flex-pack:justify;\n          justify-content:space-between;\n}\n.space-around{\n  -ms-flex-pack:distribute;\n      justify-content:space-around;\n}\n.justify-center{\n  -webkit-box-pack:center;\n      -ms-flex-pack:center;\n          justify-content:center;\n}\n.flex-center{\n  -webkit-box-align:center;\n      -ms-flex-align:center;\n          align-items:center;\n}\n.align-center{\n  -webkit-box-align:center;\n      -ms-flex-align:center;\n          align-items:center;\n}\n.clickable{\n  cursor:pointer;\n}\n.round-icon{\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  width:23px;\n  height:23px;\n  background:#315790;\n  border-radius:50%;\n}\n.flex-half{\n  -ms-flex-preferred-size:50%;\n      flex-basis:50%;\n}\n.link-unstyled{\n  color:inherit;\n}\n.link-unstyled:hover{\n  text-decoration:none;\n}\n.half{\n  width:50%;\n}\n.noselect{\n  -webkit-touch-callout:none;\n  -webkit-user-select:none;\n  -moz-user-select:none;\n  -ms-user-select:none;\n  user-select:none;\n}\n.hover-shadow:hover{\n  -webkit-box-shadow:0px 0px 4px 2px rgba(0, 0, 0, 0.16);\n          box-shadow:0px 0px 4px 2px rgba(0, 0, 0, 0.16);\n}\n.marker-transparent{\n  opacity:0.4;\n}\n.marker-fade{\n  -webkit-filter:contrast(16%) brightness(160%) blur(0.6px);\n          filter:contrast(16%) brightness(160%) blur(0.6px);\n}\n.tooltip-warning{\n  background:#e04745;\n  color:#fff;\n}\n.tooltip-warning-arrow{\n  border-right-color:#e04745 !important;\n}\n.tooltip-info{\n  background:#5496F8;\n  color:#fff;\n}\n.tooltip-info-arrow{\n  border-right-color:#5496F8 !important;\n}\na{\n  color:inherit;\n  text-decoration:none;\n}\na:hover{\n  color:inherit;\n  text-decoration:none;\n}\na:active{\n  color:inherit;\n  text-decoration:none;\n}\na:focus{\n  outline:none;\n  color:inherit;\n  text-decoration:none;\n}\n.spinner-wave{\n  margin:0 auto;\n  width:100px;\n  height:20px;\n  text-align:center;\n}\n.spinner-wave > div{\n  background-color:#5496F8;\n  height:100%;\n  width:6px;\n  display:inline-block;\n  -webkit-animation:wave 1.2s infinite ease-in-out;\n  animation:wave 1.2s infinite ease-in-out;\n}\n.spinner-wave div:nth-child(2){\n  -webkit-animation-delay:-1.1s;\n  animation-delay:-1.1s;\n}\n.spinner-wave div:nth-child(3){\n  -webkit-animation-delay:-1s;\n  animation-delay:-1s;\n}\n.spinner-wave div:nth-child(4){\n  -webkit-animation-delay:-0.9s;\n  animation-delay:-0.9s;\n}\n.spinner-wave div:nth-child(5){\n  -webkit-animation-delay:-0.8s;\n  animation-delay:-0.8s;\n}\n@-webkit-keyframes wave{\n  0%,\n  40%,\n  100%{\n    -webkit-transform:scaleY(0.4);\n  }\n  20%{\n    -webkit-transform:scaleY(1);\n  }\n}\n@keyframes wave{\n  0%,\n  40%,\n  100%{\n    -webkit-transform:scaleY(0.4);\n            transform:scaleY(0.4);\n  }\n  20%{\n    -webkit-transform:scaleY(1);\n            transform:scaleY(1);\n  }\n}\n@media screen and (max-width: 480px){\n  .hide-xs{\n    display:none !important;\n  }\n}\n@media screen and (min-width: 480px){\n  .show-xs{\n    display:none !important;\n  }\n}\n.ht-btn{\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  -webkit-box-align:center;\n      -ms-flex-align:center;\n          align-items:center;\n  padding:5px 13px;\n  border:0;\n  background:#ffffff;\n  color:#52616A;\n  -webkit-box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12);\n          box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12);\n}\n.ht-btn:focus{\n  background:#fcfcfc;\n  outline:0;\n}\n.ht-btn-card:hover{\n  background:#5496F8;\n  color:rgba(255, 255, 255, 0.96);\n  -webkit-box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12);\n          box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12);\n}\n.stopped-color{\n  color:#FFBB44;\n}\n.drive-color{\n  color:#5496F8;\n}\n.walk-color{\n  color:#5496F8;\n}\n.moving-color{\n  color:#5496F8;\n}\n.logged_off-color{\n  color:#A9BAC4;\n}\n.network_offline-color{\n  color:#d19191;\n}\n.location_disabled-color{\n  color:#d19191;\n}\n.location_low_accuracy-color{\n  color:#d19191;\n}\n.stopped-bg{\n  background:#FFBB44;\n}\n.drive-bg{\n  background:#5496F8;\n}\n.walk-bg{\n  background:#5496F8;\n}\n.moving-bg{\n  background:#5496F8;\n}\n.logged_off-bg{\n  background:#A9BAC4;\n}\n.network_offline-bg{\n  background:#d19191;\n}\n.location_disabled-bg{\n  background-color:#d19191;\n}\n.location_low_accuracy-bg{\n  background-color:#d19191;\n}\n:host{\n  max-width:500px;\n}\nht-loading-dots{\n  width:100%;\n  margin-top:20%;\n}\n"],
            },] },
];
PlacelineContainerComponent.ctorParameters = function () { return [
    { type: HtUsersService, },
]; };
PlacelineContainerComponent.propDecorators = {
    "userId": [{ type: Input },],
    "showUserCard": [{ type: Input },],
};
var PlacelineContainerModule = /** @class */ (function () {
    function PlacelineContainerModule() {
    }
    return PlacelineContainerModule;
}());
PlacelineContainerModule.decorators = [
    { type: NgModule, args: [{
                imports: [
                    CommonModule,
                    PlacelineModule,
                    UserCardModule,
                    SharedModule
                ],
                declarations: [PlacelineContainerComponent],
                exports: [PlacelineContainerComponent]
            },] },
];
PlacelineContainerModule.ctorParameters = function () { return []; };
var PaginationComponent = /** @class */ (function () {
    function PaginationComponent() {
        this.pageSize = 10;
        this.fetchPage = new EventEmitter();
    }
    PaginationComponent.prototype.ngOnInit = function () {
    };
    Object.defineProperty(PaginationComponent.prototype, "currentPage", {
        get: function () {
            var preUrl = this.pageDate.previous;
            var page = 1;
            if (preUrl) {
                var prevPage = GetUrlParam('page', this.pageDate.previous) || 1;
                page = +prevPage + 1;
            }
            return page;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PaginationComponent.prototype, "pagesCount", {
        get: function () {
            var count = this.pageDate.count;
            return Math.ceil(count / this.pageSize);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PaginationComponent.prototype, "visiblePages", {
        get: function () {
            var _this = this;
            return Array(this.pagesCount).fill(1).map(function (n, i) { return n + i; }).filter(function (i) {
                if (_this.currentPage === 1) {
                    return (_this.currentPage - i >= -2);
                }
                else if (_this.currentPage + 1 === i) {
                    return true;
                }
                else if (_this.currentPage + 2 === i) {
                    return true;
                }
                else if (_this.currentPage === i) {
                    return true;
                }
                else if (_this.currentPage === _this.pagesCount) {
                    return (_this.currentPage - i <= 2);
                }
                return false;
            });
        },
        enumerable: true,
        configurable: true
    });
    PaginationComponent.prototype.onFetchPage = function (pageNumber) {
        if (pageNumber < 1 || pageNumber > this.pagesCount)
            return;
        this.fetchPage.next(pageNumber);
    };
    return PaginationComponent;
}());
PaginationComponent.decorators = [
    { type: Component, args: [{
                selector: 'ht-pagination',
                template: "<!--<p>-->\n  <!--pagination works!-->\n<!--</p>-->\n<!--<p>Count: {{pageDate.count}}</p>-->\n<!--<p>Page: {{currentPage}}</p>-->\n<!--<p>Pages: {{pagesCount}}</p>-->\n<!--<div class=\"pagination-container columns\" *ngIf=\"pagesCount > 1\">-->\n  <!--<div [class.disabled]=\"!pageDate.previous\" (click)=\"onFetchPage(currentPage - 1)\" class=\"pagination-element\">-->\n    <!--<i class=\"fa fa-angle-left\" aria-hidden=\"true\"></i>-->\n  <!--</div>-->\n  <!--<ng-container *ngIf=\"currentPage - 1 > 1\">-->\n    <!--<div (click)=\"onFetchPage(1)\" class=\"\">-->\n      <!--<span class=\"pagination-number\">1</span>-->\n    <!--</div>-->\n    <!--<span>&hellip;</span>-->\n    <!--&lt;!&ndash;<div>.</div>&ndash;&gt;-->\n    <!--&lt;!&ndash;<div>.</div>&ndash;&gt;-->\n    <!--&lt;!&ndash;<div>.</div>&ndash;&gt;-->\n  <!--</ng-container>-->\n  <!--<div (click)=\"onFetchPage(page)\" class=\"\" *ngFor=\"let page of visiblePages\" [ngClass]=\"currentPage === page ? 'is-current' : ''\">-->\n    <!--<span class=\"pagination-number\">{{page}}</span>-->\n  <!--</div>-->\n  <!--<ng-container *ngIf=\"pagesCount - currentPage > 2\">-->\n    <!--<span>&hellip;</span>-->\n    <!--&lt;!&ndash;<div>.</div>&ndash;&gt;-->\n    <!--&lt;!&ndash;<div>.</div>&ndash;&gt;-->\n    <!--&lt;!&ndash;<div>.</div>&ndash;&gt;-->\n    <!--<div (click)=\"onFetchPage(pagesCount)\" class=\"\">-->\n      <!--<span class=\"pagination-number\">{{pagesCount}}</span>-->\n    <!--</div>-->\n  <!--</ng-container>-->\n  <!--&lt;!&ndash;<div [class.disabled]=\"currentPage == pagesCount\" (click)=\"onFetchPage(pagesCount)\" class=\"pagination-element\">&ndash;&gt;-->\n  <!--&lt;!&ndash;<i class=\"fa fa-angle-double-right\" aria-hidden=\"true\"></i>&ndash;&gt;-->\n  <!--&lt;!&ndash;</div>&ndash;&gt;-->\n  <!--<div [attr.disabled]=\"!pageDate.next\" (click)=\"onFetchPage(currentPage + 1)\" class=\"\">-->\n    <!--<i class=\"fa fa-angle-right\" aria-hidden=\"true\"></i>-->\n  <!--</div>-->\n<!--</div>-->\n<nav class=\"pagination is-small is-centered\" role=\"navigation\" aria-label=\"pagination\" *ngIf=\"pagesCount > 1\">\n  <ul class=\"pagination-list\">\n    <li>\n      <a class=\"pagination-link\" [attr.disabled]=\"!pageDate.previous ? true : null\"  (click)=\"onFetchPage(currentPage - 1)\" aria-label=\"Goto page 1\">\n        <i class=\"fa fa-angle-left\" aria-hidden=\"true\"></i>\n      </a>\n    </li>\n    <ng-container *ngIf=\"currentPage - 1 > 1\">\n      <li (click)=\"onFetchPage(1)\" class=\"\">\n        <a class=\"pagination-link\">1</a>\n      </li>\n      <li>\n        <span class=\"pagination-ellipsis\">&hellip;</span>\n      </li>\n    </ng-container>\n    <li (click)=\"onFetchPage(page)\" class=\"\" *ngFor=\"let page of visiblePages\">\n      <a class=\"pagination-link\" [ngClass]=\"currentPage === page ? 'is-current' : ''\">{{page}}</a>\n    </li>\n    <ng-container *ngIf=\"pagesCount - currentPage > 2\">\n      <li>\n        <span class=\"pagination-ellipsis\">&hellip;</span>\n      </li>\n      <li (click)=\"onFetchPage(pagesCount)\" class=\"\">\n        <a class=\"pagination-link\">{{pagesCount}}</a>\n      </li>\n    </ng-container>\n    <li [attr.disabled]=\"!pageDate.next ? true : null\" (click)=\"onFetchPage(currentPage + 1)\" class=\"\">\n      <a class=\"pagination-link\">\n        <i class=\"fa fa-angle-right\" aria-hidden=\"true\"></i>\n      </a>\n    </li>\n    <!--<li>-->\n      <!--<span class=\"pagination-ellipsis\">&hellip;</span>-->\n    <!--</li>-->\n    <!--<li>-->\n      <!--<a class=\"pagination-link\" aria-label=\"Goto page 45\">45</a>-->\n    <!--</li>-->\n    <!--<li>-->\n      <!--<a class=\"pagination-link is-current\" aria-label=\"Page 46\" aria-current=\"page\">46</a>-->\n    <!--</li>-->\n    <!--<li>-->\n      <!--<a class=\"pagination-link\" aria-label=\"Goto page 47\">47</a>-->\n    <!--</li>-->\n    <!--<li>-->\n      <!--<span class=\"pagination-ellipsis\">&hellip;</span>-->\n    <!--</li>-->\n    <!--<li>-->\n      <!--<a class=\"pagination-link\" aria-label=\"Goto page 86\">86</a>-->\n    <!--</li>-->\n  </ul>\n</nav>\n",
                styles: [".text-center{\n  text-align:center;\n}\n.text-muted{\n  color:#798E9B;\n}\n.text-right{\n  text-align:right;\n}\n.text-left{\n  text-align:left;\n}\n.text-1{\n  font-size:2em;\n}\n.text-4{\n  font-size:0.8em;\n}\n.text-capitalize{\n  text-transform:capitalize;\n}\n.text-uppercase{\n  text-transform:uppercase;\n}\n.text-ontime{\n  color:#58ae5b;\n}\n.text-late{\n  color:#E6413E;\n}\n.text-warning{\n  color:#E6413E !important;\n}\n.text-red{\n  color:#E6413E;\n}\n.text-blue{\n  color:#5496F8;\n}\n.truncate{\n  white-space:nowrap;\n  overflow:hidden;\n  text-overflow:ellipsis;\n}\n.flex-row{\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  -webkit-box-orient:horizontal;\n  -webkit-box-direction:normal;\n      -ms-flex-direction:row;\n          flex-direction:row;\n}\n.flex-column{\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  -webkit-box-orient:vertical;\n  -webkit-box-direction:normal;\n      -ms-flex-direction:column;\n          flex-direction:column;\n}\n.column-gap-4 > :not(:last-child){\n  margin-bottom:4px;\n}\n.row-gap-4 > :not(:last-child){\n  margin-right:4px;\n}\n.column-gap-7 > :not(:last-child){\n  margin-bottom:7px;\n}\n.row-gap-7 > :not(:last-child){\n  margin-right:7px;\n}\n.column-gap-10 > :not(:last-child){\n  margin-bottom:10px;\n}\n.row-gap-10 > :not(:last-child){\n  margin-right:10px;\n}\n.column-gap-20 > :not(:last-child){\n  margin-bottom:20px;\n}\n.row-gap-20 > :not(:last-child){\n  margin-right:20px;\n}\n.wrap{\n  -ms-flex-wrap:wrap;\n      flex-wrap:wrap;\n}\n.flex{\n  -webkit-box-flex:1;\n      -ms-flex:1;\n          flex:1;\n}\n.auto{\n  margin:auto;\n}\n.relative{\n  position:relative;\n}\n.space-between{\n  -webkit-box-pack:justify;\n      -ms-flex-pack:justify;\n          justify-content:space-between;\n}\n.space-around{\n  -ms-flex-pack:distribute;\n      justify-content:space-around;\n}\n.justify-center{\n  -webkit-box-pack:center;\n      -ms-flex-pack:center;\n          justify-content:center;\n}\n.flex-center{\n  -webkit-box-align:center;\n      -ms-flex-align:center;\n          align-items:center;\n}\n.align-center{\n  -webkit-box-align:center;\n      -ms-flex-align:center;\n          align-items:center;\n}\n.clickable{\n  cursor:pointer;\n}\n.round-icon{\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  width:23px;\n  height:23px;\n  background:#315790;\n  border-radius:50%;\n}\n.flex-half{\n  -ms-flex-preferred-size:50%;\n      flex-basis:50%;\n}\n.link-unstyled{\n  color:inherit;\n}\n.link-unstyled:hover{\n  text-decoration:none;\n}\n.half{\n  width:50%;\n}\n.noselect{\n  -webkit-touch-callout:none;\n  -webkit-user-select:none;\n  -moz-user-select:none;\n  -ms-user-select:none;\n  user-select:none;\n}\n.hover-shadow:hover{\n  -webkit-box-shadow:0px 0px 4px 2px rgba(0, 0, 0, 0.16);\n          box-shadow:0px 0px 4px 2px rgba(0, 0, 0, 0.16);\n}\n.marker-transparent{\n  opacity:0.4;\n}\n.marker-fade{\n  -webkit-filter:contrast(16%) brightness(160%) blur(0.6px);\n          filter:contrast(16%) brightness(160%) blur(0.6px);\n}\n.tooltip-warning{\n  background:#e04745;\n  color:#fff;\n}\n.tooltip-warning-arrow{\n  border-right-color:#e04745 !important;\n}\n.tooltip-info{\n  background:#5496F8;\n  color:#fff;\n}\n.tooltip-info-arrow{\n  border-right-color:#5496F8 !important;\n}\na{\n  color:inherit;\n  text-decoration:none;\n}\na:hover{\n  color:inherit;\n  text-decoration:none;\n}\na:active{\n  color:inherit;\n  text-decoration:none;\n}\na:focus{\n  outline:none;\n  color:inherit;\n  text-decoration:none;\n}\n.spinner-wave{\n  margin:0 auto;\n  width:100px;\n  height:20px;\n  text-align:center;\n}\n.spinner-wave > div{\n  background-color:#5496F8;\n  height:100%;\n  width:6px;\n  display:inline-block;\n  -webkit-animation:wave 1.2s infinite ease-in-out;\n  animation:wave 1.2s infinite ease-in-out;\n}\n.spinner-wave div:nth-child(2){\n  -webkit-animation-delay:-1.1s;\n  animation-delay:-1.1s;\n}\n.spinner-wave div:nth-child(3){\n  -webkit-animation-delay:-1s;\n  animation-delay:-1s;\n}\n.spinner-wave div:nth-child(4){\n  -webkit-animation-delay:-0.9s;\n  animation-delay:-0.9s;\n}\n.spinner-wave div:nth-child(5){\n  -webkit-animation-delay:-0.8s;\n  animation-delay:-0.8s;\n}\n@-webkit-keyframes wave{\n  0%,\n  40%,\n  100%{\n    -webkit-transform:scaleY(0.4);\n  }\n  20%{\n    -webkit-transform:scaleY(1);\n  }\n}\n@keyframes wave{\n  0%,\n  40%,\n  100%{\n    -webkit-transform:scaleY(0.4);\n            transform:scaleY(0.4);\n  }\n  20%{\n    -webkit-transform:scaleY(1);\n            transform:scaleY(1);\n  }\n}\n@media screen and (max-width: 480px){\n  .hide-xs{\n    display:none !important;\n  }\n}\n@media screen and (min-width: 480px){\n  .show-xs{\n    display:none !important;\n  }\n}\n.ht-btn{\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  -webkit-box-align:center;\n      -ms-flex-align:center;\n          align-items:center;\n  padding:5px 13px;\n  border:0;\n  background:#ffffff;\n  color:#52616A;\n  -webkit-box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12);\n          box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12);\n}\n.ht-btn:focus{\n  background:#fcfcfc;\n  outline:0;\n}\n.ht-btn-card:hover{\n  background:#5496F8;\n  color:rgba(255, 255, 255, 0.96);\n  -webkit-box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12);\n          box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12);\n}\n.stopped-color{\n  color:#FFBB44;\n}\n.drive-color{\n  color:#5496F8;\n}\n.walk-color{\n  color:#5496F8;\n}\n.moving-color{\n  color:#5496F8;\n}\n.logged_off-color{\n  color:#A9BAC4;\n}\n.network_offline-color{\n  color:#d19191;\n}\n.location_disabled-color{\n  color:#d19191;\n}\n.location_low_accuracy-color{\n  color:#d19191;\n}\n.stopped-bg{\n  background:#FFBB44;\n}\n.drive-bg{\n  background:#5496F8;\n}\n.walk-bg{\n  background:#5496F8;\n}\n.moving-bg{\n  background:#5496F8;\n}\n.logged_off-bg{\n  background:#A9BAC4;\n}\n.network_offline-bg{\n  background:#d19191;\n}\n.location_disabled-bg{\n  background-color:#d19191;\n}\n.location_low_accuracy-bg{\n  background-color:#d19191;\n}\n.pagination{\n  padding:20px 0;\n  width:100%;\n}\n.pagination-container{\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  padding:30px 10px;\n}\n.pagination-container > :not(:last-child){\n  margin-right:7px;\n}\n.pagination-element{\n  border:1px solid #D9D9D9;\n  width:28px;\n  height:28px;\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  -webkit-box-pack:center;\n      -ms-flex-pack:center;\n          justify-content:center;\n  -webkit-box-align:center;\n      -ms-flex-align:center;\n          align-items:center;\n  background:white;\n  border-radius:3px;\n  cursor:pointer;\n  color:#666666;\n}\n.pagination-element.disabled{\n  cursor:not-allowed;\n  pointer-events:none;\n}\n.pagination-element.disabled i{\n  color:#CCCCCC;\n}\n.pagination-element i{\n  color:#666666;\n}\n.pagination-element .pagination-number{\n  font-size:12px;\n  color:#666666;\n  line-height:18px;\n}\n.pagination-element.selected{\n  background:#108EE9;\n}\n.pagination-element.selected .pagination-number{\n  color:#ffffff;\n}\n.disabled{\n  cursor:not-allowed;\n  pointer-events:none;\n  color:#CCCCCC;\n}\n.fa{\n  font-size:1.3em;\n}\n"],
                changeDetection: ChangeDetectionStrategy.OnPush
            },] },
];
PaginationComponent.ctorParameters = function () { return []; };
PaginationComponent.propDecorators = {
    "pageDate": [{ type: Input },],
    "pageSize": [{ type: Input },],
    "fetchPage": [{ type: Output },],
};
var PaginationModule = /** @class */ (function () {
    function PaginationModule() {
    }
    return PaginationModule;
}());
PaginationModule.decorators = [
    { type: NgModule, args: [{
                imports: [
                    CommonModule
                ],
                declarations: [PaginationComponent],
                exports: [PaginationComponent]
            },] },
];
PaginationModule.ctorParameters = function () { return []; };
var UsersContainerModule = /** @class */ (function () {
    function UsersContainerModule() {
    }
    return UsersContainerModule;
}());
UsersContainerModule.decorators = [
    { type: NgModule, args: [{
                imports: [
                    CommonModule,
                    UsersModule,
                    PlacelineModule,
                    PlacelineContainerModule,
                    SharedModule,
                    UsersSummaryContainerModule,
                    PaginationModule
                ],
                declarations: [UsersContainerComponent],
                exports: [UsersContainerComponent]
            },] },
];
UsersContainerModule.ctorParameters = function () { return []; };
var UsersMapContainerComponent = /** @class */ (function () {
    function UsersMapContainerComponent(userClientService) {
        this.userClientService = userClientService;
        this.hasPlaceline = true;
        this.apiType = ApiType.analytics;
        this.showFilter = true;
        this.showSidebar = true;
        this.showAll = false;
    }
    UsersMapContainerComponent.prototype.ngOnInit = function () {
        this.userClientService.listAll.setActive();
    };
    return UsersMapContainerComponent;
}());
UsersMapContainerComponent.decorators = [
    { type: Component, args: [{
                selector: 'ht-users-map-container',
                template: "<div class=\"ht-container\">\n  <ht-users-filter *ngIf=\"showFilter\"></ht-users-filter>\n  <div class=\"flex-row flex\">\n    <div class=\"bar\" *ngIf=\"showSidebar\" [style.width.px]=\"sidebarWidth || 400\">\n      <ht-users-container\n        [apiType]=\"apiType\"\n        [hasPlaceline]=\"hasPlaceline\"\n        [showAll]=\"showAll\"\n        [hasMap]=\"true\"></ht-users-container>\n    </div>\n    <div class=\"flex\">\n      <ht-map-container [showLoading]=\"false\"></ht-map-container>\n    </div>\n  </div>\n</div>\n",
                styles: [".text-center{\n  text-align:center;\n}\n.text-muted{\n  color:#798E9B;\n}\n.text-right{\n  text-align:right;\n}\n.text-left{\n  text-align:left;\n}\n.text-1{\n  font-size:2em;\n}\n.text-4{\n  font-size:0.8em;\n}\n.text-capitalize{\n  text-transform:capitalize;\n}\n.text-uppercase{\n  text-transform:uppercase;\n}\n.text-ontime{\n  color:#58ae5b;\n}\n.text-late{\n  color:#E6413E;\n}\n.text-warning{\n  color:#E6413E !important;\n}\n.text-red{\n  color:#E6413E;\n}\n.text-blue{\n  color:#5496F8;\n}\n.truncate{\n  white-space:nowrap;\n  overflow:hidden;\n  text-overflow:ellipsis;\n}\n.flex-row{\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  -webkit-box-orient:horizontal;\n  -webkit-box-direction:normal;\n      -ms-flex-direction:row;\n          flex-direction:row;\n}\n.flex-column{\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  -webkit-box-orient:vertical;\n  -webkit-box-direction:normal;\n      -ms-flex-direction:column;\n          flex-direction:column;\n}\n.column-gap-4 > :not(:last-child){\n  margin-bottom:4px;\n}\n.row-gap-4 > :not(:last-child){\n  margin-right:4px;\n}\n.column-gap-7 > :not(:last-child){\n  margin-bottom:7px;\n}\n.row-gap-7 > :not(:last-child){\n  margin-right:7px;\n}\n.column-gap-10 > :not(:last-child){\n  margin-bottom:10px;\n}\n.row-gap-10 > :not(:last-child){\n  margin-right:10px;\n}\n.column-gap-20 > :not(:last-child){\n  margin-bottom:20px;\n}\n.row-gap-20 > :not(:last-child){\n  margin-right:20px;\n}\n.wrap{\n  -ms-flex-wrap:wrap;\n      flex-wrap:wrap;\n}\n.flex{\n  -webkit-box-flex:1;\n      -ms-flex:1;\n          flex:1;\n}\n.auto{\n  margin:auto;\n}\n.relative{\n  position:relative;\n}\n.space-between{\n  -webkit-box-pack:justify;\n      -ms-flex-pack:justify;\n          justify-content:space-between;\n}\n.space-around{\n  -ms-flex-pack:distribute;\n      justify-content:space-around;\n}\n.justify-center{\n  -webkit-box-pack:center;\n      -ms-flex-pack:center;\n          justify-content:center;\n}\n.flex-center{\n  -webkit-box-align:center;\n      -ms-flex-align:center;\n          align-items:center;\n}\n.align-center{\n  -webkit-box-align:center;\n      -ms-flex-align:center;\n          align-items:center;\n}\n.clickable{\n  cursor:pointer;\n}\n.round-icon{\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  width:23px;\n  height:23px;\n  background:#315790;\n  border-radius:50%;\n}\n.flex-half{\n  -ms-flex-preferred-size:50%;\n      flex-basis:50%;\n}\n.link-unstyled{\n  color:inherit;\n}\n.link-unstyled:hover{\n  text-decoration:none;\n}\n.half{\n  width:50%;\n}\n.noselect{\n  -webkit-touch-callout:none;\n  -webkit-user-select:none;\n  -moz-user-select:none;\n  -ms-user-select:none;\n  user-select:none;\n}\n.hover-shadow:hover{\n  -webkit-box-shadow:0px 0px 4px 2px rgba(0, 0, 0, 0.16);\n          box-shadow:0px 0px 4px 2px rgba(0, 0, 0, 0.16);\n}\n.marker-transparent{\n  opacity:0.4;\n}\n.marker-fade{\n  -webkit-filter:contrast(16%) brightness(160%) blur(0.6px);\n          filter:contrast(16%) brightness(160%) blur(0.6px);\n}\n.tooltip-warning{\n  background:#e04745;\n  color:#fff;\n}\n.tooltip-warning-arrow{\n  border-right-color:#e04745 !important;\n}\n.tooltip-info{\n  background:#5496F8;\n  color:#fff;\n}\n.tooltip-info-arrow{\n  border-right-color:#5496F8 !important;\n}\na{\n  color:inherit;\n  text-decoration:none;\n}\na:hover{\n  color:inherit;\n  text-decoration:none;\n}\na:active{\n  color:inherit;\n  text-decoration:none;\n}\na:focus{\n  outline:none;\n  color:inherit;\n  text-decoration:none;\n}\n.spinner-wave{\n  margin:0 auto;\n  width:100px;\n  height:20px;\n  text-align:center;\n}\n.spinner-wave > div{\n  background-color:#5496F8;\n  height:100%;\n  width:6px;\n  display:inline-block;\n  -webkit-animation:wave 1.2s infinite ease-in-out;\n  animation:wave 1.2s infinite ease-in-out;\n}\n.spinner-wave div:nth-child(2){\n  -webkit-animation-delay:-1.1s;\n  animation-delay:-1.1s;\n}\n.spinner-wave div:nth-child(3){\n  -webkit-animation-delay:-1s;\n  animation-delay:-1s;\n}\n.spinner-wave div:nth-child(4){\n  -webkit-animation-delay:-0.9s;\n  animation-delay:-0.9s;\n}\n.spinner-wave div:nth-child(5){\n  -webkit-animation-delay:-0.8s;\n  animation-delay:-0.8s;\n}\n@-webkit-keyframes wave{\n  0%,\n  40%,\n  100%{\n    -webkit-transform:scaleY(0.4);\n  }\n  20%{\n    -webkit-transform:scaleY(1);\n  }\n}\n@keyframes wave{\n  0%,\n  40%,\n  100%{\n    -webkit-transform:scaleY(0.4);\n            transform:scaleY(0.4);\n  }\n  20%{\n    -webkit-transform:scaleY(1);\n            transform:scaleY(1);\n  }\n}\n@media screen and (max-width: 480px){\n  .hide-xs{\n    display:none !important;\n  }\n}\n@media screen and (min-width: 480px){\n  .show-xs{\n    display:none !important;\n  }\n}\n.ht-btn{\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  -webkit-box-align:center;\n      -ms-flex-align:center;\n          align-items:center;\n  padding:5px 13px;\n  border:0;\n  background:#ffffff;\n  color:#52616A;\n  -webkit-box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12);\n          box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12);\n}\n.ht-btn:focus{\n  background:#fcfcfc;\n  outline:0;\n}\n.ht-btn-card:hover{\n  background:#5496F8;\n  color:rgba(255, 255, 255, 0.96);\n  -webkit-box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12);\n          box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12);\n}\n.stopped-color{\n  color:#FFBB44;\n}\n.drive-color{\n  color:#5496F8;\n}\n.walk-color{\n  color:#5496F8;\n}\n.moving-color{\n  color:#5496F8;\n}\n.logged_off-color{\n  color:#A9BAC4;\n}\n.network_offline-color{\n  color:#d19191;\n}\n.location_disabled-color{\n  color:#d19191;\n}\n.location_low_accuracy-color{\n  color:#d19191;\n}\n.stopped-bg{\n  background:#FFBB44;\n}\n.drive-bg{\n  background:#5496F8;\n}\n.walk-bg{\n  background:#5496F8;\n}\n.moving-bg{\n  background:#5496F8;\n}\n.logged_off-bg{\n  background:#A9BAC4;\n}\n.network_offline-bg{\n  background:#d19191;\n}\n.location_disabled-bg{\n  background-color:#d19191;\n}\n.location_low_accuracy-bg{\n  background-color:#d19191;\n}\n.ht-container{\n  width:100%;\n  height:100%;\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  -webkit-box-orient:vertical;\n  -webkit-box-direction:normal;\n      -ms-flex-direction:column;\n          flex-direction:column;\n  min-height:100%;\n}\n.ht-container .bar{\n  width:100px;\n  max-width:400px;\n  min-height:100%;\n  height:100%;\n  overflow:auto;\n  background:#fbfbfb;\n}\n"]
            },] },
];
UsersMapContainerComponent.ctorParameters = function () { return [
    { type: HtUsersService, },
]; };
UsersMapContainerComponent.propDecorators = {
    "hasPlaceline": [{ type: Input },],
    "sidebarWidth": [{ type: Input },],
    "apiType": [{ type: Input },],
    "showFilter": [{ type: Input },],
    "showSidebar": [{ type: Input },],
    "showAll": [{ type: Input },],
};
var MapContainerComponent = /** @class */ (function () {
    function MapContainerComponent(userClientService, mapService) {
        this.userClientService = userClientService;
        this.mapService = mapService;
        this.showLoading = true;
        this.subs = [];
    }
    MapContainerComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.mapService.usersCluster.setPageData$(this.userClientService.listAll.data$, {
            hide$: this.userClientService.placeline.id$
        });
        this.mapService.placeline.setCompoundData$(this.userClientService.placeline.data$, {
            roots: ['segments', 'actions'],
            highlighted$: this.userClientService.placeline.segmentSelectedId$,
            filter$: this.userClientService.placeline.segmentResetId$,
            resetMap$: this.userClientService.placeline.segmentResetId$
        });
        var loading$1 = this.userClientService.placeline.loading$
            .pipe(map$1(function (data) { return !!data && _this.showLoading; }), distinctUntilChanged());
        var loading$2 = this.userClientService.listAll.loading$
            .pipe(map$1(function (data) { return !!data; }), distinctUntilChanged());
        this.loading$ = merge(loading$1, loading$2);
    };
    MapContainerComponent.prototype.ngAfterContentInit = function () {
    };
    MapContainerComponent.prototype.ngOnDestroy = function () {
        this.userClientService.listAll.clearData();
        this.mapService.usersCluster.trace([]);
    };
    return MapContainerComponent;
}());
MapContainerComponent.decorators = [
    { type: Component, args: [{
                selector: 'ht-map-container',
                template: "<ht-map [loading]=\"loading$ | async\"></ht-map>\n<!--<div class=\"map-label map-label-bottom\">-->\n  <!--<ht-loading-dots *ngIf=\"loading$ | async\" class=\"text-1\"></ht-loading-dots>-->\n<!--</div>-->\n<!--<div class=\"map-label map-label-top\">-->\n  <!--<button class=\"button is-primary\" (click)=\"resetMap()\">Fit in view</button>-->\n<!--</div>-->\n",
                styles: [".text-center{\n  text-align:center;\n}\n.text-muted{\n  color:#798E9B;\n}\n.text-right{\n  text-align:right;\n}\n.text-left{\n  text-align:left;\n}\n.text-1{\n  font-size:2em;\n}\n.text-4{\n  font-size:0.8em;\n}\n.text-capitalize{\n  text-transform:capitalize;\n}\n.text-uppercase{\n  text-transform:uppercase;\n}\n.text-ontime{\n  color:#58ae5b;\n}\n.text-late{\n  color:#E6413E;\n}\n.text-warning{\n  color:#E6413E !important;\n}\n.text-red{\n  color:#E6413E;\n}\n.text-blue{\n  color:#5496F8;\n}\n.truncate{\n  white-space:nowrap;\n  overflow:hidden;\n  text-overflow:ellipsis;\n}\n.flex-row{\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  -webkit-box-orient:horizontal;\n  -webkit-box-direction:normal;\n      -ms-flex-direction:row;\n          flex-direction:row;\n}\n.flex-column{\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  -webkit-box-orient:vertical;\n  -webkit-box-direction:normal;\n      -ms-flex-direction:column;\n          flex-direction:column;\n}\n.column-gap-4 > :not(:last-child){\n  margin-bottom:4px;\n}\n.row-gap-4 > :not(:last-child){\n  margin-right:4px;\n}\n.column-gap-7 > :not(:last-child){\n  margin-bottom:7px;\n}\n.row-gap-7 > :not(:last-child){\n  margin-right:7px;\n}\n.column-gap-10 > :not(:last-child){\n  margin-bottom:10px;\n}\n.row-gap-10 > :not(:last-child){\n  margin-right:10px;\n}\n.column-gap-20 > :not(:last-child){\n  margin-bottom:20px;\n}\n.row-gap-20 > :not(:last-child){\n  margin-right:20px;\n}\n.wrap{\n  -ms-flex-wrap:wrap;\n      flex-wrap:wrap;\n}\n.flex{\n  -webkit-box-flex:1;\n      -ms-flex:1;\n          flex:1;\n}\n.auto{\n  margin:auto;\n}\n.relative{\n  position:relative;\n}\n.space-between{\n  -webkit-box-pack:justify;\n      -ms-flex-pack:justify;\n          justify-content:space-between;\n}\n.space-around{\n  -ms-flex-pack:distribute;\n      justify-content:space-around;\n}\n.justify-center{\n  -webkit-box-pack:center;\n      -ms-flex-pack:center;\n          justify-content:center;\n}\n.flex-center{\n  -webkit-box-align:center;\n      -ms-flex-align:center;\n          align-items:center;\n}\n.align-center{\n  -webkit-box-align:center;\n      -ms-flex-align:center;\n          align-items:center;\n}\n.clickable{\n  cursor:pointer;\n}\n.round-icon{\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  width:23px;\n  height:23px;\n  background:#315790;\n  border-radius:50%;\n}\n.flex-half{\n  -ms-flex-preferred-size:50%;\n      flex-basis:50%;\n}\n.link-unstyled{\n  color:inherit;\n}\n.link-unstyled:hover{\n  text-decoration:none;\n}\n.half{\n  width:50%;\n}\n.noselect{\n  -webkit-touch-callout:none;\n  -webkit-user-select:none;\n  -moz-user-select:none;\n  -ms-user-select:none;\n  user-select:none;\n}\n.hover-shadow:hover{\n  -webkit-box-shadow:0px 0px 4px 2px rgba(0, 0, 0, 0.16);\n          box-shadow:0px 0px 4px 2px rgba(0, 0, 0, 0.16);\n}\n.marker-transparent{\n  opacity:0.4;\n}\n.marker-fade{\n  -webkit-filter:contrast(16%) brightness(160%) blur(0.6px);\n          filter:contrast(16%) brightness(160%) blur(0.6px);\n}\n.tooltip-warning{\n  background:#e04745;\n  color:#fff;\n}\n.tooltip-warning-arrow{\n  border-right-color:#e04745 !important;\n}\n.tooltip-info{\n  background:#5496F8;\n  color:#fff;\n}\n.tooltip-info-arrow{\n  border-right-color:#5496F8 !important;\n}\na{\n  color:inherit;\n  text-decoration:none;\n}\na:hover{\n  color:inherit;\n  text-decoration:none;\n}\na:active{\n  color:inherit;\n  text-decoration:none;\n}\na:focus{\n  outline:none;\n  color:inherit;\n  text-decoration:none;\n}\n.spinner-wave{\n  margin:0 auto;\n  width:100px;\n  height:20px;\n  text-align:center;\n}\n.spinner-wave > div{\n  background-color:#5496F8;\n  height:100%;\n  width:6px;\n  display:inline-block;\n  -webkit-animation:wave 1.2s infinite ease-in-out;\n  animation:wave 1.2s infinite ease-in-out;\n}\n.spinner-wave div:nth-child(2){\n  -webkit-animation-delay:-1.1s;\n  animation-delay:-1.1s;\n}\n.spinner-wave div:nth-child(3){\n  -webkit-animation-delay:-1s;\n  animation-delay:-1s;\n}\n.spinner-wave div:nth-child(4){\n  -webkit-animation-delay:-0.9s;\n  animation-delay:-0.9s;\n}\n.spinner-wave div:nth-child(5){\n  -webkit-animation-delay:-0.8s;\n  animation-delay:-0.8s;\n}\n@-webkit-keyframes wave{\n  0%,\n  40%,\n  100%{\n    -webkit-transform:scaleY(0.4);\n  }\n  20%{\n    -webkit-transform:scaleY(1);\n  }\n}\n@keyframes wave{\n  0%,\n  40%,\n  100%{\n    -webkit-transform:scaleY(0.4);\n            transform:scaleY(0.4);\n  }\n  20%{\n    -webkit-transform:scaleY(1);\n            transform:scaleY(1);\n  }\n}\n@media screen and (max-width: 480px){\n  .hide-xs{\n    display:none !important;\n  }\n}\n@media screen and (min-width: 480px){\n  .show-xs{\n    display:none !important;\n  }\n}\n.ht-btn{\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  -webkit-box-align:center;\n      -ms-flex-align:center;\n          align-items:center;\n  padding:5px 13px;\n  border:0;\n  background:#ffffff;\n  color:#52616A;\n  -webkit-box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12);\n          box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12);\n}\n.ht-btn:focus{\n  background:#fcfcfc;\n  outline:0;\n}\n.ht-btn-card:hover{\n  background:#5496F8;\n  color:rgba(255, 255, 255, 0.96);\n  -webkit-box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12);\n          box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12);\n}\n.stopped-color{\n  color:#FFBB44;\n}\n.drive-color{\n  color:#5496F8;\n}\n.walk-color{\n  color:#5496F8;\n}\n.moving-color{\n  color:#5496F8;\n}\n.logged_off-color{\n  color:#A9BAC4;\n}\n.network_offline-color{\n  color:#d19191;\n}\n.location_disabled-color{\n  color:#d19191;\n}\n.location_low_accuracy-color{\n  color:#d19191;\n}\n.stopped-bg{\n  background:#FFBB44;\n}\n.drive-bg{\n  background:#5496F8;\n}\n.walk-bg{\n  background:#5496F8;\n}\n.moving-bg{\n  background:#5496F8;\n}\n.logged_off-bg{\n  background:#A9BAC4;\n}\n.network_offline-bg{\n  background:#d19191;\n}\n.location_disabled-bg{\n  background-color:#d19191;\n}\n.location_low_accuracy-bg{\n  background-color:#d19191;\n}\n:host{\n  height:100%;\n  width:100%;\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  position:relative;\n}\n.map-label{\n  position:absolute;\n  z-index:400;\n  text-align:center;\n}\n.map-label-bottom{\n  bottom:20px;\n  right:0;\n  left:0;\n  width:100%;\n}\n.map-label-top{\n  top:10px;\n  right:20px;\n}\n"]
            },] },
];
MapContainerComponent.ctorParameters = function () { return [
    { type: HtUsersService, },
    { type: HtMapService, },
]; };
MapContainerComponent.propDecorators = {
    "showLoading": [{ type: Input },],
};
var MapComponent = /** @class */ (function () {
    function MapComponent(elRef, htMapService) {
        this.elRef = elRef;
        this.loading = false;
        this.showReset = true;
        this.onReady = new EventEmitter();
        this.onMapReset = new EventEmitter();
        if (htMapService)
            this.mapInstance = htMapService.mapInstance;
    }
    MapComponent.prototype.onMapResize = function () {
        this.mapInstance.inValidateSize();
    };
    MapComponent.prototype.ngOnInit = function () {
        this.mapInstance = this.mapInstance;
    };
    MapComponent.prototype.resetMap = function () {
        this.mapInstance.resetBounds(this.setBoundsOptions);
        this.onMapReset.next(true);
    };
    MapComponent.prototype.ngAfterViewInit = function () {
        var el = this.mapElem.nativeElement;
        this.mapInstance.renderMap(el, this.options);
        this.onReady.next(this.mapInstance.map);
        if (this.reset)
            this.resetCta.createEmbeddedView(this.reset);
    };
    return MapComponent;
}());
MapComponent.decorators = [
    { type: Component, args: [{
                selector: 'ht-map',
                template: "<div #map style=\"width: 100%; height: 100%;\"></div>\n<div class=\"map-label map-label-bottom\">\n  <ht-loading-dots *ngIf=\"loading\" class=\"text-1\"></ht-loading-dots>\n</div>\n<div class=\"map-label map-label-top\">\n  <div (click)=\"resetMap()\" [hidden]=\"!showReset\">\n    <div #resetCta></div>\n    <button *ngIf=\"!reset && showReset\" class=\"button is-primary\">Fit in view</button>\n  </div>\n</div>\n",
                styles: [".text-center{\n  text-align:center;\n}\n.text-muted{\n  color:#798E9B;\n}\n.text-right{\n  text-align:right;\n}\n.text-left{\n  text-align:left;\n}\n.text-1{\n  font-size:2em;\n}\n.text-4{\n  font-size:0.8em;\n}\n.text-capitalize{\n  text-transform:capitalize;\n}\n.text-uppercase{\n  text-transform:uppercase;\n}\n.text-ontime{\n  color:#58ae5b;\n}\n.text-late{\n  color:#E6413E;\n}\n.text-warning{\n  color:#E6413E !important;\n}\n.text-red{\n  color:#E6413E;\n}\n.text-blue{\n  color:#5496F8;\n}\n.truncate{\n  white-space:nowrap;\n  overflow:hidden;\n  text-overflow:ellipsis;\n}\n.flex-row{\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  -webkit-box-orient:horizontal;\n  -webkit-box-direction:normal;\n      -ms-flex-direction:row;\n          flex-direction:row;\n}\n.flex-column{\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  -webkit-box-orient:vertical;\n  -webkit-box-direction:normal;\n      -ms-flex-direction:column;\n          flex-direction:column;\n}\n.column-gap-4 > :not(:last-child){\n  margin-bottom:4px;\n}\n.row-gap-4 > :not(:last-child){\n  margin-right:4px;\n}\n.column-gap-7 > :not(:last-child){\n  margin-bottom:7px;\n}\n.row-gap-7 > :not(:last-child){\n  margin-right:7px;\n}\n.column-gap-10 > :not(:last-child){\n  margin-bottom:10px;\n}\n.row-gap-10 > :not(:last-child){\n  margin-right:10px;\n}\n.column-gap-20 > :not(:last-child){\n  margin-bottom:20px;\n}\n.row-gap-20 > :not(:last-child){\n  margin-right:20px;\n}\n.wrap{\n  -ms-flex-wrap:wrap;\n      flex-wrap:wrap;\n}\n.flex{\n  -webkit-box-flex:1;\n      -ms-flex:1;\n          flex:1;\n}\n.auto{\n  margin:auto;\n}\n.relative{\n  position:relative;\n}\n.space-between{\n  -webkit-box-pack:justify;\n      -ms-flex-pack:justify;\n          justify-content:space-between;\n}\n.space-around{\n  -ms-flex-pack:distribute;\n      justify-content:space-around;\n}\n.justify-center{\n  -webkit-box-pack:center;\n      -ms-flex-pack:center;\n          justify-content:center;\n}\n.flex-center{\n  -webkit-box-align:center;\n      -ms-flex-align:center;\n          align-items:center;\n}\n.align-center{\n  -webkit-box-align:center;\n      -ms-flex-align:center;\n          align-items:center;\n}\n.clickable{\n  cursor:pointer;\n}\n.round-icon{\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  width:23px;\n  height:23px;\n  background:#315790;\n  border-radius:50%;\n}\n.flex-half{\n  -ms-flex-preferred-size:50%;\n      flex-basis:50%;\n}\n.link-unstyled{\n  color:inherit;\n}\n.link-unstyled:hover{\n  text-decoration:none;\n}\n.half{\n  width:50%;\n}\n.noselect{\n  -webkit-touch-callout:none;\n  -webkit-user-select:none;\n  -moz-user-select:none;\n  -ms-user-select:none;\n  user-select:none;\n}\n.hover-shadow:hover{\n  -webkit-box-shadow:0px 0px 4px 2px rgba(0, 0, 0, 0.16);\n          box-shadow:0px 0px 4px 2px rgba(0, 0, 0, 0.16);\n}\n.marker-transparent{\n  opacity:0.4;\n}\n.marker-fade{\n  -webkit-filter:contrast(16%) brightness(160%) blur(0.6px);\n          filter:contrast(16%) brightness(160%) blur(0.6px);\n}\n.tooltip-warning{\n  background:#e04745;\n  color:#fff;\n}\n.tooltip-warning-arrow{\n  border-right-color:#e04745 !important;\n}\n.tooltip-info{\n  background:#5496F8;\n  color:#fff;\n}\n.tooltip-info-arrow{\n  border-right-color:#5496F8 !important;\n}\na{\n  color:inherit;\n  text-decoration:none;\n}\na:hover{\n  color:inherit;\n  text-decoration:none;\n}\na:active{\n  color:inherit;\n  text-decoration:none;\n}\na:focus{\n  outline:none;\n  color:inherit;\n  text-decoration:none;\n}\n.spinner-wave{\n  margin:0 auto;\n  width:100px;\n  height:20px;\n  text-align:center;\n}\n.spinner-wave > div{\n  background-color:#5496F8;\n  height:100%;\n  width:6px;\n  display:inline-block;\n  -webkit-animation:wave 1.2s infinite ease-in-out;\n  animation:wave 1.2s infinite ease-in-out;\n}\n.spinner-wave div:nth-child(2){\n  -webkit-animation-delay:-1.1s;\n  animation-delay:-1.1s;\n}\n.spinner-wave div:nth-child(3){\n  -webkit-animation-delay:-1s;\n  animation-delay:-1s;\n}\n.spinner-wave div:nth-child(4){\n  -webkit-animation-delay:-0.9s;\n  animation-delay:-0.9s;\n}\n.spinner-wave div:nth-child(5){\n  -webkit-animation-delay:-0.8s;\n  animation-delay:-0.8s;\n}\n@-webkit-keyframes wave{\n  0%,\n  40%,\n  100%{\n    -webkit-transform:scaleY(0.4);\n  }\n  20%{\n    -webkit-transform:scaleY(1);\n  }\n}\n@keyframes wave{\n  0%,\n  40%,\n  100%{\n    -webkit-transform:scaleY(0.4);\n            transform:scaleY(0.4);\n  }\n  20%{\n    -webkit-transform:scaleY(1);\n            transform:scaleY(1);\n  }\n}\n@media screen and (max-width: 480px){\n  .hide-xs{\n    display:none !important;\n  }\n}\n@media screen and (min-width: 480px){\n  .show-xs{\n    display:none !important;\n  }\n}\n.ht-btn{\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  -webkit-box-align:center;\n      -ms-flex-align:center;\n          align-items:center;\n  padding:5px 13px;\n  border:0;\n  background:#ffffff;\n  color:#52616A;\n  -webkit-box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12);\n          box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12);\n}\n.ht-btn:focus{\n  background:#fcfcfc;\n  outline:0;\n}\n.ht-btn-card:hover{\n  background:#5496F8;\n  color:rgba(255, 255, 255, 0.96);\n  -webkit-box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12);\n          box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12);\n}\n.stopped-color{\n  color:#FFBB44;\n}\n.drive-color{\n  color:#5496F8;\n}\n.walk-color{\n  color:#5496F8;\n}\n.moving-color{\n  color:#5496F8;\n}\n.logged_off-color{\n  color:#A9BAC4;\n}\n.network_offline-color{\n  color:#d19191;\n}\n.location_disabled-color{\n  color:#d19191;\n}\n.location_low_accuracy-color{\n  color:#d19191;\n}\n.stopped-bg{\n  background:#FFBB44;\n}\n.drive-bg{\n  background:#5496F8;\n}\n.walk-bg{\n  background:#5496F8;\n}\n.moving-bg{\n  background:#5496F8;\n}\n.logged_off-bg{\n  background:#A9BAC4;\n}\n.network_offline-bg{\n  background:#d19191;\n}\n.location_disabled-bg{\n  background-color:#d19191;\n}\n.location_low_accuracy-bg{\n  background-color:#d19191;\n}\n:host{\n  height:100%;\n  width:100%;\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  position:relative;\n}\n.map-label{\n  position:absolute;\n  z-index:400;\n  text-align:center;\n}\n.map-label-bottom{\n  bottom:20px;\n  right:0;\n  left:0;\n  width:100%;\n}\n.map-label-top{\n  top:10px;\n  right:20px;\n}\n"]
            },] },
];
MapComponent.ctorParameters = function () { return [
    { type: ElementRef, },
    { type: HtMapService, decorators: [{ type: Optional },] },
]; };
MapComponent.propDecorators = {
    "options": [{ type: Input },],
    "setBoundsOptions": [{ type: Input },],
    "mapInstance": [{ type: Input },],
    "loading": [{ type: Input },],
    "showReset": [{ type: Input },],
    "onReady": [{ type: Output },],
    "onMapReset": [{ type: Output },],
    "mapElem": [{ type: ViewChild, args: ['map',] },],
    "resetCta": [{ type: ViewChild, args: ['resetCta', { read: ViewContainerRef },] },],
    "reset": [{ type: ContentChild, args: ['reset',] },],
    "onMapResize": [{ type: HostListener, args: ['resize', ['$event'],] },],
};
var MapModule = /** @class */ (function () {
    function MapModule() {
    }
    return MapModule;
}());
MapModule.decorators = [
    { type: NgModule, args: [{
                imports: [
                    CommonModule,
                    SharedModule
                ],
                declarations: [MapComponent],
                exports: [MapComponent]
            },] },
];
MapModule.ctorParameters = function () { return []; };
var MapContainerModule = /** @class */ (function () {
    function MapContainerModule() {
    }
    return MapContainerModule;
}());
MapContainerModule.decorators = [
    { type: NgModule, args: [{
                imports: [
                    CommonModule,
                    MapModule,
                    SharedModule
                ],
                declarations: [MapContainerComponent],
                exports: [MapContainerComponent]
            },] },
];
MapContainerModule.ctorParameters = function () { return []; };
var UsersFilterComponent = /** @class */ (function () {
    function UsersFilterComponent(usersClientService, cd) {
        this.usersClientService = usersClientService;
        this.cd = cd;
        this.query$ = of(null);
        this.loading$ = of(false);
        this._options = {
            showSearch: true,
            showFilter: true,
            showSorting: true,
            showDatePicker: true,
            showQueries: true
        };
        this.usersClient = this.usersClient || this.usersClientService;
    }
    Object.defineProperty(UsersFilterComponent.prototype, "options", {
        get: function () {
            return this._options;
        },
        set: function (options) {
            this._options = Object.assign({}, options, this._options);
        },
        enumerable: true,
        configurable: true
    });
    UsersFilterComponent.prototype.ngOnInit = function () {
        var _this = this;
        setTimeout(function () {
            _this.query$ = _this.usersClient.queryLabel$;
            _this.loading$ = _this.usersClient.list.loading$
                .pipe(skip(1), map$1(function (data) { return !!data; }), distinctUntilChanged());
            _this.cd.detectChanges();
        });
        this.statusFiltes = this.usersClient.filterClass.statusQueryArray;
        this.sortingLabels = this.usersClient.filterClass.sortingQueryLabel;
        this.ordering$ = this.usersClient.ordering$;
        this.showFilter$ = this.usersClient.list.id$.pipe(map$1(function (id) { return !id ? 'show' : 'hide'; }));
    };
    UsersFilterComponent.prototype.onQuery = function (query$$1) {
        this.usersClient.list.setQueryReset(query$$1);
    };
    UsersFilterComponent.prototype.clearQuery = function (key) {
        this.usersClient.list.clearQueryKey(key);
    };
    UsersFilterComponent.prototype.setStatus = function (key, event) {
        this.onQuery({ status: key });
    };
    UsersFilterComponent.prototype.setOrdering = function (key) {
        this.onQuery({ ordering: key });
    };
    return UsersFilterComponent;
}());
UsersFilterComponent.decorators = [
    { type: Component, args: [{
                selector: 'ht-users-filter',
                template: "<div class=\"filter-container flex-column\" [@filter]=\"showFilter$ | async\">\n  <ht-entity-search (onSearchQuery)=\"onQuery($event)\" *ngIf=\"options.showSearch\"></ht-entity-search>\n  <div class=\"dropdown\" htDropdown *ngIf=\"options.showSorting\">\n    <button type=\"button\" class=\"button dropdown-trigger flex-row row-gap-4\">\n      <span>Sorting</span>\n      <ng-container *ngIf=\"ordering$ | async as ordering\">\n        <span>: {{ordering.string}}</span>\n        <i [ngClass]=\"ordering.sign ? 'fa-arrow-up' : 'fa-arrow-down'\" class=\"fa\"></i>\n      </ng-container>\n      <!--<span *ngIf=\"ordering$ | async as ordering\"></span>-->\n      <!--<i class=\"fa fa-filter\"></i>-->\n    </button>\n    <div class=\"dropdown-menu\" role=\"menu\" aria-labelledby=\"dropdown-keyboard-access\">\n      <div class=\"dropdown-content\">\n        <a class=\"dropdown-item\" (click)=\"setOrdering(sort.value)\" *ngFor=\"let sort of sortingLabels\">{{sort.label}}</a>\n      </div>\n    </div>\n  </div>\n  <div class=\"dropdown is-hoverable\" *ngIf=\"options.showFilter\">\n    <button id=\"dropdown-keyboard-access\" type=\"button\" class=\"button flex-row row-gap-4\">\n      <span>Filters</span> <i class=\"fa fa-filter\"></i>\n    </button>\n    <div class=\"dropdown-menu\" role=\"menu\" aria-labelledby=\"dropdown-keyboard-access\">\n      <div class=\"dropdown-content\">\n        <a class=\"dropdown-item\" (click)=\"setStatus(filter.values.toString(), $event)\" *ngFor=\"let filter of statusFiltes\">{{filter.label}}</a>\n      </div>\n    </div>\n  </div>\n  <div class=\"flex flex-row row-gap-4\" *ngIf=\"query$ && options.showQueries\">\n    <div class=\"\" *ngFor=\"let query of query$ | async as queries\">\n      <div class=\"tags has-addons\">\n        <div class=\"tag is-medium is-primary\">{{query.label}}</div>\n        <a (click)=\"clearQuery(query.value)\" class=\"tag is-medium is-primary is-delete\"></a>\n      </div>\n    </div>\n  </div>\n  <ht-date-range *ngIf=\"options.showDatePicker\" [isRight]=\"true\"></ht-date-range>\n  <div class=\"loading-bar\" *ngIf=\"loading$ | async\">\n    <ht-loading-bar></ht-loading-bar>\n  </div>\n</div>\n",
                styles: [".text-center{\n  text-align:center;\n}\n.text-muted{\n  color:#798E9B;\n}\n.text-right{\n  text-align:right;\n}\n.text-left{\n  text-align:left;\n}\n.text-1{\n  font-size:2em;\n}\n.text-4{\n  font-size:0.8em;\n}\n.text-capitalize{\n  text-transform:capitalize;\n}\n.text-uppercase{\n  text-transform:uppercase;\n}\n.text-ontime{\n  color:#58ae5b;\n}\n.text-late{\n  color:#E6413E;\n}\n.text-warning{\n  color:#E6413E !important;\n}\n.text-red{\n  color:#E6413E;\n}\n.text-blue{\n  color:#5496F8;\n}\n.truncate{\n  white-space:nowrap;\n  overflow:hidden;\n  text-overflow:ellipsis;\n}\n.flex-row{\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  -webkit-box-orient:horizontal;\n  -webkit-box-direction:normal;\n      -ms-flex-direction:row;\n          flex-direction:row;\n}\n.flex-column{\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  -webkit-box-orient:vertical;\n  -webkit-box-direction:normal;\n      -ms-flex-direction:column;\n          flex-direction:column;\n}\n.column-gap-4 > :not(:last-child){\n  margin-bottom:4px;\n}\n.row-gap-4 > :not(:last-child){\n  margin-right:4px;\n}\n.column-gap-7 > :not(:last-child){\n  margin-bottom:7px;\n}\n.row-gap-7 > :not(:last-child){\n  margin-right:7px;\n}\n.column-gap-10 > :not(:last-child){\n  margin-bottom:10px;\n}\n.row-gap-10 > :not(:last-child){\n  margin-right:10px;\n}\n.column-gap-20 > :not(:last-child){\n  margin-bottom:20px;\n}\n.row-gap-20 > :not(:last-child){\n  margin-right:20px;\n}\n.wrap{\n  -ms-flex-wrap:wrap;\n      flex-wrap:wrap;\n}\n.flex{\n  -webkit-box-flex:1;\n      -ms-flex:1;\n          flex:1;\n}\n.auto{\n  margin:auto;\n}\n.relative{\n  position:relative;\n}\n.space-between{\n  -webkit-box-pack:justify;\n      -ms-flex-pack:justify;\n          justify-content:space-between;\n}\n.space-around{\n  -ms-flex-pack:distribute;\n      justify-content:space-around;\n}\n.justify-center{\n  -webkit-box-pack:center;\n      -ms-flex-pack:center;\n          justify-content:center;\n}\n.flex-center{\n  -webkit-box-align:center;\n      -ms-flex-align:center;\n          align-items:center;\n}\n.align-center{\n  -webkit-box-align:center;\n      -ms-flex-align:center;\n          align-items:center;\n}\n.clickable{\n  cursor:pointer;\n}\n.round-icon{\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  width:23px;\n  height:23px;\n  background:#315790;\n  border-radius:50%;\n}\n.flex-half{\n  -ms-flex-preferred-size:50%;\n      flex-basis:50%;\n}\n.link-unstyled{\n  color:inherit;\n}\n.link-unstyled:hover{\n  text-decoration:none;\n}\n.half{\n  width:50%;\n}\n.noselect{\n  -webkit-touch-callout:none;\n  -webkit-user-select:none;\n  -moz-user-select:none;\n  -ms-user-select:none;\n  user-select:none;\n}\n.hover-shadow:hover{\n  -webkit-box-shadow:0px 0px 4px 2px rgba(0, 0, 0, 0.16);\n          box-shadow:0px 0px 4px 2px rgba(0, 0, 0, 0.16);\n}\n.marker-transparent{\n  opacity:0.4;\n}\n.marker-fade{\n  -webkit-filter:contrast(16%) brightness(160%) blur(0.6px);\n          filter:contrast(16%) brightness(160%) blur(0.6px);\n}\n.tooltip-warning{\n  background:#e04745;\n  color:#fff;\n}\n.tooltip-warning-arrow{\n  border-right-color:#e04745 !important;\n}\n.tooltip-info{\n  background:#5496F8;\n  color:#fff;\n}\n.tooltip-info-arrow{\n  border-right-color:#5496F8 !important;\n}\na{\n  color:inherit;\n  text-decoration:none;\n}\na:hover{\n  color:inherit;\n  text-decoration:none;\n}\na:active{\n  color:inherit;\n  text-decoration:none;\n}\na:focus{\n  outline:none;\n  color:inherit;\n  text-decoration:none;\n}\n.spinner-wave{\n  margin:0 auto;\n  width:100px;\n  height:20px;\n  text-align:center;\n}\n.spinner-wave > div{\n  background-color:#5496F8;\n  height:100%;\n  width:6px;\n  display:inline-block;\n  -webkit-animation:wave 1.2s infinite ease-in-out;\n  animation:wave 1.2s infinite ease-in-out;\n}\n.spinner-wave div:nth-child(2){\n  -webkit-animation-delay:-1.1s;\n  animation-delay:-1.1s;\n}\n.spinner-wave div:nth-child(3){\n  -webkit-animation-delay:-1s;\n  animation-delay:-1s;\n}\n.spinner-wave div:nth-child(4){\n  -webkit-animation-delay:-0.9s;\n  animation-delay:-0.9s;\n}\n.spinner-wave div:nth-child(5){\n  -webkit-animation-delay:-0.8s;\n  animation-delay:-0.8s;\n}\n@-webkit-keyframes wave{\n  0%,\n  40%,\n  100%{\n    -webkit-transform:scaleY(0.4);\n  }\n  20%{\n    -webkit-transform:scaleY(1);\n  }\n}\n@keyframes wave{\n  0%,\n  40%,\n  100%{\n    -webkit-transform:scaleY(0.4);\n            transform:scaleY(0.4);\n  }\n  20%{\n    -webkit-transform:scaleY(1);\n            transform:scaleY(1);\n  }\n}\n@media screen and (max-width: 480px){\n  .hide-xs{\n    display:none !important;\n  }\n}\n@media screen and (min-width: 480px){\n  .show-xs{\n    display:none !important;\n  }\n}\n.ht-btn{\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  -webkit-box-align:center;\n      -ms-flex-align:center;\n          align-items:center;\n  padding:5px 13px;\n  border:0;\n  background:#ffffff;\n  color:#52616A;\n  -webkit-box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12);\n          box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12);\n}\n.ht-btn:focus{\n  background:#fcfcfc;\n  outline:0;\n}\n.ht-btn-card:hover{\n  background:#5496F8;\n  color:rgba(255, 255, 255, 0.96);\n  -webkit-box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12);\n          box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12);\n}\n.stopped-color{\n  color:#FFBB44;\n}\n.drive-color{\n  color:#5496F8;\n}\n.walk-color{\n  color:#5496F8;\n}\n.moving-color{\n  color:#5496F8;\n}\n.logged_off-color{\n  color:#A9BAC4;\n}\n.network_offline-color{\n  color:#d19191;\n}\n.location_disabled-color{\n  color:#d19191;\n}\n.location_low_accuracy-color{\n  color:#d19191;\n}\n.stopped-bg{\n  background:#FFBB44;\n}\n.drive-bg{\n  background:#5496F8;\n}\n.walk-bg{\n  background:#5496F8;\n}\n.moving-bg{\n  background:#5496F8;\n}\n.logged_off-bg{\n  background:#A9BAC4;\n}\n.network_offline-bg{\n  background:#d19191;\n}\n.location_disabled-bg{\n  background-color:#d19191;\n}\n.location_low_accuracy-bg{\n  background-color:#d19191;\n}\n.filter-container{\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  -webkit-box-orient:horizontal;\n  -webkit-box-direction:normal;\n      -ms-flex-direction:row;\n          flex-direction:row;\n  -webkit-box-align:center;\n      -ms-flex-align:center;\n          align-items:center;\n  position:relative;\n  padding:4px 10px;\n  border-bottom:2px solid #ccc;\n}\n.filter-container > :not(:last-child){\n  margin-right:7px;\n}\n.dropdown-menu{\n  z-index:1001;\n}\n.loading-bar{\n  position:absolute;\n  width:100%;\n  bottom:0;\n  left:0;\n}\n"],
                changeDetection: ChangeDetectionStrategy.OnPush,
                animations: [
                    trigger('filter', [
                        state('hide', style({
                            display: 'none'
                        })),
                        transition('hide => show', [
                            style({ transform: 'translateX(-100px)', height: 0 }),
                            animate('0.3s' + ' ease-out')
                        ]),
                        transition('show => hide', [
                            animate('0.3s' + ' ease-in', style({ transform: 'translateX(-100px)', height: 0 }))
                        ])
                    ])
                ]
            },] },
];
UsersFilterComponent.ctorParameters = function () { return [
    { type: HtUsersService, decorators: [{ type: Optional },] },
    { type: ChangeDetectorRef, },
]; };
UsersFilterComponent.propDecorators = {
    "usersClient": [{ type: Input },],
    "options": [{ type: Input },],
};
var EntitySearchComponent = /** @class */ (function () {
    function EntitySearchComponent() {
        this.query$ = new Subject();
        this.entity = "";
        this.onSearchQuery = new EventEmitter();
    }
    EntitySearchComponent.prototype.clickSearch = function (e) {
        this.input.nativeElement.focus();
    };
    EntitySearchComponent.prototype.ngOnInit = function () {
    };
    EntitySearchComponent.prototype.test = function (string) {
        this.query$.next(string);
    };
    EntitySearchComponent.prototype.setSearch = function (el) {
        var search = el.value;
        el.value = '';
        if (search)
            this.onSearchQuery.next({ search: search });
    };
    return EntitySearchComponent;
}());
EntitySearchComponent.decorators = [
    { type: Component, args: [{
                selector: 'ht-entity-search',
                template: "<!--<div class=\"control has-icons-right flex-row\">-->\n  <!--<input #query (input)=\"test(query.value)\" (keydown.enter)=\"setSearch(query)\" type=\"text\" class=\"input\" placeholder=\"Search {{entity}}\">-->\n  <!--<span class=\"icon is-right\" (click)=\"setSearch(query)\">-->\n        <!--<i class=\"fa fa-search\"></i>-->\n      <!--</span>-->\n<!--</div>&lt;!&ndash; /input-group &ndash;&gt;-->\n<div class=\"field has-addons\">\n  <div class=\"control\">\n    <input #query (input)=\"test(query.value)\" (keydown.enter)=\"setSearch(query)\" type=\"text\" class=\"input\" placeholder=\"Search {{entity}}\">\n  </div>\n  <div class=\"control\">\n    <a class=\"button\">\n      <i class=\"fa fa-search\"></i>\n    </a>\n  </div>\n</div>\n",
                styles: [".text-center{\n  text-align:center;\n}\n.text-muted{\n  color:#798E9B;\n}\n.text-right{\n  text-align:right;\n}\n.text-left{\n  text-align:left;\n}\n.text-1{\n  font-size:2em;\n}\n.text-4{\n  font-size:0.8em;\n}\n.text-capitalize{\n  text-transform:capitalize;\n}\n.text-uppercase{\n  text-transform:uppercase;\n}\n.text-ontime{\n  color:#58ae5b;\n}\n.text-late{\n  color:#E6413E;\n}\n.text-warning{\n  color:#E6413E !important;\n}\n.text-red{\n  color:#E6413E;\n}\n.text-blue{\n  color:#5496F8;\n}\n.truncate{\n  white-space:nowrap;\n  overflow:hidden;\n  text-overflow:ellipsis;\n}\n.flex-row{\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  -webkit-box-orient:horizontal;\n  -webkit-box-direction:normal;\n      -ms-flex-direction:row;\n          flex-direction:row;\n}\n.flex-column{\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  -webkit-box-orient:vertical;\n  -webkit-box-direction:normal;\n      -ms-flex-direction:column;\n          flex-direction:column;\n}\n.column-gap-4 > :not(:last-child){\n  margin-bottom:4px;\n}\n.row-gap-4 > :not(:last-child){\n  margin-right:4px;\n}\n.column-gap-7 > :not(:last-child){\n  margin-bottom:7px;\n}\n.row-gap-7 > :not(:last-child){\n  margin-right:7px;\n}\n.column-gap-10 > :not(:last-child){\n  margin-bottom:10px;\n}\n.row-gap-10 > :not(:last-child){\n  margin-right:10px;\n}\n.column-gap-20 > :not(:last-child){\n  margin-bottom:20px;\n}\n.row-gap-20 > :not(:last-child){\n  margin-right:20px;\n}\n.wrap{\n  -ms-flex-wrap:wrap;\n      flex-wrap:wrap;\n}\n.flex{\n  -webkit-box-flex:1;\n      -ms-flex:1;\n          flex:1;\n}\n.auto{\n  margin:auto;\n}\n.relative{\n  position:relative;\n}\n.space-between{\n  -webkit-box-pack:justify;\n      -ms-flex-pack:justify;\n          justify-content:space-between;\n}\n.space-around{\n  -ms-flex-pack:distribute;\n      justify-content:space-around;\n}\n.justify-center{\n  -webkit-box-pack:center;\n      -ms-flex-pack:center;\n          justify-content:center;\n}\n.flex-center{\n  -webkit-box-align:center;\n      -ms-flex-align:center;\n          align-items:center;\n}\n.align-center{\n  -webkit-box-align:center;\n      -ms-flex-align:center;\n          align-items:center;\n}\n.clickable{\n  cursor:pointer;\n}\n.round-icon{\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  width:23px;\n  height:23px;\n  background:#315790;\n  border-radius:50%;\n}\n.flex-half{\n  -ms-flex-preferred-size:50%;\n      flex-basis:50%;\n}\n.link-unstyled{\n  color:inherit;\n}\n.link-unstyled:hover{\n  text-decoration:none;\n}\n.half{\n  width:50%;\n}\n.noselect{\n  -webkit-touch-callout:none;\n  -webkit-user-select:none;\n  -moz-user-select:none;\n  -ms-user-select:none;\n  user-select:none;\n}\n.hover-shadow:hover{\n  -webkit-box-shadow:0px 0px 4px 2px rgba(0, 0, 0, 0.16);\n          box-shadow:0px 0px 4px 2px rgba(0, 0, 0, 0.16);\n}\n.marker-transparent{\n  opacity:0.4;\n}\n.marker-fade{\n  -webkit-filter:contrast(16%) brightness(160%) blur(0.6px);\n          filter:contrast(16%) brightness(160%) blur(0.6px);\n}\n.tooltip-warning{\n  background:#e04745;\n  color:#fff;\n}\n.tooltip-warning-arrow{\n  border-right-color:#e04745 !important;\n}\n.tooltip-info{\n  background:#5496F8;\n  color:#fff;\n}\n.tooltip-info-arrow{\n  border-right-color:#5496F8 !important;\n}\na{\n  color:inherit;\n  text-decoration:none;\n}\na:hover{\n  color:inherit;\n  text-decoration:none;\n}\na:active{\n  color:inherit;\n  text-decoration:none;\n}\na:focus{\n  outline:none;\n  color:inherit;\n  text-decoration:none;\n}\n.spinner-wave{\n  margin:0 auto;\n  width:100px;\n  height:20px;\n  text-align:center;\n}\n.spinner-wave > div{\n  background-color:#5496F8;\n  height:100%;\n  width:6px;\n  display:inline-block;\n  -webkit-animation:wave 1.2s infinite ease-in-out;\n  animation:wave 1.2s infinite ease-in-out;\n}\n.spinner-wave div:nth-child(2){\n  -webkit-animation-delay:-1.1s;\n  animation-delay:-1.1s;\n}\n.spinner-wave div:nth-child(3){\n  -webkit-animation-delay:-1s;\n  animation-delay:-1s;\n}\n.spinner-wave div:nth-child(4){\n  -webkit-animation-delay:-0.9s;\n  animation-delay:-0.9s;\n}\n.spinner-wave div:nth-child(5){\n  -webkit-animation-delay:-0.8s;\n  animation-delay:-0.8s;\n}\n@-webkit-keyframes wave{\n  0%,\n  40%,\n  100%{\n    -webkit-transform:scaleY(0.4);\n  }\n  20%{\n    -webkit-transform:scaleY(1);\n  }\n}\n@keyframes wave{\n  0%,\n  40%,\n  100%{\n    -webkit-transform:scaleY(0.4);\n            transform:scaleY(0.4);\n  }\n  20%{\n    -webkit-transform:scaleY(1);\n            transform:scaleY(1);\n  }\n}\n@media screen and (max-width: 480px){\n  .hide-xs{\n    display:none !important;\n  }\n}\n@media screen and (min-width: 480px){\n  .show-xs{\n    display:none !important;\n  }\n}\n.ht-btn{\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  -webkit-box-align:center;\n      -ms-flex-align:center;\n          align-items:center;\n  padding:5px 13px;\n  border:0;\n  background:#ffffff;\n  color:#52616A;\n  -webkit-box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12);\n          box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12);\n}\n.ht-btn:focus{\n  background:#fcfcfc;\n  outline:0;\n}\n.ht-btn-card:hover{\n  background:#5496F8;\n  color:rgba(255, 255, 255, 0.96);\n  -webkit-box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12);\n          box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12);\n}\n.stopped-color{\n  color:#FFBB44;\n}\n.drive-color{\n  color:#5496F8;\n}\n.walk-color{\n  color:#5496F8;\n}\n.moving-color{\n  color:#5496F8;\n}\n.logged_off-color{\n  color:#A9BAC4;\n}\n.network_offline-color{\n  color:#d19191;\n}\n.location_disabled-color{\n  color:#d19191;\n}\n.location_low_accuracy-color{\n  color:#d19191;\n}\n.stopped-bg{\n  background:#FFBB44;\n}\n.drive-bg{\n  background:#5496F8;\n}\n.walk-bg{\n  background:#5496F8;\n}\n.moving-bg{\n  background:#5496F8;\n}\n.logged_off-bg{\n  background:#A9BAC4;\n}\n.network_offline-bg{\n  background:#d19191;\n}\n.location_disabled-bg{\n  background-color:#d19191;\n}\n.location_low_accuracy-bg{\n  background-color:#d19191;\n}\n:host{\n  position:relative;\n}\n#results{\n  position:absolute;\n  left:0;\n  top:37px;\n  background:#fff;\n  width:100%;\n  border:1px solid #C9D6DE;\n  z-index:11;\n}\n.input-search{\n  border:0;\n  border-bottom:1px solid #ffffff;\n}\n.input-search:focus{\n  outline:0;\n  border-bottom:1px solid #52616A;\n}\n.item{\n  padding:4px 10px;\n  color:#52616A;\n}\n.item:hover{\n  background:#f7f7f7;\n}\n.clickable{\n  color:#5496F8;\n}\n.input-sm{\n  border:0;\n  outline:0;\n  -webkit-box-shadow:0 0;\n          box-shadow:0 0;\n  border-bottom:1px solid #d5dfe5;\n  font-size:15px;\n}\n"]
            },] },
];
EntitySearchComponent.ctorParameters = function () { return []; };
EntitySearchComponent.propDecorators = {
    "input": [{ type: ViewChild, args: ['query',] },],
    "entity": [{ type: Input },],
    "onSearchQuery": [{ type: Output },],
    "clickSearch": [{ type: HostListener, args: ['click',] },],
};
var EntitySearchModule = /** @class */ (function () {
    function EntitySearchModule() {
    }
    return EntitySearchModule;
}());
EntitySearchModule.decorators = [
    { type: NgModule, args: [{
                imports: [
                    CommonModule
                ],
                declarations: [EntitySearchComponent],
                exports: [EntitySearchComponent]
            },] },
];
EntitySearchModule.ctorParameters = function () { return []; };
var DateRangeComponent = /** @class */ (function () {
    function DateRangeComponent(elRef, cd) {
        this.elRef = elRef;
        this.cd = cd;
        this.dateRangeService = dateRangeService.getInstance();
        this.isRight = false;
        this.showSingleDay = true;
        this.customDates = DateRangeLabelMap;
        this.isActive = false;
    }
    DateRangeComponent.prototype.open = function () {
        this.isActive = true;
    };
    DateRangeComponent.prototype.close = function () {
        this.isActive = false;
    };
    DateRangeComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.dateRange$ = this.dateRangeService.display$;
        this.dateRangeOptions$ = this.dateRangeService.data$.pipe(map$1(function (dateRange) {
            return _this.customDates.filter(function (customRange) {
                return _this.showSingleDay ? true : !customRange.isSingleDay;
            }).map(function (customRange) {
                return isSameDateRange(customRange.range, dateRange) ? Object.assign({}, customRange, { isActive: true }) : Object.assign({}, customRange);
            });
        }));
        this.dateRangeOptions$.subscribe();
    };
    DateRangeComponent.prototype.setDateRange = function (range) {
        var _this = this;
        this.dateRangeService.setDateRange(range);
        setTimeout(function () {
            _this.isActive = false;
            _this.cd.detectChanges();
        }, 200);
    };
    return DateRangeComponent;
}());
DateRangeComponent.decorators = [
    { type: Component, args: [{
                selector: 'ht-date-range',
                template: "<div class=\"dropdown is-active\" [class.is-right]=\"isRight\" *ngIf=\"dateRange$ | async as dateRange\">\n  <button type=\"button dropdown-trigger\" class=\"button flex-row row-gap-4\">\n    <span>{{dateRange}}</span>\n    <span class=\"icon\">\n      <i class=\"fa fa-calendar\"></i>\n    </span>\n    <!--<span *ngIf=\"ordering$ | async as ordering\"></span>-->\n    <!--<i class=\"fa fa-filter\"></i>-->\n  </button>\n  <div class=\"dropdown-menu dropdown-menu-right is-boxed\" *ngIf=\"isActive\" [@calender-appear]>\n    <div class=\"dropdown-content\" role=\"menu\" aria-labelledby=\"dropdown-keyboard-access\">\n      <div class=\"dropdown-item\">\n        <ht-date-range-picker [options]=\"{showSingleDay: showSingleDay, isRight: isRight}\" (onRangeChange)=\"setDateRange($event)\" [dateRange]=\"dateRangeService.data$ | async\"></ht-date-range-picker>\n      </div>\n    </div>\n  </div>\n</div>\n",
                styles: [".text-center{\n  text-align:center;\n}\n.text-muted{\n  color:#798E9B;\n}\n.text-right{\n  text-align:right;\n}\n.text-left{\n  text-align:left;\n}\n.text-1{\n  font-size:2em;\n}\n.text-4{\n  font-size:0.8em;\n}\n.text-capitalize{\n  text-transform:capitalize;\n}\n.text-uppercase{\n  text-transform:uppercase;\n}\n.text-ontime{\n  color:#58ae5b;\n}\n.text-late{\n  color:#E6413E;\n}\n.text-warning{\n  color:#E6413E !important;\n}\n.text-red{\n  color:#E6413E;\n}\n.text-blue{\n  color:#5496F8;\n}\n.truncate{\n  white-space:nowrap;\n  overflow:hidden;\n  text-overflow:ellipsis;\n}\n.flex-row{\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  -webkit-box-orient:horizontal;\n  -webkit-box-direction:normal;\n      -ms-flex-direction:row;\n          flex-direction:row;\n}\n.flex-column{\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  -webkit-box-orient:vertical;\n  -webkit-box-direction:normal;\n      -ms-flex-direction:column;\n          flex-direction:column;\n}\n.column-gap-4 > :not(:last-child){\n  margin-bottom:4px;\n}\n.row-gap-4 > :not(:last-child){\n  margin-right:4px;\n}\n.column-gap-7 > :not(:last-child){\n  margin-bottom:7px;\n}\n.row-gap-7 > :not(:last-child){\n  margin-right:7px;\n}\n.column-gap-10 > :not(:last-child){\n  margin-bottom:10px;\n}\n.row-gap-10 > :not(:last-child){\n  margin-right:10px;\n}\n.column-gap-20 > :not(:last-child){\n  margin-bottom:20px;\n}\n.row-gap-20 > :not(:last-child){\n  margin-right:20px;\n}\n.wrap{\n  -ms-flex-wrap:wrap;\n      flex-wrap:wrap;\n}\n.flex{\n  -webkit-box-flex:1;\n      -ms-flex:1;\n          flex:1;\n}\n.auto{\n  margin:auto;\n}\n.relative{\n  position:relative;\n}\n.space-between{\n  -webkit-box-pack:justify;\n      -ms-flex-pack:justify;\n          justify-content:space-between;\n}\n.space-around{\n  -ms-flex-pack:distribute;\n      justify-content:space-around;\n}\n.justify-center{\n  -webkit-box-pack:center;\n      -ms-flex-pack:center;\n          justify-content:center;\n}\n.flex-center{\n  -webkit-box-align:center;\n      -ms-flex-align:center;\n          align-items:center;\n}\n.align-center{\n  -webkit-box-align:center;\n      -ms-flex-align:center;\n          align-items:center;\n}\n.clickable{\n  cursor:pointer;\n}\n.round-icon{\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  width:23px;\n  height:23px;\n  background:#315790;\n  border-radius:50%;\n}\n.flex-half{\n  -ms-flex-preferred-size:50%;\n      flex-basis:50%;\n}\n.link-unstyled{\n  color:inherit;\n}\n.link-unstyled:hover{\n  text-decoration:none;\n}\n.half{\n  width:50%;\n}\n.noselect{\n  -webkit-touch-callout:none;\n  -webkit-user-select:none;\n  -moz-user-select:none;\n  -ms-user-select:none;\n  user-select:none;\n}\n.hover-shadow:hover{\n  -webkit-box-shadow:0px 0px 4px 2px rgba(0, 0, 0, 0.16);\n          box-shadow:0px 0px 4px 2px rgba(0, 0, 0, 0.16);\n}\n.marker-transparent{\n  opacity:0.4;\n}\n.marker-fade{\n  -webkit-filter:contrast(16%) brightness(160%) blur(0.6px);\n          filter:contrast(16%) brightness(160%) blur(0.6px);\n}\n.tooltip-warning{\n  background:#e04745;\n  color:#fff;\n}\n.tooltip-warning-arrow{\n  border-right-color:#e04745 !important;\n}\n.tooltip-info{\n  background:#5496F8;\n  color:#fff;\n}\n.tooltip-info-arrow{\n  border-right-color:#5496F8 !important;\n}\na{\n  color:inherit;\n  text-decoration:none;\n}\na:hover{\n  color:inherit;\n  text-decoration:none;\n}\na:active{\n  color:inherit;\n  text-decoration:none;\n}\na:focus{\n  outline:none;\n  color:inherit;\n  text-decoration:none;\n}\n.spinner-wave{\n  margin:0 auto;\n  width:100px;\n  height:20px;\n  text-align:center;\n}\n.spinner-wave > div{\n  background-color:#5496F8;\n  height:100%;\n  width:6px;\n  display:inline-block;\n  -webkit-animation:wave 1.2s infinite ease-in-out;\n  animation:wave 1.2s infinite ease-in-out;\n}\n.spinner-wave div:nth-child(2){\n  -webkit-animation-delay:-1.1s;\n  animation-delay:-1.1s;\n}\n.spinner-wave div:nth-child(3){\n  -webkit-animation-delay:-1s;\n  animation-delay:-1s;\n}\n.spinner-wave div:nth-child(4){\n  -webkit-animation-delay:-0.9s;\n  animation-delay:-0.9s;\n}\n.spinner-wave div:nth-child(5){\n  -webkit-animation-delay:-0.8s;\n  animation-delay:-0.8s;\n}\n@-webkit-keyframes wave{\n  0%,\n  40%,\n  100%{\n    -webkit-transform:scaleY(0.4);\n  }\n  20%{\n    -webkit-transform:scaleY(1);\n  }\n}\n@keyframes wave{\n  0%,\n  40%,\n  100%{\n    -webkit-transform:scaleY(0.4);\n            transform:scaleY(0.4);\n  }\n  20%{\n    -webkit-transform:scaleY(1);\n            transform:scaleY(1);\n  }\n}\n@media screen and (max-width: 480px){\n  .hide-xs{\n    display:none !important;\n  }\n}\n@media screen and (min-width: 480px){\n  .show-xs{\n    display:none !important;\n  }\n}\n.ht-btn{\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  -webkit-box-align:center;\n      -ms-flex-align:center;\n          align-items:center;\n  padding:5px 13px;\n  border:0;\n  background:#ffffff;\n  color:#52616A;\n  -webkit-box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12);\n          box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12);\n}\n.ht-btn:focus{\n  background:#fcfcfc;\n  outline:0;\n}\n.ht-btn-card:hover{\n  background:#5496F8;\n  color:rgba(255, 255, 255, 0.96);\n  -webkit-box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12);\n          box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12);\n}\n.stopped-color{\n  color:#FFBB44;\n}\n.drive-color{\n  color:#5496F8;\n}\n.walk-color{\n  color:#5496F8;\n}\n.moving-color{\n  color:#5496F8;\n}\n.logged_off-color{\n  color:#A9BAC4;\n}\n.network_offline-color{\n  color:#d19191;\n}\n.location_disabled-color{\n  color:#d19191;\n}\n.location_low_accuracy-color{\n  color:#d19191;\n}\n.stopped-bg{\n  background:#FFBB44;\n}\n.drive-bg{\n  background:#5496F8;\n}\n.walk-bg{\n  background:#5496F8;\n}\n.moving-bg{\n  background:#5496F8;\n}\n.logged_off-bg{\n  background:#A9BAC4;\n}\n.network_offline-bg{\n  background:#d19191;\n}\n.location_disabled-bg{\n  background-color:#d19191;\n}\n.location_low_accuracy-bg{\n  background-color:#d19191;\n}\n.dropdown-menu{\n  z-index:601;\n}\n.row-right{\n  -webkit-box-orient:horizontal;\n  -webkit-box-direction:reverse;\n      -ms-flex-direction:row-reverse;\n          flex-direction:row-reverse;\n}\n.row-right .options{\n  padding-left:15px;\n}\n.row-left{\n  -webkit-box-orient:horizontal;\n  -webkit-box-direction:normal;\n      -ms-flex-direction:row;\n          flex-direction:row;\n}\n.row-left .options{\n  padding-right:15px;\n}\n"],
                changeDetection: ChangeDetectionStrategy.OnPush,
                animations: [
                    trigger('calender-appear', [
                        transition(":leave", [
                            style({ pointerEvents: 'none' }),
                            animate('150ms ease-in', style({ opacity: 0, top: "-10px" }))
                        ]),
                        transition(":enter", [
                            style({ opacity: 0, height: 0, top: "-10px" }),
                            animate('150ms ease-out')
                        ]),
                    ])
                ]
            },] },
];
DateRangeComponent.ctorParameters = function () { return [
    { type: ElementRef, },
    { type: ChangeDetectorRef, },
]; };
DateRangeComponent.propDecorators = {
    "dateRangeService": [{ type: Input },],
    "isRight": [{ type: Input },],
    "showSingleDay": [{ type: Input },],
    "open": [{ type: HostListener, args: ['mouseenter',] },],
    "close": [{ type: HostListener, args: ['mouseleave',] },],
};
var DateRangePickerComponent = /** @class */ (function () {
    function DateRangePickerComponent() {
        this.options = {};
        this.onRangeChange = new EventEmitter();
        this.onDateChange = new EventEmitter();
        this.selectedDate$ = new BehaviorSubject(null);
        this.hoveredDate = new BehaviorSubject(null);
        this.days = [
            'Sun',
            'Mon',
            'Tue',
            'Wed',
            'Thu',
            'Fri',
            'Sat'
        ];
        this.customDates = DateRangeLabelMap;
        var monthStart = startOfMonth(new Date());
        this.currentMonthStart$ = new BehaviorSubject(monthStart);
    }
    
    DateRangePickerComponent.prototype.ngOnInit = function () {
    };
    DateRangePickerComponent.prototype.ngOnChanges = function () {
        if (this.options.datePicker) {
            this.dateRange = { end: this.date, start: this.date };
        }
        this.initDateRange(this.dateRange);
        this.display = dateRangeDisplay(this.dateRange);
    };
    DateRangePickerComponent.prototype.initDateRange = function (range) {
        var _this = this;
        this.customDates$ = this.customDates.filter(function (customRange) {
            return !_this.options.hideSingleDay ? true : !customRange.isSingleDay;
        }).map(function (customRange) {
            return isSameDateRange(customRange.range, range) ? Object.assign({}, customRange, { isActive: true }) : Object.assign({}, customRange);
        });
        this.currentDateStyle$ = combineLatest(this.selectedDate$.pipe(distinctUntilChanged()), this.hoveredDate.pipe(distinctUntilChanged()), function (selectedDate, hoveredDate) {
            var dateRange = range;
            var selectedRange;
            var display;
            if (selectedDate && hoveredDate) {
                if (isBefore(hoveredDate, selectedDate)) {
                    selectedRange = { end: selectedDate };
                    display = [null, format(selectedDate, 'DD MMM')];
                }
                else {
                    selectedRange = { start: selectedDate };
                    display = [format(selectedDate, 'DD MMM'), null];
                }
            }
            else if (selectedDate) {
                selectedRange = { end: selectedDate };
                display = [format(selectedDate, 'DD MMM'), null];
            }
            else {
                selectedRange = dateRange;
                display = [format(dateRange.start, 'DD MMM'), format(dateRange.end, 'DD MMM')];
            }
            if (_this.options.datePicker) {
                display = [format(dateRange.start, 'DD MMM')];
            }
            return {
                selectedRange: selectedRange,
                hoveredDate: hoveredDate,
                display: display
            };
        });
        this.dates$ = combineLatest(this.currentMonthStart$, this.currentDateStyle$, function (monthStart, dateStyle) {
            return _this.generateDates(monthStart, dateStyle);
        });
        this.month$ = this.currentMonthStart$.pipe(map$1(function (date) {
            return {
                display: format(date, 'MMM YY')
            };
        }));
    };
    DateRangePickerComponent.prototype.changeMonth = function (inc) {
        var month = addMonths(new Date(this.currentMonthStart$.getValue()), inc);
        this.currentMonthStart$.next(month);
    };
    DateRangePickerComponent.prototype.generateDates = function (monthStart, dateStyle) {
        var _this = this;
        var start = startOfWeek(monthStart);
        var weekStarts = [0, 1, 2, 3, 4, 5].map(function (v, i) {
            return addWeeks(start, i);
        });
        var days = weekStarts.map(function (weekStart) {
            return [0, 1, 2, 3, 4, 5, 6].map(function (i) {
                var date = addDays(weekStart, i);
                return _this.getDay(date, monthStart, dateStyle);
            });
        });
        return days;
    };
    DateRangePickerComponent.prototype.getDay = function (date, monthStart, dateStyle) {
        var selectedRange = this.getRangeFromStyle(dateStyle);
        var isEnd = false;
        var isStart = false;
        var isHovered = this.isHovered(date, dateStyle);
        if (selectedRange.end) {
            isEnd = isSameDay(selectedRange.end, date);
        }
        if (selectedRange.start) {
            isStart = isSameDay(selectedRange.start, date);
        }
        return {
            date: date,
            timeStamp: date.toISOString(),
            day: format(date, 'D'),
            isInMonth: isSameMonth(date, monthStart),
            today: isToday(date),
            isEnd: isEnd,
            isStart: isStart,
            isHovered: isHovered,
            isInvalid: isFuture(date)
        };
    };
    
    DateRangePickerComponent.prototype.isHovered = function (date, dateStyle) {
        var hovered = dateStyle.hoveredDate;
        var start = dateStyle.selectedRange.start || hovered;
        var end = dateStyle.selectedRange.end || hovered || start;
        return isWithinRange(date, start, end);
    };
    DateRangePickerComponent.prototype.setDateRange = function (range) {
        range = { start: range.start, end: endOfDay(range.end).toISOString() };
        this.onRangeChange.next(range);
    };
    DateRangePickerComponent.prototype.setDate = function (date) {
        this.onDateChange.next(date.timeStamp);
    };
    DateRangePickerComponent.prototype.getRangeFromStyle = function (_a) {
        var selectedRange = _a.selectedRange, hoveredDate = _a.hoveredDate;
        return selectedRange;
    };
    DateRangePickerComponent.prototype.pickDate = function (date) {
        var _this = this;
        if (date.isInvalid)
            return false;
        if (this.options.datePicker) {
            this.setDate(date);
        }
        else {
            this.currentDateStyle$.pipe(take(1)).subscribe(function (dateStyle) {
                if (dateStyle.hoveredDate || (!dateStyle.selectedRange.start || !dateStyle.selectedRange.end)) {
                    _this.setDateFromDayRange(date, dateStyle);
                }
                else {
                    _this.selectedDate$.next(new Date(date.date).toISOString());
                }
            });
        }
    };
    
    DateRangePickerComponent.prototype.setDateFromDayRange = function (date, dateStyle) {
        var range = { end: dateStyle.selectedRange.end || date.timeStamp, start: dateStyle.selectedRange.start || date.timeStamp };
        this.selectedDate$.next(null);
        this.hoveredDate.next(null);
        this.setDateRange(range);
    };
    DateRangePickerComponent.prototype.hoverDate = function (date) {
        var timeStamp = date ? new Date(date.date).toISOString() : null;
        if (timeStamp) {
            var selected = this.selectedDate$.getValue();
            if (selected)
                this.hoveredDate.next(timeStamp);
        }
        else {
            this.hoveredDate.next(timeStamp);
        }
    };
    
    DateRangePickerComponent.prototype.indexBy = function (a, v) {
        return v.timeStamp;
    };
    DateRangePickerComponent.prototype.indexByWeek = function (a, v) {
        return v[0].timeStamp;
    };
    DateRangePickerComponent.prototype.reset = function () {
        this.selectedDate$.next(null);
        this.hoveredDate.next(null);
        var monthStart = startOfMonth(new Date());
        this.currentMonthStart$.next(monthStart);
    };
    return DateRangePickerComponent;
}());
DateRangePickerComponent.decorators = [
    { type: Component, args: [{
                selector: 'ht-date-range-picker',
                template: "<div class=\"flex-row\" [ngClass]=\"options.isRight ? 'row-right' : 'row-left'\">\n  <div class=\"flex-column column-gap-10 options\" *ngIf=\"!options.datePicker\">\n    <button class=\"button is-light is-small\" [class.is-primary]=\"date.isActive\" (click)=\"setDateRange(date.range)\" *ngFor=\"let date of customDates$\">{{date.label}}</button>\n  </div>\n  <div class=\"calender\" *ngIf=\"!options.hideCalender\">\n    <div class=\"flex-column\">\n      <div class=\"flex-row date-style\" *ngIf=\"currentDateStyle$ | async as dateStyle\">\n        <div class=\"has-text-centered\" [class.has-text-danger]=\"!dateStyle.display[0]\">{{dateStyle.display[0] | dot: 'Set start date'}}</div>\n        <div *ngIf=\"dateStyle.display.length == 2\">&nbsp; &hArr; &nbsp;</div>\n        <div *ngIf=\"dateStyle.display.length == 2\" class=\"has-text-centered\" [class.has-text-danger]=\"!dateStyle.display[1]\">{{dateStyle.display[1] | dot: 'Set end date'}}</div>\n      </div>\n      <div class=\"flex-row month flex-center\" *ngIf=\"month$ | async as month\">\n        <div class=\"icon clickable\" (click)=\"changeMonth(-1)\">\n          <i class=\"fa fa-chevron-left\"></i>\n        </div>\n        <div class=\"flex has-text-centered\">{{month.display}}</div>\n        <div class=\"icon clickable\" (click)=\"changeMonth(1)\">\n          <i class=\"fa fa-chevron-right\"></i>\n        </div>\n      </div>\n      <div class=\"flex-row\">\n        <div class=\"day has-text-weight-bold\" *ngFor=\"let day of  days\">{{day}}</div>\n      </div>\n      <div *ngFor=\"let weeks of dates$ | async; trackBy: indexByWeek\" class=\"flex-row\">\n        <div\n          (mousedown)=\"pickDate(day)\"\n          (mouseenter)=\"hoverDate(day)\"\n          (mouseleave)=\"hoverDate(null)\"\n          [class.is-today]=\"day.today\"\n          [class.is-invalid]=\"day.isInvalid\"\n          [class.is-hovered]=\"day.isHovered\"\n          [class.is-start]=\"day.isStart\"\n          [class.is-end]=\"day.isEnd\"\n          [class.has-text-grey-light]=\"!day.isInMonth\"\n          *ngFor=\"let day of weeks; trackBy: indexBy\"\n          class=\"day\">{{day.day}}</div>\n      </div>\n    </div>\n  </div>\n</div>\n",
                styles: [".text-center{\n  text-align:center; }\n.text-muted{\n  color:#798E9B; }\n.text-right{\n  text-align:right; }\n.text-left{\n  text-align:left; }\n.text-1{\n  font-size:2em; }\n.text-4{\n  font-size:0.8em; }\n.text-capitalize{\n  text-transform:capitalize; }\n.text-uppercase{\n  text-transform:uppercase; }\n.text-ontime{\n  color:#58ae5b; }\n.text-late{\n  color:#E6413E; }\n.text-warning{\n  color:#E6413E !important; }\n.text-red{\n  color:#E6413E; }\n.text-blue{\n  color:#5496F8; }\n.truncate{\n  white-space:nowrap;\n  overflow:hidden;\n  text-overflow:ellipsis; }\n.flex-row{\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  -webkit-box-orient:horizontal;\n  -webkit-box-direction:normal;\n      -ms-flex-direction:row;\n          flex-direction:row; }\n.flex-column{\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  -webkit-box-orient:vertical;\n  -webkit-box-direction:normal;\n      -ms-flex-direction:column;\n          flex-direction:column; }\n.column-gap-4 > :not(:last-child){\n  margin-bottom:4px; }\n.row-gap-4 > :not(:last-child){\n  margin-right:4px; }\n.column-gap-7 > :not(:last-child){\n  margin-bottom:7px; }\n.row-gap-7 > :not(:last-child){\n  margin-right:7px; }\n.column-gap-10 > :not(:last-child){\n  margin-bottom:10px; }\n.row-gap-10 > :not(:last-child){\n  margin-right:10px; }\n.column-gap-20 > :not(:last-child){\n  margin-bottom:20px; }\n.row-gap-20 > :not(:last-child){\n  margin-right:20px; }\n.wrap{\n  -ms-flex-wrap:wrap;\n      flex-wrap:wrap; }\n.flex{\n  -webkit-box-flex:1;\n      -ms-flex:1;\n          flex:1; }\n.auto{\n  margin:auto; }\n.relative{\n  position:relative; }\n.space-between{\n  -webkit-box-pack:justify;\n      -ms-flex-pack:justify;\n          justify-content:space-between; }\n.space-around{\n  -ms-flex-pack:distribute;\n      justify-content:space-around; }\n.justify-center{\n  -webkit-box-pack:center;\n      -ms-flex-pack:center;\n          justify-content:center; }\n.flex-center{\n  -webkit-box-align:center;\n      -ms-flex-align:center;\n          align-items:center; }\n.align-center{\n  -webkit-box-align:center;\n      -ms-flex-align:center;\n          align-items:center; }\n.clickable{\n  cursor:pointer; }\n.round-icon{\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  width:23px;\n  height:23px;\n  background:#315790;\n  border-radius:50%; }\n.flex-half{\n  -ms-flex-preferred-size:50%;\n      flex-basis:50%; }\n.link-unstyled{\n  color:inherit; }\n  .link-unstyled:hover{\n    text-decoration:none; }\n.half{\n  width:50%; }\n.noselect{\n  -webkit-touch-callout:none;\n  -webkit-user-select:none;\n  -moz-user-select:none;\n  -ms-user-select:none;\n  user-select:none; }\n.hover-shadow:hover{\n  -webkit-box-shadow:0px 0px 4px 2px rgba(0, 0, 0, 0.16);\n          box-shadow:0px 0px 4px 2px rgba(0, 0, 0, 0.16); }\n.marker-transparent{\n  opacity:0.4; }\n.marker-fade{\n  -webkit-filter:contrast(16%) brightness(160%) blur(0.6px);\n          filter:contrast(16%) brightness(160%) blur(0.6px); }\n.tooltip-warning{\n  background:#e04745;\n  color:#fff; }\n  .tooltip-warning-arrow{\n    border-right-color:#e04745 !important; }\n.tooltip-info{\n  background:#5496F8;\n  color:#fff; }\n  .tooltip-info-arrow{\n    border-right-color:#5496F8 !important; }\na{\n  color:inherit;\n  text-decoration:none; }\n  a:hover{\n    color:inherit;\n    text-decoration:none; }\n  a:active{\n    color:inherit;\n    text-decoration:none; }\n  a:focus{\n    outline:none;\n    color:inherit;\n    text-decoration:none; }\n.ht-card.clickable:hover{\n  background:#edeff1; }\n.ht-card-container{\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  -webkit-box-orient:vertical;\n  -webkit-box-direction:normal;\n      -ms-flex-direction:column;\n          flex-direction:column;\n  position:relative; }\n  .ht-card-container .card{\n    margin-bottom:-1px; }\n  .ht-card-container .sub-status{\n    font-size:9px;\n    margin-top:-16px;\n    margin-bottom:20px;\n    text-align:center;\n    color:#798E9B;\n    text-transform:uppercase;\n    padding-top:3px; }\n  .ht-card-container .card-action{\n    height:30px;\n    background:#5496F8;\n    color:#fff;\n    border:1px solid #C9D6DE;\n    position:relative;\n    top:-3px;\n    margin:0 10px;\n    display:-webkit-box;\n    display:-ms-flexbox;\n    display:flex;\n    -webkit-box-align:center;\n        -ms-flex-align:center;\n            align-items:center;\n    -webkit-box-pack:center;\n        -ms-flex-pack:center;\n            justify-content:center;\n    padding:0 20px;\n    border-bottom-left-radius:5px;\n    border-bottom-right-radius:5px;\n    text-transform:uppercase; }\n    .ht-card-container .card-action:hover{\n      background:#3c87f7;\n      font-weight:500; }\n[hidden]{\n  display:none !important; }\n.card-clickable{\n  cursor:pointer; }\n  .card-clickable:hover{\n    background-color:#f2f2f2; }\n.adjust-huener-wave{\n  margin:0 auto;\n  width:100px;\n  height:20px;\n  text-align:center; }\n.adjust-huener-wave > div{\n  background-color:#5496F8;\n  height:100%;\n  width:6px;\n  display:inline-block;\n  -webkit-animation:wave 1.2s infinite ease-in-out;\n  animation:wave 1.2s infinite ease-in-out; }\n.adjust-huener-wave div:nth-child(2){\n  -webkit-animation-delay:-1.1s;\n  animation-delay:-1.1s; }\n.adjust-huener-wave div:nth-child(3){\n  -webkit-animation-delay:-1.0s;\n  animation-delay:-1.0s; }\n.adjust-huener-wave div:nth-child(4){\n  -webkit-animation-delay:-0.9s;\n  animation-delay:-0.9s; }\n.adjust-huener-wave div:nth-child(5){\n  -webkit-animation-delay:-0.8s;\n  animation-delay:-0.8s; }\n@-webkit-keyframes wave{\n  0%, 40%, 100%{\n    -webkit-transform:scaleY(0.4); }\n  20%{\n    -webkit-transform:scaleY(1); } }\n@keyframes wave{\n  0%, 40%, 100%{\n    -webkit-transform:scaleY(0.4);\n            transform:scaleY(0.4); }\n  20%{\n    -webkit-transform:scaleY(1);\n            transform:scaleY(1); } }\n@media screen and (max-width: 480px){\n  .hide-xs{\n    display:none !important; } }\n@media screen and (min-width: 480px){\n  .show-xs{\n    display:none !important; } }\n.ht-btn{\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  -webkit-box-align:center;\n      -ms-flex-align:center;\n          align-items:center;\n  padding:5px 13px;\n  border:0;\n  background:white;\n  color:#52616A;\n  -webkit-box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12);\n          box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12); }\n  .ht-btn:focus{\n    background:#fcfcfc;\n    outline:0; }\n  .ht-btn-card:hover{\n    background:#5496F8;\n    color:rgba(255, 255, 255, 0.96);\n    -webkit-box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12);\n            box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12); }\n.stopped-color{\n  color:#FFBB44; }\n.drive-color{\n  color:#5496F8; }\n.walk-color{\n  color:#5496F8; }\n.moving-color{\n  color:#5496F8; }\n.logged_off-color{\n  color:#A9BAC4; }\n.network_offline-color{\n  color:#d19191; }\n.location_disabled-color{\n  color:#d19191; }\n.location_low_accuracy-color{\n  color:#d19191; }\n.stopped-bg{\n  background:#FFBB44; }\n.drive-bg{\n  background:#5496F8; }\n.walk-bg{\n  background:#5496F8; }\n.moving-bg{\n  background:#5496F8; }\n.logged_off-bg{\n  background:#A9BAC4; }\n.network_offline-bg{\n  background:#d19191; }\n.location_disabled-bg{\n  background-color:#d19191; }\n.location_low_accuracy-bg{\n  background-color:#d19191; }\n.card-content.is-small{\n  padding:10px 20px; }\n.card-content.is-popup{\n  padding:10px 10px; }\n.modal{\n  z-index:402; }\n.day{\n  width:40px;\n  text-align:center;\n  -webkit-user-select:none;\n     -moz-user-select:none;\n      -ms-user-select:none;\n          user-select:none;\n  cursor:pointer; }\n  .day:hover{\n    font-weight:700; }\n.is-hovered{\n  background:lightgray; }\n.is-start{\n  background:grey;\n  color:#fff;\n  border-bottom-left-radius:4px;\n  border-top-left-radius:4px; }\n.is-end{\n  background:grey;\n  color:#fff;\n  border-bottom-right-radius:4px;\n  border-top-right-radius:4px; }\n.is-invalid{\n  text-decoration:line-through;\n  cursor:not-allowed; }\n.month{\n  padding:4px 0;\n  background:#ececec;\n  border-radius:4px;\n  margin:12px 0; }\n.date-style{\n  -webkit-box-pack:center;\n      -ms-flex-pack:center;\n          justify-content:center;\n  font-size:1.1rem; }\n.row-right{\n  -webkit-box-orient:horizontal;\n  -webkit-box-direction:reverse;\n      -ms-flex-direction:row-reverse;\n          flex-direction:row-reverse; }\n  .row-right .options{\n    padding-left:15px; }\n.row-left{\n  -webkit-box-orient:horizontal;\n  -webkit-box-direction:normal;\n      -ms-flex-direction:row;\n          flex-direction:row; }\n  .row-left .options{\n    padding-right:15px; }\n"],
                changeDetection: ChangeDetectionStrategy.OnPush
            },] },
];
DateRangePickerComponent.ctorParameters = function () { return []; };
DateRangePickerComponent.propDecorators = {
    "dateRange": [{ type: Input },],
    "date": [{ type: Input },],
    "options": [{ type: Input },],
    "onRangeChange": [{ type: Output },],
    "onDateChange": [{ type: Output },],
};
var DateRangePickerModule = /** @class */ (function () {
    function DateRangePickerModule() {
    }
    return DateRangePickerModule;
}());
DateRangePickerModule.decorators = [
    { type: NgModule, args: [{
                imports: [
                    CommonModule,
                    SharedModule
                ],
                declarations: [DateRangePickerComponent],
                exports: [DateRangePickerComponent]
            },] },
];
DateRangePickerModule.ctorParameters = function () { return []; };
var DateRangeModule = /** @class */ (function () {
    function DateRangeModule() {
    }
    return DateRangeModule;
}());
DateRangeModule.decorators = [
    { type: NgModule, args: [{
                imports: [
                    CommonModule,
                    SharedModule,
                    DateRangePickerModule
                ],
                declarations: [DateRangeComponent],
                exports: [DateRangeComponent]
            },] },
];
DateRangeModule.ctorParameters = function () { return []; };
var UsersFilterModule = /** @class */ (function () {
    function UsersFilterModule() {
    }
    return UsersFilterModule;
}());
UsersFilterModule.decorators = [
    { type: NgModule, args: [{
                imports: [
                    CommonModule,
                    EntitySearchModule,
                    SharedModule,
                    DateRangeModule
                ],
                declarations: [UsersFilterComponent],
                exports: [UsersFilterComponent]
            },] },
];
UsersFilterModule.ctorParameters = function () { return []; };
var UsersMapContainerModule = /** @class */ (function () {
    function UsersMapContainerModule() {
    }
    return UsersMapContainerModule;
}());
UsersMapContainerModule.decorators = [
    { type: NgModule, args: [{
                imports: [
                    CommonModule,
                    UsersContainerModule,
                    MapContainerModule,
                    UsersFilterModule
                ],
                declarations: [UsersMapContainerComponent],
                exports: [UsersMapContainerComponent]
            },] },
];
UsersMapContainerModule.ctorParameters = function () { return []; };
var UsersSummaryChartComponent = /** @class */ (function () {
    function UsersSummaryChartComponent() {
        this.noData = false;
    }
    UsersSummaryChartComponent.prototype.ngOnInit = function () {
    };
    UsersSummaryChartComponent.prototype.setChart = function (data) {
        if (data.labels.length <= 1) {
            this.noData = true;
            return false;
        }
        if (this.chart) {
            this.noData = false;
        }
        else {
            this.chart = new Chart({
                parent: this.charElem.nativeElement,
                data: data,
                type: 'percentage',
                height: 150,
                format_tooltip_x: function (d) { return d; },
                format_tooltip_y: function (d) { return d; }
            });
        }
    };
    UsersSummaryChartComponent.prototype.formatSummary = function (data) {
        var labels = data.chart.map(function (item) { return item.label; });
        var values = data.chart.map(function (item) { return item.value; });
        return {
            labels: labels,
            datasets: [
                {
                    values: values
                }
            ]
        };
    };
    return UsersSummaryChartComponent;
}());
UsersSummaryChartComponent.decorators = [
    { type: Component, args: [{
                selector: 'ht-users-summary-chart',
                template: "<div class=\"level\">\n  <div class=\"level-left\">\n    <div class=\"level-item is-size-5\" *ngIf=\"service.summary$ | async as summary\">\n      Total: {{summary.totalUsers}} {{'users'}}\n    </div>\n  </div>\n</div>\n<ng-container *ngIf=\"service.summary$ | async as summary\">\n  <ht-users-summary [summary]=\"summary\" [selectable]=\"false\" [hideTotal]=\"true\"></ht-users-summary>\n</ng-container>\n",
                styles: [""],
                changeDetection: ChangeDetectionStrategy.OnPush
            },] },
];
UsersSummaryChartComponent.ctorParameters = function () { return []; };
UsersSummaryChartComponent.propDecorators = {
    "service": [{ type: Input },],
    "charElem": [{ type: ViewChild, args: ['chart',] },],
};
var UsersSummaryChartModule = /** @class */ (function () {
    function UsersSummaryChartModule() {
    }
    return UsersSummaryChartModule;
}());
UsersSummaryChartModule.decorators = [
    { type: NgModule, args: [{
                imports: [
                    CommonModule,
                    UsersSummaryModule,
                ],
                declarations: [UsersSummaryChartComponent],
                exports: [UsersSummaryChartComponent]
            },] },
];
UsersSummaryChartModule.ctorParameters = function () { return []; };
var UsersAnalyticsListComponent = /** @class */ (function () {
    function UsersAnalyticsListComponent() {
        this.selectedUser = null;
    }
    UsersAnalyticsListComponent.prototype.ngOnInit = function () {
    };
    UsersAnalyticsListComponent.prototype.showUserDetail = function (row) {
        this.selectedUser = row.data;
    };
    UsersAnalyticsListComponent.prototype.closeModal = function () {
        this.selectedUser = null;
    };
    UsersAnalyticsListComponent.prototype.ngOnDestroy = function () {
    };
    return UsersAnalyticsListComponent;
}());
UsersAnalyticsListComponent.decorators = [
    { type: Component, args: [{
                selector: 'ht-users-analytics-list',
                template: "<!--<div class=\"level\">-->\n  <!--<div class=\"level-left has-text-weight-bold has-text-primary\">-->\n    <!--{{listService.title}}-->\n  <!--</div>-->\n  <!--<div class=\"level-right\" *ngIf=\"!listService.hideDatePicker\">-->\n    <!--<ht-date-range [dateRangeService$]=\"listService.dateRangeService$\"></ht-date-range>-->\n  <!--</div>-->\n<!--</div>-->\n<table class=\"table is-fullwidth is-bordered is-hoverable\">\n  <thead>\n  <tr>\n    <th *ngFor=\"let column of listService.columns\">{{column}}</th>\n  </tr>\n  </thead>\n  <tbody>\n  <!--<ht-data-table (select)=\"showUserDetail($event)\" [clickable]=\"true\" [tableData]=\"listService.dataTable$ | async\"></ht-data-table>-->\n  <tr class=\"clickable\" (click)=\"showUserDetail(row)\" *ngFor=\"let row of listService.dataTable$ | async\">\n    <td *ngFor=\"let item of row.values\">{{item}}</td>\n  </tr>\n  </tbody>\n</table>\n<div class=\"modal is-active\" *ngIf=\"selectedUser\">\n  <div class=\"modal-background\" (click)=\"closeModal()\"></div>\n  <div class=\"modal-card\">\n    <section class=\"modal-card-body\">\n      <ht-user-table [user]=\"selectedUser\">\n        <span *ngIf=\"!listService.hideDatePicker\">{{listService.dateRangeService$.display$ | async}}</span>\n      </ht-user-table>\n    </section>\n  </div>\n  <button class=\"modal-close is-large\" aria-label=\"close\" (click)=\"closeModal()\"></button>\n</div>\n",
                styles: [".clickable:hover{\n  -webkit-box-shadow:0px 0px 6px 1px #808080;\n          box-shadow:0px 0px 6px 1px #808080;\n  z-index:2; }\n"],
                changeDetection: ChangeDetectionStrategy.OnPush
            },] },
];
UsersAnalyticsListComponent.ctorParameters = function () { return []; };
UsersAnalyticsListComponent.propDecorators = {
    "listService": [{ type: Input },],
};
var UserTableComponent = /** @class */ (function () {
    function UserTableComponent() {
        this.excludedKey = [
            'name',
            'status',
            'photo',
            'created_at',
            'modified_at',
            'id',
            'availability_status',
            'location_status',
            'vehicle_type'
        ];
    }
    UserTableComponent.prototype.ngOnInit = function () {
    };
    Object.defineProperty(UserTableComponent.prototype, "tableData", {
        get: function () {
            return tableFormat(this.user, { excludes: this.excludedKey, format: userTableFormat });
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(UserTableComponent.prototype, "actionData", {
        get: function () {
            return tableFormat(this.user, { excludes: this.excludedKey, format: userTableFormat });
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(UserTableComponent.prototype, "currentUser", {
        get: function () {
            return this.action ? this.action.user : this.user;
        },
        enumerable: true,
        configurable: true
    });
    UserTableComponent.prototype.isKeyIncluded = function (key) {
        return !!!this.excludedKey.includes(key);
    };
    return UserTableComponent;
}());
UserTableComponent.decorators = [
    { type: Component, args: [{
                selector: 'ht-user-table',
                template: "<div class=\"level\">\n  <div class=\"level-left\">\n    <div class=\"level-item\">\n      <ht-profile [url]=\"user.photo\"></ht-profile>\n    </div>\n    <div class=\"level-item is-size-4 has-text-grey\">\n      {{user.name | nameCase}}\n    </div>\n  </div>\n  <div class=\"level-right\">\n    <ng-content></ng-content>\n  </div>\n</div>\n<ht-data-table [tableData]=\"tableData\"></ht-data-table>\n<!--<table class=\"table is-fullwidth is-bordered is-striped\">-->\n  <!--<tbody>-->\n  <!--<tr *ngFor=\"let row of tableData\">-->\n    <!--<td *ngFor=\"let item of row\">{{item}}</td>-->\n  <!--</tr>-->\n  <!--</tbody>-->\n<!--</table>-->\n",
                styles: [""],
                changeDetection: ChangeDetectionStrategy.OnPush
            },] },
];
UserTableComponent.ctorParameters = function () { return []; };
UserTableComponent.propDecorators = {
    "user": [{ type: Input },],
    "action": [{ type: Input },],
};
var DataTableComponent = /** @class */ (function () {
    function DataTableComponent() {
        this.clickable = false;
        this.select = new EventEmitter();
    }
    DataTableComponent.prototype.ngOnInit = function () {
    };
    DataTableComponent.prototype.selectRow = function (row) {
        if (this.clickable) {
            this.select.next(row);
        }
    };
    return DataTableComponent;
}());
DataTableComponent.decorators = [
    { type: Component, args: [{
                selector: 'ht-data-table',
                template: "<table class=\"table is-fullwidth is-bordered is-striped\">\n  <tbody>\n  <tr [class.clickable]=\"clickable\" (click)=\"selectRow(row)\" *ngFor=\"let row of tableData\">\n    <td *ngFor=\"let item of row\">{{item}}</td>\n  </tr>\n  </tbody>\n</table>\n",
                styles: [".clickable:hover{\n  -webkit-box-shadow:1px 1px grey;\n          box-shadow:1px 1px grey;\n  z-index:2; }\n"],
                changeDetection: ChangeDetectionStrategy.OnPush
            },] },
];
DataTableComponent.ctorParameters = function () { return []; };
DataTableComponent.propDecorators = {
    "tableData": [{ type: Input },],
    "clickable": [{ type: Input },],
    "select": [{ type: Output },],
};
var DataTableModule = /** @class */ (function () {
    function DataTableModule() {
    }
    return DataTableModule;
}());
DataTableModule.decorators = [
    { type: NgModule, args: [{
                imports: [
                    CommonModule
                ],
                declarations: [DataTableComponent],
                exports: [DataTableComponent]
            },] },
];
DataTableModule.ctorParameters = function () { return []; };
var UserTableModule = /** @class */ (function () {
    function UserTableModule() {
    }
    return UserTableModule;
}());
UserTableModule.decorators = [
    { type: NgModule, args: [{
                imports: [
                    CommonModule,
                    SharedModule,
                    DataTableModule
                ],
                declarations: [UserTableComponent],
                exports: [UserTableComponent]
            },] },
];
UserTableModule.ctorParameters = function () { return []; };
var UsersAnalyticsListModule = /** @class */ (function () {
    function UsersAnalyticsListModule() {
    }
    return UsersAnalyticsListModule;
}());
UsersAnalyticsListModule.decorators = [
    { type: NgModule, args: [{
                imports: [
                    CommonModule,
                    DateRangeModule,
                    UserTableModule,
                    DataTableModule,
                ],
                declarations: [UsersAnalyticsListComponent],
                exports: [UsersAnalyticsListComponent]
            },] },
];
UsersAnalyticsListModule.ctorParameters = function () { return []; };
var UsersListContainerComponent = /** @class */ (function () {
    function UsersListContainerComponent() {
        this.dateRangeService = new DateRange(DateRangeMap.today);
        this.date = DateRangeMap.today.start;
    }
    UsersListContainerComponent.prototype.ngOnInit = function () {
        this.options = {
            datePicker: true
        };
    };
    UsersListContainerComponent.prototype.dateChange = function (date) {
        this.date = date;
    };
    UsersListContainerComponent.prototype.rangeChange = function (range) {
        this.dateRangeService.setDateRange(range);
    };
    return UsersListContainerComponent;
}());
UsersListContainerComponent.decorators = [
    { type: Component, args: [{
                selector: 'ht-users-list-container',
                template: "<!--<button class=\"button\">-->\n  <!--{{dateRangeService.display$ | async}}-->\n<!--</button>-->\n<!--<ht-date-range-picker (onRangeChange)=\"rangeChange($event)\" [dateRange]=\"dateRangeService.data$ | async\"></ht-date-range-picker>-->\n<ht-date-range [dateRangeService]=\"dateRangeService\"></ht-date-range>\n",
                styles: [""]
            },] },
];
UsersListContainerComponent.ctorParameters = function () { return []; };
var UsersListContainerModule = /** @class */ (function () {
    function UsersListContainerModule() {
    }
    return UsersListContainerModule;
}());
UsersListContainerModule.decorators = [
    { type: NgModule, args: [{
                imports: [
                    CommonModule,
                    DateRangePickerModule,
                    DateRangeModule
                ],
                declarations: [UsersListContainerComponent],
                exports: [UsersListContainerComponent]
            },] },
];
UsersListContainerModule.ctorParameters = function () { return []; };
var GroupsComponent = /** @class */ (function () {
    function GroupsComponent() {
        this.groupIdParam = 'id';
    }
    GroupsComponent.prototype.ngOnInit = function () {
    };
    return GroupsComponent;
}());
GroupsComponent.decorators = [
    { type: Component, args: [{
                selector: 'ht-groups',
                template: "<div class=\"card-stack\">\n  <a [routerLink]=\"['/groups', group[groupIdParam]]\" class=\"card\" *ngFor=\"let group of groups\">\n    <div class=\"card-content-mid\">\n      {{group.name}}\n    </div>\n  </a>\n</div>\n",
                styles: [".text-center{\n  text-align:center;\n}\n.text-muted{\n  color:#798E9B;\n}\n.text-right{\n  text-align:right;\n}\n.text-left{\n  text-align:left;\n}\n.text-1{\n  font-size:2em;\n}\n.text-4{\n  font-size:0.8em;\n}\n.text-capitalize{\n  text-transform:capitalize;\n}\n.text-uppercase{\n  text-transform:uppercase;\n}\n.text-ontime{\n  color:#58ae5b;\n}\n.text-late{\n  color:#E6413E;\n}\n.text-warning{\n  color:#E6413E !important;\n}\n.text-red{\n  color:#E6413E;\n}\n.text-blue{\n  color:#5496F8;\n}\n.truncate{\n  white-space:nowrap;\n  overflow:hidden;\n  text-overflow:ellipsis;\n}\n.flex-row{\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  -webkit-box-orient:horizontal;\n  -webkit-box-direction:normal;\n      -ms-flex-direction:row;\n          flex-direction:row;\n}\n.flex-column{\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  -webkit-box-orient:vertical;\n  -webkit-box-direction:normal;\n      -ms-flex-direction:column;\n          flex-direction:column;\n}\n.column-gap-4 > :not(:last-child){\n  margin-bottom:4px;\n}\n.row-gap-4 > :not(:last-child){\n  margin-right:4px;\n}\n.column-gap-7 > :not(:last-child){\n  margin-bottom:7px;\n}\n.row-gap-7 > :not(:last-child){\n  margin-right:7px;\n}\n.column-gap-10 > :not(:last-child){\n  margin-bottom:10px;\n}\n.row-gap-10 > :not(:last-child){\n  margin-right:10px;\n}\n.column-gap-20 > :not(:last-child){\n  margin-bottom:20px;\n}\n.row-gap-20 > :not(:last-child){\n  margin-right:20px;\n}\n.wrap{\n  -ms-flex-wrap:wrap;\n      flex-wrap:wrap;\n}\n.flex{\n  -webkit-box-flex:1;\n      -ms-flex:1;\n          flex:1;\n}\n.auto{\n  margin:auto;\n}\n.relative{\n  position:relative;\n}\n.space-between{\n  -webkit-box-pack:justify;\n      -ms-flex-pack:justify;\n          justify-content:space-between;\n}\n.space-around{\n  -ms-flex-pack:distribute;\n      justify-content:space-around;\n}\n.justify-center{\n  -webkit-box-pack:center;\n      -ms-flex-pack:center;\n          justify-content:center;\n}\n.flex-center{\n  -webkit-box-align:center;\n      -ms-flex-align:center;\n          align-items:center;\n}\n.align-center{\n  -webkit-box-align:center;\n      -ms-flex-align:center;\n          align-items:center;\n}\n.clickable{\n  cursor:pointer;\n}\n.round-icon{\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  width:23px;\n  height:23px;\n  background:#315790;\n  border-radius:50%;\n}\n.flex-half{\n  -ms-flex-preferred-size:50%;\n      flex-basis:50%;\n}\n.link-unstyled{\n  color:inherit;\n}\n.link-unstyled:hover{\n  text-decoration:none;\n}\n.half{\n  width:50%;\n}\n.noselect{\n  -webkit-touch-callout:none;\n  -webkit-user-select:none;\n  -moz-user-select:none;\n  -ms-user-select:none;\n  user-select:none;\n}\n.hover-shadow:hover{\n  -webkit-box-shadow:0px 0px 4px 2px rgba(0, 0, 0, 0.16);\n          box-shadow:0px 0px 4px 2px rgba(0, 0, 0, 0.16);\n}\n.marker-transparent{\n  opacity:0.4;\n}\n.marker-fade{\n  -webkit-filter:contrast(16%) brightness(160%) blur(0.6px);\n          filter:contrast(16%) brightness(160%) blur(0.6px);\n}\n.tooltip-warning{\n  background:#e04745;\n  color:#fff;\n}\n.tooltip-warning-arrow{\n  border-right-color:#e04745 !important;\n}\n.tooltip-info{\n  background:#5496F8;\n  color:#fff;\n}\n.tooltip-info-arrow{\n  border-right-color:#5496F8 !important;\n}\na{\n  color:inherit;\n  text-decoration:none;\n}\na:hover{\n  color:inherit;\n  text-decoration:none;\n}\na:active{\n  color:inherit;\n  text-decoration:none;\n}\na:focus{\n  outline:none;\n  color:inherit;\n  text-decoration:none;\n}\n.spinner-wave{\n  margin:0 auto;\n  width:100px;\n  height:20px;\n  text-align:center;\n}\n.spinner-wave > div{\n  background-color:#5496F8;\n  height:100%;\n  width:6px;\n  display:inline-block;\n  -webkit-animation:wave 1.2s infinite ease-in-out;\n  animation:wave 1.2s infinite ease-in-out;\n}\n.spinner-wave div:nth-child(2){\n  -webkit-animation-delay:-1.1s;\n  animation-delay:-1.1s;\n}\n.spinner-wave div:nth-child(3){\n  -webkit-animation-delay:-1s;\n  animation-delay:-1s;\n}\n.spinner-wave div:nth-child(4){\n  -webkit-animation-delay:-0.9s;\n  animation-delay:-0.9s;\n}\n.spinner-wave div:nth-child(5){\n  -webkit-animation-delay:-0.8s;\n  animation-delay:-0.8s;\n}\n@-webkit-keyframes wave{\n  0%,\n  40%,\n  100%{\n    -webkit-transform:scaleY(0.4);\n  }\n  20%{\n    -webkit-transform:scaleY(1);\n  }\n}\n@keyframes wave{\n  0%,\n  40%,\n  100%{\n    -webkit-transform:scaleY(0.4);\n            transform:scaleY(0.4);\n  }\n  20%{\n    -webkit-transform:scaleY(1);\n            transform:scaleY(1);\n  }\n}\n@media screen and (max-width: 480px){\n  .hide-xs{\n    display:none !important;\n  }\n}\n@media screen and (min-width: 480px){\n  .show-xs{\n    display:none !important;\n  }\n}\n.ht-btn{\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  -webkit-box-align:center;\n      -ms-flex-align:center;\n          align-items:center;\n  padding:5px 13px;\n  border:0;\n  background:#ffffff;\n  color:#52616A;\n  -webkit-box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12);\n          box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12);\n}\n.ht-btn:focus{\n  background:#fcfcfc;\n  outline:0;\n}\n.ht-btn-card:hover{\n  background:#5496F8;\n  color:rgba(255, 255, 255, 0.96);\n  -webkit-box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12);\n          box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12);\n}\n.stopped-color{\n  color:#FFBB44;\n}\n.drive-color{\n  color:#5496F8;\n}\n.walk-color{\n  color:#5496F8;\n}\n.moving-color{\n  color:#5496F8;\n}\n.logged_off-color{\n  color:#A9BAC4;\n}\n.network_offline-color{\n  color:#d19191;\n}\n.location_disabled-color{\n  color:#d19191;\n}\n.location_low_accuracy-color{\n  color:#d19191;\n}\n.stopped-bg{\n  background:#FFBB44;\n}\n.drive-bg{\n  background:#5496F8;\n}\n.walk-bg{\n  background:#5496F8;\n}\n.moving-bg{\n  background:#5496F8;\n}\n.logged_off-bg{\n  background:#A9BAC4;\n}\n.network_offline-bg{\n  background:#d19191;\n}\n.location_disabled-bg{\n  background-color:#d19191;\n}\n.location_low_accuracy-bg{\n  background-color:#d19191;\n}\n.card-stack{\n  max-width:500px;\n  margin:auto;\n}\n"]
            },] },
];
GroupsComponent.ctorParameters = function () { return []; };
GroupsComponent.propDecorators = {
    "groups": [{ type: Input },],
    "groupIdParam": [{ type: Input },],
};
var GroupsModule = /** @class */ (function () {
    function GroupsModule() {
    }
    return GroupsModule;
}());
GroupsModule.decorators = [
    { type: NgModule, args: [{
                imports: [
                    CommonModule,
                    RouterModule
                ],
                declarations: [GroupsComponent],
                exports: [GroupsComponent]
            },] },
];
GroupsModule.ctorParameters = function () { return []; };
var GroupsContainerComponent = /** @class */ (function () {
    function GroupsContainerComponent(groupsClient) {
        this.groupsClient = groupsClient;
        this.groupIdParam = 'id';
    }
    GroupsContainerComponent.prototype.ngOnInit = function () {
        this.groupsClient.list.setActive();
        this.groups$ = this.groupsClient.list.dataArray$;
    };
    return GroupsContainerComponent;
}());
GroupsContainerComponent.decorators = [
    { type: Component, args: [{
                selector: 'ht-groups-container',
                template: "<div class=\"container\" *ngIf=\"groups$ | async as groups\">\n  <ht-groups [groupIdParam]=\"groupIdParam\" [groups]=\"groups\"></ht-groups>\n</div>\n",
                styles: [".container{\n  width:100%;\n}\n"]
            },] },
];
GroupsContainerComponent.ctorParameters = function () { return [
    { type: HtGroupsService, },
]; };
GroupsContainerComponent.propDecorators = {
    "groupIdParam": [{ type: Input },],
};
var GroupsContainerModule = /** @class */ (function () {
    function GroupsContainerModule() {
    }
    return GroupsContainerModule;
}());
GroupsContainerModule.decorators = [
    { type: NgModule, args: [{
                imports: [
                    CommonModule,
                    GroupsModule
                ],
                declarations: [GroupsContainerComponent],
                exports: [GroupsContainerComponent]
            },] },
];
GroupsContainerModule.ctorParameters = function () { return []; };
var GroupsChartService = /** @class */ (function () {
    function GroupsChartService(groupsService) {
        this.groupsService = groupsService;
        this.selectedGroups$ = new BehaviorSubject([]);
        this.groupsLevelsEntity$ = new BehaviorSubject({});
        this.setGroupsLevels();
        this.groupsLevels$ = combineLatest(this.selectedGroups$, this.groupsLevelsEntity$, function (selectedGroups, groupslevelsEntity) {
            return selectedGroups.map(function (group) {
                var id = group ? group.id : null;
                return id && groupslevelsEntity[id] ? groupslevelsEntity[id] : null;
            });
        });
    }
    GroupsChartService.prototype.setRootGroupId = function (groupId) {
        var _this = this;
        this.selectedGroups$.pipe(take(1), filter(function (groups) {
            var firstGroup = groups && groups[0] ? groups[0] : null;
            var id = firstGroup ? firstGroup.id : null;
            return id !== groupId || (groupId == null && !groups.length);
        }), switchMap(function () {
            return groupId ? _this.groupsService.item.api$(groupId) : of(null);
        })).subscribe(function (group) {
            _this.setSelectedGroup(group, 0);
        });
    };
    
    GroupsChartService.prototype.setSelectedGroup = function (group, level) {
        var _this = this;
        this.selectedGroups$.asObservable().pipe(take(1), map$1(function (selectedGroups) {
            selectedGroups.splice(level);
            selectedGroups.push(group);
            return selectedGroups;
        })).subscribe(function (selectedGroups) {
            _this.selectedGroups$.next(selectedGroups);
        });
    };
    
    GroupsChartService.prototype.setGroupsLevels = function () {
        var _this = this;
        if (this.groupsSub)
            return false;
        this.groupsSub = this.selectedGroups$.pipe(filter(function (data) { return !!data.length; }), withLatestFrom(this.groupsLevelsEntity$), switchMap(function (_a) {
            var _b = __read(_a, 2), selectedGroups = _b[0], groupsLevels = _b[1];
            var level = selectedGroups.length;
            var lastSelectedGroup = level && selectedGroups.length ? selectedGroups[level - 1] : null;
            var lastId = lastSelectedGroup ? lastSelectedGroup.id : null;
            groupsLevels = selectedGroups.reduce(function (acc, group) {
                var groupId = group ? group.id : null;
                return groupId && groupsLevels[groupId] ? Object.assign({}, acc, (_a = {}, _a[groupId] = groupsLevels[groupId], _a)) : acc;
                var _a;
            }, {});
            if (lastId && groupsLevels[lastId]) {
                return of(groupsLevels);
            }
            else {
                return _this.getGroups(lastId).pipe(map$1(function (groupsPage) {
                    return lastId ? Object.assign({}, groupsLevels, (_a = {}, _a[lastId] = groupsPage.results, _a)) : groupsLevels;
                    var _a;
                }));
            }
        })).subscribe(function (data) {
            _this.groupsLevelsEntity$.next(data);
        });
    };
    
    GroupsChartService.prototype.getGroups = function (parentId) {
        return parentId ? this.groupsService.getChildren(parentId) : this.groupsService.getRoot();
    };
    GroupsChartService.prototype.setLevel = function (level) {
        var _this = this;
        this.selectedGroups$.asObservable().pipe(take(1), map$1(function (selectedGroups) {
            selectedGroups.splice(level + 1);
            return selectedGroups;
        })).subscribe(function (selectedGroups) {
            _this.selectedGroups$.next(selectedGroups);
        });
    };
    return GroupsChartService;
}());
GroupsChartService.decorators = [
    { type: Injectable },
];
GroupsChartService.ctorParameters = function () { return [
    { type: HtGroupsService, },
]; };
var GroupsChartContainerComponent = /** @class */ (function () {
    function GroupsChartContainerComponent(groupsChartService) {
        this.groupsChartService = groupsChartService;
        this.loading = false;
        this.onGroup = new EventEmitter();
    }
    GroupsChartContainerComponent.prototype.ngOnInit = function () {
        var groupId = this.groupId ? this.groupId : null;
        this.groupsChartService.setRootGroupId(groupId);
    };
    Object.defineProperty(GroupsChartContainerComponent.prototype, "selectedGroups$", {
        get: function () {
            return this.groupsChartService.selectedGroups$;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(GroupsChartContainerComponent.prototype, "groupsLevels$", {
        get: function () {
            return this.groupsChartService.groupsLevels$;
        },
        enumerable: true,
        configurable: true
    });
    GroupsChartContainerComponent.prototype.setGroup = function (group) {
        this.onGroup.next(group);
    };
    GroupsChartContainerComponent.prototype.selectGroup = function (group, level, event) {
        var id = group.id;
        event.stopPropagation();
        event.preventDefault();
        this.groupsChartService.setSelectedGroup(group, level + 1);
    };
    return GroupsChartContainerComponent;
}());
GroupsChartContainerComponent.decorators = [
    { type: Component, args: [{
                selector: 'ht-groups-chart-container',
                template: "<ng-container *ngIf=\"selectedGroups$ | async as selectedGroups\">\n  <nav class=\"breadcrumb has-arrow-separator\" aria-label=\"breadcrumbs\">\n    <ul>\n      <li [class.is-active]=\"l\" (click)=\"groupsChartService.setLevel(i)\" *ngFor=\"let group of selectedGroups; let l = last; let i = index\">\n        <a *ngIf=\"group; else root\">\n          <span>{{group.name}}</span>\n        </a>\n        <ng-template #root>\n          <a>\n            <span class=\"icon is-small\"><i class=\"fa fa-home\"></i></span>\n            <span>Root groups</span>\n          </a>\n        </ng-template>\n      </li>\n    </ul>\n  </nav>\n  <div class=\"container\">\n    <ng-template #notFound>\n      <div>\n        No Group found\n      </div>\n    </ng-template>\n    <div class=\"flex-row wrap group-container\" *ngIf=\"!error\">\n      <div class=\"flex-column group-container-list bar card-stack\" *ngFor=\"let groups of groupsLevels$ | async; let i = index\">\n        <div class=\"text-center ht-level\">\n          <span class=\"\">Level {{i + 1}}</span>\n        </div>\n        <div class=\"flex-column\" *ngIf=\"groups; else empty\">\n          <div (click)=\"setGroup(group)\" class=\"card card-clickable is-primary\" [class.card-active]=\"selectedGroups[i + 1] && selectedGroups[i + 1].id == group.id\" *ngFor=\"let group of groups\">\n            <div class=\"card-content is-primary flex-row\">\n              <div class=\"flex\">\n                {{group.name}}\n              </div>\n              <div (click)=\"selectGroup(group, i, $event)\" class=\"button is-small is-primary\">\n                <div class=\"icon\">\n                  <i class=\"fa fa-angle-right\"></i>\n                </div>\n              </div>\n            </div>\n          </div>\n          <div class=\"card card-content has-text-grey-light has-text-centered\" *ngIf=\"groups.length == 0\">\n            No Sub-group\n          </div>\n        </div>\n        <ng-template #empty>\n          <h3 class=\"text-center msg bar has-text-grey-light has-text-centered\">\n            Loading\n          </h3>\n        </ng-template>\n      </div>\n    </div>\n  </div>\n</ng-container>\n",
                styles: [".bar{\n  width:200px;\n  min-width:200px;\n}\n.card-content{\n  padding:10px 13px;\n}\n.card-active{\n  background-color:#5496F8;\n  color:white !important;\n}\n.card-active .button{\n  display:none;\n}\n.action{\n  background:#798E9B;\n  color:white;\n  padding:0 8px;\n  border-radius:3px;\n}\n.action:hover{\n  background-color:#52616A;\n}\n.group-container{\n  margin:20px 0;\n}\n.group-container-list{\n  margin:20px 0;\n}\n.msg{\n  margin-top:60px;\n}\n.ht-level{\n  padding:8px 16px;\n  background-color:#52616A;\n  color:white;\n}\na:focus{\n  color:initial;\n}\n.breadcrumb{\n  padding:0 30px;\n  background-color:#fff;\n  border-bottom:1px solid #C9D6DE;\n}\n.groups-list{\n  max-height:400px;\n  overflow:auto;\n}\n"]
            },] },
];
GroupsChartContainerComponent.ctorParameters = function () { return [
    { type: GroupsChartService, },
]; };
GroupsChartContainerComponent.propDecorators = {
    "groupId": [{ type: Input },],
    "onGroup": [{ type: Output },],
};
var GroupsChartContainerModule = /** @class */ (function () {
    function GroupsChartContainerModule() {
    }
    return GroupsChartContainerModule;
}());
GroupsChartContainerModule.decorators = [
    { type: NgModule, args: [{
                imports: [
                    CommonModule,
                    SharedModule,
                    RouterModule
                ],
                declarations: [GroupsChartContainerComponent],
                exports: [GroupsChartContainerComponent],
                providers: [GroupsChartService]
            },] },
];
GroupsChartContainerModule.ctorParameters = function () { return []; };
var PlacelineMapContainerComponent = /** @class */ (function () {
    function PlacelineMapContainerComponent(userClientService, mapService) {
        this.userClientService = userClientService;
        this.mapService = mapService;
        this.showSidebar = true;
    }
    PlacelineMapContainerComponent.prototype.ngOnInit = function () {
        this.userClientService.placeline.setId(this.userId);
    };
    return PlacelineMapContainerComponent;
}());
PlacelineMapContainerComponent.decorators = [
    { type: Component, args: [{
                selector: 'ht-placeline-map-container',
                template: "<div class=\"ht-container\">\n  <div class=\"bar\" *ngIf=\"showSidebar\">\n    <ht-placeline-container [userId]=\"userId\"></ht-placeline-container>\n  </div>\n  <div class=\"flex\">\n    <ht-map-container [showLoading]=\"false\"></ht-map-container>\n  </div>\n</div>\n",
                styles: [".text-center{\n  text-align:center;\n}\n.text-muted{\n  color:#798E9B;\n}\n.text-right{\n  text-align:right;\n}\n.text-left{\n  text-align:left;\n}\n.text-1{\n  font-size:2em;\n}\n.text-4{\n  font-size:0.8em;\n}\n.text-capitalize{\n  text-transform:capitalize;\n}\n.text-uppercase{\n  text-transform:uppercase;\n}\n.text-ontime{\n  color:#58ae5b;\n}\n.text-late{\n  color:#E6413E;\n}\n.text-warning{\n  color:#E6413E !important;\n}\n.text-red{\n  color:#E6413E;\n}\n.text-blue{\n  color:#5496F8;\n}\n.truncate{\n  white-space:nowrap;\n  overflow:hidden;\n  text-overflow:ellipsis;\n}\n.flex-row{\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  -webkit-box-orient:horizontal;\n  -webkit-box-direction:normal;\n      -ms-flex-direction:row;\n          flex-direction:row;\n}\n.flex-column{\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  -webkit-box-orient:vertical;\n  -webkit-box-direction:normal;\n      -ms-flex-direction:column;\n          flex-direction:column;\n}\n.column-gap-4 > :not(:last-child){\n  margin-bottom:4px;\n}\n.row-gap-4 > :not(:last-child){\n  margin-right:4px;\n}\n.column-gap-7 > :not(:last-child){\n  margin-bottom:7px;\n}\n.row-gap-7 > :not(:last-child){\n  margin-right:7px;\n}\n.column-gap-10 > :not(:last-child){\n  margin-bottom:10px;\n}\n.row-gap-10 > :not(:last-child){\n  margin-right:10px;\n}\n.column-gap-20 > :not(:last-child){\n  margin-bottom:20px;\n}\n.row-gap-20 > :not(:last-child){\n  margin-right:20px;\n}\n.wrap{\n  -ms-flex-wrap:wrap;\n      flex-wrap:wrap;\n}\n.flex{\n  -webkit-box-flex:1;\n      -ms-flex:1;\n          flex:1;\n}\n.auto{\n  margin:auto;\n}\n.relative{\n  position:relative;\n}\n.space-between{\n  -webkit-box-pack:justify;\n      -ms-flex-pack:justify;\n          justify-content:space-between;\n}\n.space-around{\n  -ms-flex-pack:distribute;\n      justify-content:space-around;\n}\n.justify-center{\n  -webkit-box-pack:center;\n      -ms-flex-pack:center;\n          justify-content:center;\n}\n.flex-center{\n  -webkit-box-align:center;\n      -ms-flex-align:center;\n          align-items:center;\n}\n.align-center{\n  -webkit-box-align:center;\n      -ms-flex-align:center;\n          align-items:center;\n}\n.clickable{\n  cursor:pointer;\n}\n.round-icon{\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  width:23px;\n  height:23px;\n  background:#315790;\n  border-radius:50%;\n}\n.flex-half{\n  -ms-flex-preferred-size:50%;\n      flex-basis:50%;\n}\n.link-unstyled{\n  color:inherit;\n}\n.link-unstyled:hover{\n  text-decoration:none;\n}\n.half{\n  width:50%;\n}\n.noselect{\n  -webkit-touch-callout:none;\n  -webkit-user-select:none;\n  -moz-user-select:none;\n  -ms-user-select:none;\n  user-select:none;\n}\n.hover-shadow:hover{\n  -webkit-box-shadow:0px 0px 4px 2px rgba(0, 0, 0, 0.16);\n          box-shadow:0px 0px 4px 2px rgba(0, 0, 0, 0.16);\n}\n.marker-transparent{\n  opacity:0.4;\n}\n.marker-fade{\n  -webkit-filter:contrast(16%) brightness(160%) blur(0.6px);\n          filter:contrast(16%) brightness(160%) blur(0.6px);\n}\n.tooltip-warning{\n  background:#e04745;\n  color:#fff;\n}\n.tooltip-warning-arrow{\n  border-right-color:#e04745 !important;\n}\n.tooltip-info{\n  background:#5496F8;\n  color:#fff;\n}\n.tooltip-info-arrow{\n  border-right-color:#5496F8 !important;\n}\na{\n  color:inherit;\n  text-decoration:none;\n}\na:hover{\n  color:inherit;\n  text-decoration:none;\n}\na:active{\n  color:inherit;\n  text-decoration:none;\n}\na:focus{\n  outline:none;\n  color:inherit;\n  text-decoration:none;\n}\n.spinner-wave{\n  margin:0 auto;\n  width:100px;\n  height:20px;\n  text-align:center;\n}\n.spinner-wave > div{\n  background-color:#5496F8;\n  height:100%;\n  width:6px;\n  display:inline-block;\n  -webkit-animation:wave 1.2s infinite ease-in-out;\n  animation:wave 1.2s infinite ease-in-out;\n}\n.spinner-wave div:nth-child(2){\n  -webkit-animation-delay:-1.1s;\n  animation-delay:-1.1s;\n}\n.spinner-wave div:nth-child(3){\n  -webkit-animation-delay:-1s;\n  animation-delay:-1s;\n}\n.spinner-wave div:nth-child(4){\n  -webkit-animation-delay:-0.9s;\n  animation-delay:-0.9s;\n}\n.spinner-wave div:nth-child(5){\n  -webkit-animation-delay:-0.8s;\n  animation-delay:-0.8s;\n}\n@-webkit-keyframes wave{\n  0%,\n  40%,\n  100%{\n    -webkit-transform:scaleY(0.4);\n  }\n  20%{\n    -webkit-transform:scaleY(1);\n  }\n}\n@keyframes wave{\n  0%,\n  40%,\n  100%{\n    -webkit-transform:scaleY(0.4);\n            transform:scaleY(0.4);\n  }\n  20%{\n    -webkit-transform:scaleY(1);\n            transform:scaleY(1);\n  }\n}\n@media screen and (max-width: 480px){\n  .hide-xs{\n    display:none !important;\n  }\n}\n@media screen and (min-width: 480px){\n  .show-xs{\n    display:none !important;\n  }\n}\n.ht-btn{\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  -webkit-box-align:center;\n      -ms-flex-align:center;\n          align-items:center;\n  padding:5px 13px;\n  border:0;\n  background:#ffffff;\n  color:#52616A;\n  -webkit-box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12);\n          box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12);\n}\n.ht-btn:focus{\n  background:#fcfcfc;\n  outline:0;\n}\n.ht-btn-card:hover{\n  background:#5496F8;\n  color:rgba(255, 255, 255, 0.96);\n  -webkit-box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12);\n          box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12);\n}\n.stopped-color{\n  color:#FFBB44;\n}\n.drive-color{\n  color:#5496F8;\n}\n.walk-color{\n  color:#5496F8;\n}\n.moving-color{\n  color:#5496F8;\n}\n.logged_off-color{\n  color:#A9BAC4;\n}\n.network_offline-color{\n  color:#d19191;\n}\n.location_disabled-color{\n  color:#d19191;\n}\n.location_low_accuracy-color{\n  color:#d19191;\n}\n.stopped-bg{\n  background:#FFBB44;\n}\n.drive-bg{\n  background:#5496F8;\n}\n.walk-bg{\n  background:#5496F8;\n}\n.moving-bg{\n  background:#5496F8;\n}\n.logged_off-bg{\n  background:#A9BAC4;\n}\n.network_offline-bg{\n  background:#d19191;\n}\n.location_disabled-bg{\n  background-color:#d19191;\n}\n.location_low_accuracy-bg{\n  background-color:#d19191;\n}\n.ht-container{\n  width:100%;\n  height:100%;\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  -webkit-box-orient:horizontal;\n  -webkit-box-direction:normal;\n      -ms-flex-direction:row;\n          flex-direction:row;\n  min-height:100%;\n}\n.ht-container .bar{\n  -webkit-box-flex:1;\n      -ms-flex:1;\n          flex:1;\n  max-width:400px;\n  min-height:100%;\n  height:100%;\n  overflow:auto;\n}\n"]
            },] },
];
PlacelineMapContainerComponent.ctorParameters = function () { return [
    { type: HtUsersService, },
    { type: HtMapService, },
]; };
PlacelineMapContainerComponent.propDecorators = {
    "userId": [{ type: Input },],
    "showSidebar": [{ type: Input },],
};
var PlacelineMapContainerModule = /** @class */ (function () {
    function PlacelineMapContainerModule() {
    }
    return PlacelineMapContainerModule;
}());
PlacelineMapContainerModule.decorators = [
    { type: NgModule, args: [{
                imports: [
                    CommonModule,
                    MapContainerModule,
                    PlacelineContainerModule
                ],
                declarations: [PlacelineMapContainerComponent],
                exports: [PlacelineMapContainerComponent]
            },] },
];
PlacelineMapContainerModule.ctorParameters = function () { return []; };
var destroy$ = Symbol('destroy$');
var untilDestroy = function (component) { return function (source) {
    if (component[destroy$] === undefined) {
        addDestroyObservableToComponent(component);
    }
    return source.pipe(takeUntil(component[destroy$]));
}; };
function addDestroyObservableToComponent(component) {
    component[destroy$] = new Observable(function (observer) {
        var orignalDestroy = component.ngOnDestroy;
        if (orignalDestroy === undefined) {
            throw new Error('untilDestroy operator needs the component to have an ngOnDestroy method');
        }
        component.ngOnDestroy = function () {
            observer.next();
            observer.complete();
            orignalDestroy.call(component);
        };
        return function (_) { return (component[destroy$] = undefined); };
    });
}
var ActionsStatusGraphComponent = /** @class */ (function () {
    function ActionsStatusGraphComponent() {
        this.noData = false;
    }
    ActionsStatusGraphComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.service.data$.pipe(untilDestroy(this))
            .subscribe(function (data) {
            _this.setChart(data);
        });
    };
    ActionsStatusGraphComponent.prototype.ngAfterViewInit = function () {
    };
    ActionsStatusGraphComponent.prototype.setChart = function (data) {
        if (data.labels.length <= 1) {
            this.noData = true;
            return false;
        }
        if (this.chart) {
            this.noData = false;
            var labels = data.labels;
            var dataset = data.datasets;
            this.chart.update_values(dataset, labels);
            var type = data.labels.length > 1 ? 'line' : 'bar';
        }
        else {
            this.chart = new Chart({
                parent: this.charElem.nativeElement,
                data: data,
                type: 'line',
                height: 250,
                is_series: 1,
                colors: ['#60c1fd', 'red'],
                region_fill: 1,
                format_tooltip_x: function (d) {
                    return d;
                },
                format_tooltip_y: function (d) { return d; }
            });
        }
    };
    ActionsStatusGraphComponent.prototype.ngOnDestroy = function () {
    };
    return ActionsStatusGraphComponent;
}());
ActionsStatusGraphComponent.decorators = [
    { type: Component, args: [{
                selector: 'ht-actions-status-graph',
                template: "<!--<div class=\"level\">-->\n  <!--<div class=\"level-left\">-->\n    <!--<div class=\"level-item has-text-weight-bold has-text-primary\">-->\n      <!--{{service.title}}-->\n    <!--</div>-->\n  <!--</div>-->\n  <!--<div class=\"level-right\">-->\n    <!--<div class=\"level-item\">-->\n      <!--<ht-date-range [showSingleDay]=\"false\" [dateRangeService$]=\"service.dateRangeService$\"></ht-date-range>-->\n    <!--</div>-->\n  <!--</div>-->\n<!--</div>-->\n<div #chart id=\"chart\"></div>\n<!--<div class=\"chart-container\">-->\n  <!---->\n  <!--<div class=\"loading-page\" *ngIf=\"service.client.loading$ | async\">-->\n    <!--<div class=\"icon auto has-text-grey-light\">-->\n      <!--<i class=\"fa fa-circle-o-notch fa-spin fa-3x fa-fw\"></i>-->\n    <!--</div>-->\n  <!--</div>-->\n  <!---->\n<!--</div>-->\n",
                styles: ["#chart{\n  width:100%; }\n.loading-page{\n  background:#ffffff96;\n  position:absolute;\n  height:100%;\n  width:100%;\n  top:0;\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex; }\n.chart-container{\n  min-height:300px; }\n"],
                changeDetection: ChangeDetectionStrategy.OnPush
            },] },
];
ActionsStatusGraphComponent.ctorParameters = function () { return []; };
ActionsStatusGraphComponent.propDecorators = {
    "service": [{ type: Input },],
    "charElem": [{ type: ViewChild, args: ['chart',] },],
};
var ActionsStatusGraphModule = /** @class */ (function () {
    function ActionsStatusGraphModule() {
    }
    return ActionsStatusGraphModule;
}());
ActionsStatusGraphModule.decorators = [
    { type: NgModule, args: [{
                imports: [
                    CommonModule,
                    DateRangeModule,
                ],
                declarations: [ActionsStatusGraphComponent],
                exports: [ActionsStatusGraphComponent]
            },] },
];
ActionsStatusGraphModule.ctorParameters = function () { return []; };
var UsersAnalyticsListService = /** @class */ (function () {
    function UsersAnalyticsListService(config) {
        this.component = UsersAnalyticsListComponent;
        this.className = "is-6";
        this.tags = ['users'];
        this.initState(config);
        this.initClient(config);
    }
    UsersAnalyticsListService.prototype.initState = function (config) {
        this.dateRangeService$ = dateRangeFactory(config.initialDateRange || DateRangeMap.last_7_days);
        this.title = config.title;
        this.tableFormat = config.tableFormat;
        this.query = config.query;
        this.columns = this.tableFormat.map(function (data) { return data.label; });
        this.hideDatePicker = config.hideDatePicker;
        if (config.tags && config.tags.length)
            this.tags = __spread(this.tags, config.tags);
    };
    UsersAnalyticsListService.prototype.initClient = function (config) {
        var _this = this;
        var userClient = usersClientFactory({ dateRange: this.dateRangeService$ });
        this.client = userClient.list;
        this.client.updateStrategy = config.updateStrategy || "once";
        this.client.setQuery(this.query);
        this.loading$ = this.client.loading$;
        var data$ = this.client.dataArray$;
        this.dataTable$ = data$.pipe(filter(function (data) { return !!data; }), map$1(function (users) {
            _this.noData = users.length ? false : true;
            return users.map(function (user) {
                var values = _this.tableFormat.map(function (data) { return data.selector(user); });
                return { data: user, values: values };
            });
        }));
    };
    
    UsersAnalyticsListService.prototype.setData = function (instance) {
        instance.listService = this;
    };
    UsersAnalyticsListService.prototype.setActive = function (isActive) {
        if (isActive === void 0) { isActive = true; }
        this.client.setActive(isActive);
    };
    return UsersAnalyticsListService;
}());
UsersAnalyticsListService.decorators = [
    { type: Injectable },
];
UsersAnalyticsListService.ctorParameters = function () { return [
    null,
]; };
var UsersSummaryService = /** @class */ (function () {
    function UsersSummaryService(config) {
        this.component = UsersSummaryChartComponent;
        this.className = 'is-6';
        this.tags = ['users', 'live'];
        this.hideDatePicker = true;
        this.noData = false;
        this.minHeight = 50;
        this.setState(config);
    }
    UsersSummaryService.prototype.setData = function (instance) {
        instance.service = this;
    };
    UsersSummaryService.prototype.setState = function (config) {
        this.dateRangeService$ = dateRangeFactory(DateRangeMap.last_30_days);
        this.title = config.title;
        var client = config.client || usersClientFactory({ dateRange: this.dateRangeService$ });
        client.setShowAll();
        this.client = client.summary;
        this.loading$ = this.client.loading$;
        this.summary$ = client.listStatusChart$(config.queryLabels);
    };
    UsersSummaryService.prototype.destroy = function () {
        this.client.destroy();
    };
    UsersSummaryService.prototype.setActive = function (isActive) {
        if (isActive === void 0) { isActive = true; }
        this.client.setActive(isActive);
    };
    return UsersSummaryService;
}());
UsersSummaryService.decorators = [
    { type: Injectable },
];
UsersSummaryService.ctorParameters = function () { return [
    null,
]; };
var AnalyticsMapContainerComponent = /** @class */ (function () {
    function AnalyticsMapContainerComponent() {
        this.mapOptions = {
            scrollWheelZoom: false
        };
    }
    AnalyticsMapContainerComponent.prototype.ngOnInit = function () {
    };
    return AnalyticsMapContainerComponent;
}());
AnalyticsMapContainerComponent.decorators = [
    { type: Component, args: [{
                selector: 'ht-analytics-map-container',
                template: "<ht-map [options]=\"mapOptions\" [loading]=\"service.mapLoading$ | async\" [mapInstance]=\"service.mapInstance\"></ht-map>\n",
                styles: [":host{\n  height:500px;\n  width:100%; }\nht-map{\n  height:400px;\n  width:100%; }\n"]
            },] },
];
AnalyticsMapContainerComponent.ctorParameters = function () { return []; };
AnalyticsMapContainerComponent.propDecorators = {
    "service": [{ type: Input },],
};
var StopsHeatmapService = /** @class */ (function () {
    function StopsHeatmapService(config) {
        this.component = AnalyticsMapContainerComponent;
        this.className = "is-6";
        this.tags = ['users'];
        this.noData = false;
        this.loading$ = of(false);
        this.mapInstance = new MapInstance();
        this.setMapType(mapTypeService.getInstance().mapType);
        this.initClient(config);
    }
    StopsHeatmapService.prototype.setMapType = function (mapType) {
        this.mapInstance.setMapType(mapType);
    };
    StopsHeatmapService.prototype.setData = function (instance) {
        instance.service = this;
    };
    
    StopsHeatmapService.prototype.setActive = function (active) {
        if (active === void 0) { active = true; }
        this.client.setActive(active);
    };
    StopsHeatmapService.prototype.initClient = function (config) {
        var _this = this;
        this.dateRangeService$ = dateRangeFactory(config.initialDateRange || DateRangeMap.last_7_days);
        this.title = config.title;
        var userClient = usersClientFactory({ dateRange: this.dateRangeService$ });
        this.client = userClient.heatmap;
        this.mapLoading$ = this.client.loading$;
        this.data$ = this.client.data$.pipe(tap(function (data) {
            _this.noData = data && data.count == 0 ? true : false;
        }));
        var heatMapTrace = new StopsHeatmapTrace(this.mapInstance);
        heatMapTrace.setPageData$(this.data$);
    };
    return StopsHeatmapService;
}());
StopsHeatmapService.decorators = [
    { type: Injectable },
];
StopsHeatmapService.ctorParameters = function () { return [
    null,
]; };
var usersAnalyticsListPresets = {
    stops_heatmap: function () {
        return {
            service: StopsHeatmapService,
            initialConfig: {
                title: "Heatmap of stops by users",
                query: { page_size: 500 },
                tags: ['user behaviour'],
                initialDateRange: DateRangeMap.last_7_days
            }
        };
    },
    max_location_disabled_duration: function () {
        return {
            service: UsersAnalyticsListService,
            initialConfig: {
                title: "Users with max location disabled duration",
                query: { ordering: "-location_disabled_duration" },
                tags: ['user behaviour', 'device health'],
                tableFormat: [
                    {
                        label: "Name",
                        selector: function (user) {
                            return user.name;
                        }
                    },
                    userTableFormat.location_disabled_duration,
                    {
                        label: "% of total duration",
                        selector: function (user) {
                            return user.total_duration && user.location_disabled_duration ?
                                (100 * (user.location_disabled_duration / user.total_duration)).toFixed(1) :
                                "NA";
                        }
                    }
                ]
            }
        };
    },
    current_location_disabled: function () {
        return {
            service: UsersAnalyticsListService,
            initialConfig: {
                title: "Recent users with location disabled",
                query: { status: 'location_disabled', show_all: true, ordering: '-last_heartbeat' },
                updateStrategy: 'live',
                hideDatePicker: true,
                tags: ['user behaviour', 'device health', 'live'],
                tableFormat: [
                    {
                        label: "Name",
                        selector: function (user) {
                            return user.name;
                        }
                    },
                    userTableFormat.last_heartbeat_at
                ]
            }
        };
    },
    max_stop_duration: function () {
        return {
            service: UsersAnalyticsListService,
            initialConfig: {
                title: "Users with max stop duration",
                query: { ordering: "-stop_duration" },
                tags: ['activity'],
                tableFormat: [
                    {
                        label: "Name",
                        selector: function (user) {
                            return user.name;
                        }
                    },
                    userTableFormat.stop_duration,
                    {
                        label: "% of total duration",
                        selector: function (user) {
                            return user.total_duration && user.stop_duration ?
                                (100 * (user.stop_duration / user.total_duration)).toFixed(1) + '%' :
                                "NA";
                        }
                    }
                ]
            }
        };
    },
    max_network_offline: function () {
        return {
            service: UsersAnalyticsListService,
            initialConfig: {
                title: "Users with max network offline duration",
                query: { ordering: "-network_offline_duration" },
                tags: ['device health'],
                tableFormat: [
                    {
                        label: "Name",
                        selector: function (user) {
                            return user.name;
                        }
                    },
                    userTableFormat.network_offline_duration,
                    {
                        label: "% of total duration",
                        selector: function (user) {
                            return user.total_duration && user.network_offline_duration ?
                                (100 * (user.network_offline_duration / user.total_duration)).toFixed(1) + '%' :
                                "NA";
                        }
                    }
                ]
            }
        };
    },
    max_distance: function () {
        return {
            service: UsersAnalyticsListService,
            initialConfig: {
                title: "Users with max distance travelled",
                query: { ordering: "-total_distance" },
                tags: ['distance'],
                tableFormat: [
                    {
                        label: "Name",
                        selector: function (user) {
                            return user.name;
                        }
                    },
                    userTableFormat.total_distance
                ]
            }
        };
    },
    users_summary: function (usersClient, title, queryLabels) {
        return {
            service: UsersSummaryService,
            initialConfig: {
                title: title || "Users status summary",
                queryLabels: queryLabels,
                client: usersClient,
            }
        };
    },
    last_recorded: function () {
        return {
            service: UsersAnalyticsListService,
            initialConfig: {
                title: "Recent active users",
                query: { ordering: "-last_heartbeat_at" },
                tags: ['live'],
                initialDateRange: DateRangeMap.last_30_days,
                hideDatePicker: true,
                tableFormat: [
                    {
                        label: "Name",
                        selector: function (user) {
                            return user.name;
                        }
                    },
                    userTableFormat.last_heartbeat_at
                ]
            }
        };
    },
    users_actions: function () {
        return {
            service: UsersAnalyticsListService,
            initialConfig: {
                title: "Users with max actions",
                query: { ordering: "-num_actions" },
                tags: ['actions'],
                initialDateRange: DateRangeMap.today,
                tableFormat: [
                    {
                        label: "Name",
                        selector: function (user) {
                            return user.name;
                        }
                    },
                    userTableFormat.num_actions
                ]
            }
        };
    }
};
var ActionsStatusGraphService = /** @class */ (function () {
    function ActionsStatusGraphService(config) {
        this.component = ActionsStatusGraphComponent;
        this.tags = ['actions'];
        this.className = "is-12";
        this.initState(config);
        this.initClient();
    }
    ActionsStatusGraphService.prototype.initState = function (config) {
        this.dateRangeService$ = dateRangeFactory(config.initialDateRange || DateRangeMap.last_7_days);
        this.title = config.title || "Actions graph";
        this.chartFormat = config.chartFormat;
        if (config.tags && config.tags.length)
            this.tags = __spread(this.tags, config.tags);
    };
    ActionsStatusGraphService.prototype.initClient = function () {
        var _this = this;
        var graphClient = actionsClientFactory({ dateRange: this.dateRangeService$ });
        this.client = graphClient.graph;
        this.loading$ = this.client.loading$;
        this.data$ = this.client.data$.pipe(filter(function (data) { return !!data; }), map$1(function (data) {
            _this.noData = data.length ? false : true;
            return _this.getCompletedActionChart(data);
        }));
    };
    ActionsStatusGraphService.prototype.getCompletedActionChart = function (data) {
        var labels = data.map(function (item) {
            return format(item.created_date, 'ddd, MMM Do');
        });
        var datasets = this.chartFormat.map(function (item) {
            return {
                title: item.title,
                values: data.map(item.selector)
            };
        });
        return {
            labels: labels,
            datasets: datasets
        };
    };
    ActionsStatusGraphService.prototype.setData = function (instance) {
        instance.service = this;
    };
    ActionsStatusGraphService.prototype.setActive = function (isActive) {
        if (isActive === void 0) { isActive = true; }
    };
    return ActionsStatusGraphService;
}());
ActionsStatusGraphService.decorators = [
    { type: Injectable },
];
ActionsStatusGraphService.ctorParameters = function () { return [
    null,
]; };
var ActionsAnalyticsListComponent = /** @class */ (function () {
    function ActionsAnalyticsListComponent() {
        this.selectedAction = null;
    }
    ActionsAnalyticsListComponent.prototype.ngOnInit = function () {
    };
    ActionsAnalyticsListComponent.prototype.showActionDetail = function (row) {
        this.selectedAction = row.data;
    };
    ActionsAnalyticsListComponent.prototype.closeModal = function () {
        this.selectedAction = null;
    };
    return ActionsAnalyticsListComponent;
}());
ActionsAnalyticsListComponent.decorators = [
    { type: Component, args: [{
                selector: 'ht-actions-analytics-list',
                template: "<table class=\"table is-fullwidth is-bordered is-hoverable\">\n  <thead>\n  <tr>\n    <th *ngFor=\"let column of listService.columns\">{{column}}</th>\n  </tr>\n  </thead>\n  <tbody>\n  <tr class=\"clickable\" (click)=\"showActionDetail(row)\" *ngFor=\"let row of listService.dataTable$ | async\">\n    <td *ngFor=\"let item of row.values\">{{item}}</td>\n  </tr>\n  </tbody>\n</table>\n<div class=\"modal is-active\" *ngIf=\"selectedAction\">\n  <div class=\"modal-background\" (click)=\"closeModal()\"></div>\n  <div class=\"modal-card\">\n    <section class=\"modal-card-body\">\n      <ht-action-table [action]=\"selectedAction\"></ht-action-table>\n      <!--<ht-user-table [user]=\"selectedUser\">-->\n        <!--{{listService.dateRangeService$.display$ | async}}-->\n      <!--</ht-user-table>-->\n    </section>\n  </div>\n  <button class=\"modal-close is-large\" aria-label=\"close\" (click)=\"closeModal()\"></button>\n</div>\n",
                styles: [".clickable:hover{\n  -webkit-box-shadow:0px 0px 6px 1px #9f9f9f;\n          box-shadow:0px 0px 6px 1px #9f9f9f;\n  z-index:2; }\n"],
                changeDetection: ChangeDetectionStrategy.OnPush
            },] },
];
ActionsAnalyticsListComponent.ctorParameters = function () { return []; };
ActionsAnalyticsListComponent.propDecorators = {
    "listService": [{ type: Input },],
};
var ActionsAnalyticsListService = /** @class */ (function () {
    function ActionsAnalyticsListService(config) {
        this.component = ActionsAnalyticsListComponent;
        this.className = "is-6";
        this.tags = ['actions'];
        this.noData = false;
        this.initState(config);
        this.initClient(config);
    }
    ActionsAnalyticsListService.prototype.initState = function (config) {
        this.dateRangeService$ = dateRangeFactory(config.initialDateRange || DateRangeMap.last_7_days);
        this.title = config.title;
        this.tableFormat = config.tableFormat;
        this.query = config.query;
        this.columns = this.tableFormat.map(function (data) { return data.label; });
        this.hideDatePicker = config.hideDatePicker;
        if (config.tags && config.tags.length)
            this.tags = __spread(this.tags, config.tags);
    };
    ActionsAnalyticsListService.prototype.initClient = function (config) {
        var _this = this;
        var userClient = actionsClientFactory({ dateRange: this.dateRangeService$ });
        this.client = userClient.list;
        this.client.updateStrategy = config.updateStrategy || "once";
        this.client.setQuery(this.query);
        this.loading$ = this.client.loading$;
        var data$ = this.client.dataArray$;
        this.dataTable$ = data$.pipe(filter(function (data) { return !!data; }), map$1(function (users) {
            _this.noData = (users.length === 0) ? true : false;
            return users.map(function (user) {
                var values = _this.tableFormat.map(function (data) { return data.selector(user); });
                return { data: user, values: values };
            });
        }));
    };
    
    ActionsAnalyticsListService.prototype.setData = function (instance) {
        instance.listService = this;
    };
    ActionsAnalyticsListService.prototype.setActive = function (isActive) {
        if (isActive === void 0) { isActive = true; }
        this.client.setActive(isActive);
    };
    return ActionsAnalyticsListService;
}());
ActionsAnalyticsListService.decorators = [
    { type: Injectable },
];
ActionsAnalyticsListService.ctorParameters = function () { return [
    null,
]; };
var ActionsSummaryChartComponent = /** @class */ (function () {
    function ActionsSummaryChartComponent() {
    }
    ActionsSummaryChartComponent.prototype.ngOnInit = function () {
    };
    return ActionsSummaryChartComponent;
}());
ActionsSummaryChartComponent.decorators = [
    { type: Component, args: [{
                selector: 'ht-actions-summary-chart',
                template: "<div class=\"level\">\n  <div class=\"level-left\">\n    <div class=\"level-item is-size-5 has-text-grey\" *ngIf=\"service.summary$ | async as summary\">\n      Total: {{summary.totalUsers}} actions\n    </div>\n  </div>\n</div>\n<ng-container *ngIf=\"service.summary$ | async as summary\">\n  <ht-users-summary [summary]=\"summary\" [selectable]=\"false\" [hideTotal]=\"true\"></ht-users-summary>\n</ng-container>\n",
                styles: [""],
                changeDetection: ChangeDetectionStrategy.OnPush
            },] },
];
ActionsSummaryChartComponent.ctorParameters = function () { return []; };
ActionsSummaryChartComponent.propDecorators = {
    "service": [{ type: Input },],
};
var ActionsSummaryService = /** @class */ (function () {
    function ActionsSummaryService(config) {
        this.component = ActionsSummaryChartComponent;
        this.className = "is-6";
        this.tags = ['actions', 'live'];
        this.hideDatePicker = false;
        this.noData = false;
        this.minHeight = 50;
        this.initState(config);
    }
    ActionsSummaryService.prototype.setData = function (instance) {
        instance.service = this;
    };
    ActionsSummaryService.prototype.initState = function (config) {
        this.dateRangeService$ = dateRangeFactory(DateRangeMap.today);
        this.title = config.title;
        var client = config.client || actionsClientFactory({ dateRange: this.dateRangeService$ });
        if (config.dateRangeService)
            this.dateRangeService$ = config.dateRangeService;
        this.client = client.summary;
        this.loading$ = this.client.loading$;
        this.summary$ = this.client.summaryChart$;
    };
    ActionsSummaryService.prototype.setActive = function (isActive) {
        if (isActive === void 0) { isActive = true; }
        this.client.setActive(isActive);
    };
    return ActionsSummaryService;
}());
ActionsSummaryService.decorators = [
    { type: Injectable },
];
ActionsSummaryService.ctorParameters = function () { return [
    null,
]; };
var ActionsHeatmapService = /** @class */ (function () {
    function ActionsHeatmapService(config) {
        this.component = AnalyticsMapContainerComponent;
        this.className = "is-6";
        this.tags = ['actions'];
        this.noData = false;
        this.loading$ = of(false);
        this.mapInstance = new MapInstance();
        this.setMapType(mapTypeService.getInstance().mapType);
        this.initClient(config);
    }
    ActionsHeatmapService.prototype.setMapType = function (mapType) {
        this.mapInstance.setMapType(mapType);
    };
    ActionsHeatmapService.prototype.setData = function (instance) {
        instance.service = this;
    };
    
    ActionsHeatmapService.prototype.setActive = function (active) {
        if (active === void 0) { active = true; }
        this.client.setActive(active);
    };
    ActionsHeatmapService.prototype.initClient = function (config) {
        var _this = this;
        this.dateRangeService$ = dateRangeFactory(config.initialDateRange || DateRangeMap.last_7_days);
        this.title = config.title;
        var actionsClient = actionsClientFactory({ dateRange: this.dateRangeService$ });
        this.client = actionsClient.heatmap;
        this.mapLoading$ = this.client.loading$;
        this.data$ = this.client.data$.pipe(tap(function (data) {
            _this.noData = data && data.count == 0 ? true : false;
        }));
        var heatMapTrace = new ActionsHeatmapTrace(this.mapInstance);
        heatMapTrace.setPageData$(this.data$);
    };
    return ActionsHeatmapService;
}());
ActionsHeatmapService.decorators = [
    { type: Injectable },
];
ActionsHeatmapService.ctorParameters = function () { return [
    null,
]; };
var actionsConfigPreset = {
    heatmap: function () {
        return {
            service: ActionsHeatmapService,
            initialConfig: {
                title: "Heatmap of completed actions",
                initialDateRange: DateRangeMap.last_7_days,
                query: { page_size: 500 }
            }
        };
    },
    status: function () {
        return {
            service: ActionsStatusGraphService,
            initialConfig: {
                title: "Actions status chart",
                initialDateRange: DateRangeMap.last_30_days,
                tags: [],
                chartFormat: [
                    {
                        title: "Assigned",
                        selector: function (graphData) {
                            return graphData.assigned;
                        }
                    },
                    {
                        title: "Completed",
                        selector: function (graphData) {
                            return graphData.completed;
                        }
                    },
                ]
            }
        };
    },
    max_distance: function () {
        return {
            service: ActionsAnalyticsListService,
            initialConfig: {
                title: "Actions with max distance",
                tags: ['distance'],
                query: { ordering: '-distance' },
                tableFormat: [
                    {
                        label: "id",
                        selector: function (action) {
                            return action.lookup_id || "NA";
                        }
                    },
                    {
                        label: "Type",
                        selector: function (action) {
                            return action.type;
                        }
                    },
                    actionTableFormat.distance,
                    actionTableFormat.duration
                ]
            }
        };
    },
    recently_assigned: function () {
        return {
            service: ActionsAnalyticsListService,
            initialConfig: {
                title: "Recent assigned actions",
                tags: ['live'],
                query: { ordering: '-assigned_at', status: 'assigned,started' },
                updateStrategy: "live",
                hideDatePicker: true,
                initialDateRange: DateRangeMap.last_30_days,
                tableFormat: [
                    {
                        label: "User",
                        selector: function (action) {
                            return action.user ? NameCase(action.user.name) : "NA";
                        }
                    },
                    {
                        label: "Type",
                        selector: function (action) {
                            return action.type;
                        }
                    },
                    actionTableFormat.assigned_at,
                    {
                        label: "Expected at",
                        selector: function (action) {
                            return action.expected_at ?
                                TimeString(action.expected_at) + " " + DateString(action.expected_at, 'short') : action.eta ?
                                TimeString(action.eta) + " " + DateString(action.eta, 'short') : "--";
                        }
                    },
                    {
                        label: "Distance remaining",
                        selector: function (action) {
                            return action.display.distance_remaining ? DistanceLocale(action.display.distance_remaining) : "--";
                        }
                    }
                ]
            }
        };
    },
    recently_completed: function () {
        return {
            service: ActionsAnalyticsListService,
            initialConfig: {
                title: "Recent completed actions",
                tags: ['live'],
                query: { ordering: '-completed_at', status: 'completed' },
                updateStrategy: "live",
                hideDatePicker: true,
                initialDateRange: DateRangeMap.last_30_days,
                tableFormat: [
                    {
                        label: "User",
                        selector: function (action) {
                            return action.user ? NameCase(action.user.name) : "NA";
                        }
                    },
                    {
                        label: "Type",
                        selector: function (action) {
                            return action.type;
                        }
                    },
                    actionTableFormat.completed_at,
                    {
                        label: "Ontime",
                        selector: function (action) {
                            return action.display.is_late ? "Late" : "Ontime";
                        }
                    },
                    actionTableFormat['distance&duration']
                ]
            }
        };
    },
    max_duration: function () {
        return {
            service: ActionsAnalyticsListService,
            initialConfig: {
                title: "Actions with max duration",
                query: { ordering: '-duration' },
                tableFormat: [
                    {
                        label: "User",
                        selector: function (action) {
                            return action.user ? NameCase(action.user.name) : "NA";
                        }
                    },
                    {
                        label: "Type",
                        selector: function (action) {
                            return action.type;
                        }
                    },
                    actionTableFormat.duration,
                    actionTableFormat.distance
                ]
            }
        };
    },
    users_on_action: function () {
        return {
            service: ActionsAnalyticsListService,
            initialConfig: {
                title: "Recent user on action",
                query: { ordering: '-assigned_at' },
                tags: ['users', 'live'],
                updateStrategy: 'live',
                hideDatePicker: true,
                tableFormat: [
                    {
                        label: "Name",
                        selector: function (action) {
                            return action.user ? action.user.name : "NA";
                        }
                    },
                    actionTableFormat.assigned_at,
                    {
                        label: "Last updated at",
                        selector: function (action) {
                            return action.user ? TimeString(action.user.last_heartbeat_at) : "--";
                        }
                    },
                    {
                        label: "Action type",
                        selector: function (action) {
                            return action.type;
                        }
                    },
                    {
                        label: "Expected At",
                        selector: function (action) {
                            return action.expected_at ?
                                TimeString(action.expected_at) + " " + DateString(action.expected_at, 'short') : action.eta ?
                                TimeString(action.eta) + " " + DateString(action.eta, 'short') : "--";
                        }
                    }
                ]
            }
        };
    },
    summary: function (actionsClient, dateRangeService$$1, title, queryLabels) {
        return {
            service: ActionsSummaryService,
            initialConfig: {
                title: title || "Actions status summary",
                updateStrategy: 'live',
                tags: ['live'],
                query: {},
                queryLabels: queryLabels,
                dateRangeService: dateRangeService$$1,
                client: actionsClient
            }
        };
    }
};
var AnalyticsItemsService = /** @class */ (function () {
    function AnalyticsItemsService() {
        this.chosenItemCreater = [];
        this.selectedTags$ = new BehaviorSubject([]);
        var usersClient = usersClientFactory({ dateRange: dateRangeFactory(DateRangeMap.today) });
        var usersFilter = usersClient.filterClass;
        var activityQueryLabel = usersFilter.activityQueryArray;
        var showAllQueryLable = usersFilter.showAllQueryArray;
        var actionDateRangeService = dateRangeFactory(DateRangeMap.today);
        var actionsClient = actionsClientFactory({ dateRange: actionDateRangeService });
        this.presets = [
            actionsConfigPreset["summary"](actionsClient, actionDateRangeService),
            usersAnalyticsListPresets["users_summary"](usersClient, 'Users activity summary', __spread(activityQueryLabel, showAllQueryLable)),
            actionsConfigPreset["status"](),
            actionsConfigPreset["heatmap"](),
            usersAnalyticsListPresets["stops_heatmap"](),
            actionsConfigPreset["recently_assigned"](),
            actionsConfigPreset["recently_completed"](),
            usersAnalyticsListPresets["last_recorded"](),
            usersAnalyticsListPresets["users_actions"](),
            usersAnalyticsListPresets["max_location_disabled_duration"](),
            usersAnalyticsListPresets["current_location_disabled"](),
            usersAnalyticsListPresets["max_stop_duration"](),
            usersAnalyticsListPresets["max_distance"](),
        ];
        this.chosenItemCreater = this.presets;
    }
    
    AnalyticsItemsService.prototype.initPresets = function () {
        var _this = this;
        if (!this.items$) {
            this.items$ = new BehaviorSubject(this.getItems(this.presets));
            this.allTags$ = this.items$.pipe(map$1(function (items) {
                _this.totalTags = items.length;
                return items.reduce(function (tags, item) {
                    var itemTags = item.tags;
                    return itemTags.reduce(function (currentTags, tag) {
                        return currentTags.includes(tag) ? currentTags : __spread(currentTags, [tag]);
                    }, tags);
                }, ['users', 'actions']);
            }));
            this.filteredItems$ = combineLatest(this.items$, this.selectedTags$, function (items, tags) {
                return tags.length ? items.filter(function (item) {
                    return tags.reduce(function (pass, selectedTag) {
                        return pass && item.tags.includes(selectedTag);
                    }, true);
                }) : items;
            });
            this.tags$ = combineLatest(this.allTags$, this.selectedTags$, function (allTags, selectedTags) {
                return allTags.map(function (tag) {
                    var isActive = selectedTags.includes(tag);
                    return { key: tag, isActive: isActive };
                });
            });
        }
    };
    AnalyticsItemsService.prototype.isItemCreatorActive = function (itemCreator) {
        return this.chosenItemCreater.includes(itemCreator);
    };
    AnalyticsItemsService.prototype.toggleTag = function (tag) {
        var _this = this;
        this.selectedTags$.pipe(take(1))
            .subscribe(function (tags) {
            if (tags.includes(tag)) {
                tags.splice(tags.indexOf(tag), 1);
            }
            else {
                tags.push(tag);
            }
            _this.selectedTags$.next(__spread(tags));
        });
    };
    
    AnalyticsItemsService.prototype.selectTag = function (tag) {
        var _this = this;
        this.selectedTags$.pipe(take(1))
            .subscribe(function (tags) {
            if (tags.includes(tag)) {
                tags.splice(tags.indexOf(tag), 1);
            }
            else {
                tags = [tag];
            }
            _this.selectedTags$.next(__spread(tags));
        });
    };
    AnalyticsItemsService.prototype.setPreset = function (choosenPreset) {
        this.items$.next(this.getItems(choosenPreset));
        this.initServices();
    };
    AnalyticsItemsService.prototype.getItems = function (itemsConfigs) {
        return itemsConfigs.map(function (preset) {
            var service = new preset.service(preset.initialConfig);
            return service;
        });
    };
    
    AnalyticsItemsService.prototype.initServices = function () {
        this.setServicesActive(true);
    };
    AnalyticsItemsService.prototype.setServicesActive = function (isActive) {
        if (isActive === void 0) { isActive = true; }
        this.items$.pipe(take(1)).subscribe(function (items) {
            items.forEach(function (item) {
                item.setActive(isActive);
            });
        });
    };
    AnalyticsItemsService.prototype.destroy = function () {
        this.setServicesActive(false);
    };
    return AnalyticsItemsService;
}());
AnalyticsItemsService.decorators = [
    { type: Injectable },
];
AnalyticsItemsService.ctorParameters = function () { return []; };
var AnalyticsContainerComponent = /** @class */ (function () {
    function AnalyticsContainerComponent(analyticsItemsService) {
        this.analyticsItemsService = analyticsItemsService;
        this.configure = false;
    }
    AnalyticsContainerComponent.prototype.ngOnInit = function () {
        this.analyticsItemsService.initPresets();
        this.analyticsItemsService.initServices();
    };
    AnalyticsContainerComponent.prototype.openConfig = function () {
        this.configure = true;
    };
    AnalyticsContainerComponent.prototype.trackByFn = function (index, item) {
        return item.title;
    };
    AnalyticsContainerComponent.prototype.ngOnDestroy = function () {
        this.analyticsItemsService.destroy();
    };
    return AnalyticsContainerComponent;
}());
AnalyticsContainerComponent.decorators = [
    { type: Component, args: [{
                selector: 'ht-analytics-container',
                template: "<div class=\"toolbar\">\n  <div class=\"level\">\n    <div class=\"level-left\">\n      <!--<div class=\"level-item\">-->\n        <!--<div class=\"icon\">-->\n          <!--<i class=\"fa fa-tags has-text-grey\"></i>-->\n        <!--</div>-->\n        <!--Filter by Tags:-->\n      <!--</div>-->\n      <div class=\"level-item\">\n        <div class=\"dropdown is-hoverable\">\n          <div class=\"dropdown-trigger\">\n            <button class=\"button\" aria-haspopup=\"true\" aria-controls=\"dropdown-menu\">\n              <span class=\"icon\">\n                <i class=\"fa fa-tags has-text-grey\"></i>\n              </span>\n              <span>Filter by Tags:</span>\n              <span class=\"icon is-small\">\n        <i class=\"fa fa-angle-down\" aria-hidden=\"true\"></i>\n      </span>\n            </button>\n          </div>\n          <div class=\"dropdown-menu\" id=\"dropdown-menu\" role=\"menu\">\n            <div class=\"dropdown-content\">\n              <a (click)=\"analyticsItemsService.toggleTag(tag.key)\" class=\"dropdown-item\" *ngFor=\"let tag of analyticsItemsService.tags$ | async\">\n                <label class=\"checkbox\">\n                  <input type=\"checkbox\" [checked]=\"tag.isActive\">\n                  {{tag.key}}\n                </label>\n              </a>\n              <!--<a class=\"dropdown-item\">-->\n                <!--Other dropdown item-->\n              <!--</a>-->\n              <!--<a href=\"#\" class=\"dropdown-item is-active\">-->\n                <!--Active dropdown item-->\n              <!--</a>-->\n              <!--<a href=\"#\" class=\"dropdown-item\">-->\n                <!--Other dropdown item-->\n              <!--</a>-->\n              <!--<hr class=\"dropdown-divider\">-->\n              <!--<a href=\"#\" class=\"dropdown-item\">-->\n                <!--With a divider-->\n              <!--</a>-->\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class=\"level-item\" *ngFor=\"let tag of analyticsItemsService.tags$ | async\">\n        <button\n          class=\"button\"\n          [class.is-primary]=\"tag.isActive\"\n          (click)=\"analyticsItemsService.selectTag(tag.key)\">\n          <span>{{tag.key}}</span>\n          <span *ngIf=\"tag.isActive\" class=\"icon is-small\">\n              <i class=\"fa fa-times\"></i>\n            </span>\n        </button>\n        <!--<span class=\"tag clickable is-medium\"-->\n              <!--(click)=\"analyticsItemsService.selectTag(tag.key)\"-->\n              <!--[class.is-primary]=\"tag.isActive\">-->\n          <!--{{tag.key}} <span *ngIf=\"tag.isActive\" class=\"delete\"></span>-->\n        <!--</span>-->\n      </div>\n    </div>\n    <div class=\"level-right\">\n      <div class=\"level-item\">\n        <button class=\"button\" (click)=\"openConfig()\">\n        <span class=\"icon\">\n          <i class=\"fa fa-edit\"></i>\n        </span>\n          <span>Edit</span>\n        </button>\n      </div>\n    </div>\n  </div>\n</div>\n<div class=\"container\">\n  <div class=\"columns is-multiline is-centered\" *ngIf=\"analyticsItemsService.filteredItems$ | async as items\">\n    <div class=\"column\" [@card-appear] [ngClass]=\"item.className\" *ngFor=\"let item of items\">\n      <div class=\"card card-content\">\n        <ht-analytics-tags\n          (selectTag)=\"analyticsItemsService.toggleTag($event)\"\n          [tags]=\"item.tags\"\n          [selectedTags]=\"analyticsItemsService.selectedTags$ | async\"></ht-analytics-tags>\n        <ht-analytics-title\n          [title]=\"item.title\"\n          [hideDatePicker]=\"item.hideDatePicker\"\n          [dateRangeService]=\"item.dateRangeService$\"></ht-analytics-title>\n        <ht-analytics-item-load [minHeight]=\"item.minHeight\" [loading$]=\"item.loading$\" [noData]=\"item.noData\">\n          <ht-analytics-item [item]=\"item\"></ht-analytics-item>\n        </ht-analytics-item-load>\n      </div>\n    </div>\n    <div class=\"column is-6 auto setup\" *ngIf=\"items.length == 0\">\n      <div class=\"is-size-1 has-text-centered has-text-grey-light\">No view is selected</div>\n    </div>\n    <div class=\"modal is-active\" *ngIf=\"configure\">\n      <div class=\"modal-background\" (click)=\"configure = false\"></div>\n      <div class=\"modal-card\">\n        <header class=\"modal-card-head\">\n          <p class=\"modal-card-title\">Choose preset views</p>\n        </header>\n        <section class=\"modal-card-body\">\n          <ht-analytics-selector (selected)=\"configure = false\"></ht-analytics-selector>\n        </section>\n      </div>\n    </div>\n  </div>\n</div>\n",
                styles: [".setup{\n  margin-top:70px; }\n.toolbar{\n  width:100%;\n  padding:16px 40px;\n  margin-bottom:20px;\n  background:white;\n  border-bottom:1px solid #d6d6d6; }\n.grid{\n  display:grid;\n  grid-template-columns:1fr 1fr; }\n  .grid .is-6{\n    width:100%; }\n  .grid .is-12{\n    grid-column:1/3; }\n"],
                animations: [
                    trigger('card-appear', [
                        transition(":enter", [
                            style({ width: 0, height: 0, opacity: 0 }),
                            animate('200ms ease-in-out', style({ width: "*", height: "*", opacity: 1 }))
                        ]),
                        transition(":leave", [
                            style({ width: "*", height: "*", opacity: 0 }),
                            animate('200ms ease-in-out', style({ width: 0, height: 0, opacity: 0 }))
                        ]),
                    ])
                ]
            },] },
];
AnalyticsContainerComponent.ctorParameters = function () { return [
    { type: AnalyticsItemsService, },
]; };
var AnalyticsSlotDirective = /** @class */ (function () {
    function AnalyticsSlotDirective(viewContainerRef) {
        this.viewContainerRef = viewContainerRef;
    }
    return AnalyticsSlotDirective;
}());
AnalyticsSlotDirective.decorators = [
    { type: Directive, args: [{
                selector: '[htAnalyticsSlot]'
            },] },
];
AnalyticsSlotDirective.ctorParameters = function () { return [
    { type: ViewContainerRef, },
]; };
var AnalyticsItemComponent = /** @class */ (function () {
    function AnalyticsItemComponent(componentFactoryResolver) {
        this.componentFactoryResolver = componentFactoryResolver;
    }
    AnalyticsItemComponent.prototype.ngOnInit = function () {
        this.addComponent();
    };
    AnalyticsItemComponent.prototype.addComponent = function () {
        var componentFactory = this.componentFactoryResolver.resolveComponentFactory(this.item.component);
        var viewContainerRef = this.slot.viewContainerRef;
        viewContainerRef.clear();
        var componentRef = viewContainerRef.createComponent(componentFactory);
        this.item.setData(componentRef.instance);
    };
    return AnalyticsItemComponent;
}());
AnalyticsItemComponent.decorators = [
    { type: Component, args: [{
                selector: 'ht-analytics-item',
                template: "<div htAnalyticsSlot></div>\n",
                styles: [""]
            },] },
];
AnalyticsItemComponent.ctorParameters = function () { return [
    { type: ComponentFactoryResolver, },
]; };
AnalyticsItemComponent.propDecorators = {
    "slot": [{ type: ViewChild, args: [AnalyticsSlotDirective,] },],
    "item": [{ type: Input },],
};
var AnalyticsSelectorComponent = /** @class */ (function () {
    function AnalyticsSelectorComponent(analyticsItemsService) {
        this.analyticsItemsService = analyticsItemsService;
        this.selected = new EventEmitter();
        this.choosenPreset = [];
    }
    AnalyticsSelectorComponent.prototype.ngOnInit = function () {
        (_a = this.choosenPreset).push.apply(_a, __spread(this.analyticsItemsService.presets));
        var _a;
    };
    AnalyticsSelectorComponent.prototype.isActive = function (preset) {
        return this.choosenPreset.includes(preset);
    };
    AnalyticsSelectorComponent.prototype.togglePreset = function (preset) {
        if (this.isActive(preset)) {
            var index = this.choosenPreset.indexOf(preset);
            this.choosenPreset.splice(index, 1);
        }
        else {
            this.choosenPreset.push(preset);
        }
    };
    
    AnalyticsSelectorComponent.prototype.setPreset = function () {
        this.analyticsItemsService.setPreset(this.choosenPreset);
        this.selected.next(true);
    };
    return AnalyticsSelectorComponent;
}());
AnalyticsSelectorComponent.decorators = [
    { type: Component, args: [{
                selector: 'ht-analytics-selector',
                template: "<!--<div class=\"card\">-->\n  <!--<div class=\"card-header\">-->\n    <!--<div class=\"card-header-title\">-->\n      <!--Choose preset views-->\n    <!--</div>-->\n  <!--</div>-->\n  <!--<div class=\"card-content\">-->\n    <!---->\n  <!--</div>-->\n<!--</div>-->\n<div class=\"field\" *ngFor=\"let preset of analyticsItemsService.presets\">\n  <div class=\"control\">\n    <label class=\"checkbox\">\n      <input type=\"checkbox\" (click)=\"togglePreset(preset)\" [checked]=\"isActive(preset)\">\n      {{preset.initialConfig.title}}\n    </label>\n  </div>\n</div>\n<div class=\"field\">\n  <div class=\"control\">\n    <button class=\"button\" (click)=\"setPreset()\">Create views</button>\n  </div>\n</div>\n",
                styles: [""],
                changeDetection: ChangeDetectionStrategy.OnPush
            },] },
];
AnalyticsSelectorComponent.ctorParameters = function () { return [
    { type: AnalyticsItemsService, },
]; };
AnalyticsSelectorComponent.propDecorators = {
    "selected": [{ type: Output },],
};
var AnalyticsTagsComponent = /** @class */ (function () {
    function AnalyticsTagsComponent() {
        this.remove = new EventEmitter();
        this.selectTag = new EventEmitter();
        this.edit = new EventEmitter();
    }
    AnalyticsTagsComponent.prototype.ngOnInit = function () {
    };
    AnalyticsTagsComponent.prototype.isTagActive = function (tag) {
        return this.selectedTags.includes(tag);
    };
    return AnalyticsTagsComponent;
}());
AnalyticsTagsComponent.decorators = [
    { type: Component, args: [{
                selector: 'ht-analytics-tags',
                template: "<div class=\"level\">\n  <div class=\"level-left\">\n    <div class=\"level-item\">\n      <div class=\"icon\">\n        <i class=\"fa fa-tag has-text-grey\"></i>\n      </div>\n    </div>\n    <div class=\"level-item\">\n      <div class=\"tags\">\n        <span class=\"tag clickable\" (click)=\"selectTag.next(tag)\" [class.is-primary]=\"isTagActive(tag)\" *ngFor=\"let tag of tags\">\n          {{tag}}\n          <span class=\"icon\" *ngIf=\"tag === 'live'\">\n            &nbsp;\n            <i class=\"fa fa-circle\" style=\"color: #99d8ac;\"></i>\n          </span>\n        </span>\n      </div>\n    </div>\n  </div>\n  <!--<div class=\"level-right\">-->\n    <!--<div class=\"level-item\">-->\n      <!--<div class=\"dropdown is-hoverable is-right\">-->\n        <!--<div class=\"dropdown-trigger\">-->\n          <!--<button class=\"button is-white has-text-grey\" aria-haspopup=\"true\" aria-controls=\"dropdown-menu4\">-->\n        <!--<span class=\"icon\">-->\n          <!--<i class=\"fa fa-ellipsis-v\"></i>-->\n        <!--</span>-->\n          <!--</button>-->\n        <!--</div>-->\n        <!--<div class=\"dropdown-menu\" id=\"dropdown-menu4\" role=\"menu\">-->\n          <!--<div class=\"dropdown-content\">-->\n            <!--<a class=\"dropdown-item flex-row align-center\">-->\n              <!--<span class=\"icon\"><i class=\"fa fa-edit\"></i></span>-->\n              <!--<span class=\"flex\">Edit</span>-->\n            <!--</a>-->\n            <!--<a class=\"dropdown-item flex-row align-center has-text-danger\">-->\n              <!--<span class=\"icon\"><i class=\"fa fa-remove\"></i></span>-->\n              <!--<span class=\"flex\">Remove</span>-->\n            <!--</a>-->\n          <!--</div>-->\n        <!--</div>-->\n      <!--</div>-->\n    <!--</div>-->\n  <!--</div>-->\n</div>\n",
                styles: [".level{\n  margin-bottom:10px; }\n"],
                changeDetection: ChangeDetectionStrategy.OnPush,
            },] },
];
AnalyticsTagsComponent.ctorParameters = function () { return []; };
AnalyticsTagsComponent.propDecorators = {
    "tags": [{ type: Input },],
    "selectedTags": [{ type: Input },],
    "remove": [{ type: Output },],
    "selectTag": [{ type: Output },],
    "edit": [{ type: Output },],
};
var AnalyticsTagsModule = /** @class */ (function () {
    function AnalyticsTagsModule() {
    }
    return AnalyticsTagsModule;
}());
AnalyticsTagsModule.decorators = [
    { type: NgModule, args: [{
                imports: [
                    CommonModule
                ],
                declarations: [AnalyticsTagsComponent],
                exports: [
                    AnalyticsTagsComponent
                ]
            },] },
];
AnalyticsTagsModule.ctorParameters = function () { return []; };
var ActionTableComponent = /** @class */ (function () {
    function ActionTableComponent() {
        this.excludedKey = [
            'type',
            'lookup_id',
            'id',
            'short_code',
            'vehicle_type',
            'status',
            "created_at",
            "modified_at",
            'sub_status',
            'started_at',
            'tracking_url'
        ];
    }
    ActionTableComponent.prototype.ngOnInit = function () {
    };
    Object.defineProperty(ActionTableComponent.prototype, "tableData", {
        get: function () {
            return tableFormat(this.action, { excludes: this.excludedKey, format: actionTableFormat });
        },
        enumerable: true,
        configurable: true
    });
    return ActionTableComponent;
}());
ActionTableComponent.decorators = [
    { type: Component, args: [{
                selector: 'ht-action-table',
                template: "<div class=\"level\">\n  <div class=\"level-right has-text-grey\">\n    <div class=\"level-item\">\n      <div class=\"icon-box\">\n        <i class=\"fa fa-briefcase\"></i>\n      </div>\n      <!--<span class=\"fa-stack fa-lg\">-->\n          <!--<i class=\"fa fa-square-o fa-stack-2x\"></i>-->\n          <!--<i class=\"fa fa-briefcase fa-stack-1x\"></i>-->\n        <!--</span>-->\n    </div>\n    <div class=\"level-item is-size-4 is-capitalized\">\n      {{action.type}}\n      <!--<span *ngIf=\"action.display.duration_remaining && action.display.show_summary\">-->\n        <!--{{action.display.duration_remaining | HMString}}-->\n      <!--</span>-->\n    </div>\n    <div class=\"level-item is-size-4\">\n      {{action.display.status_text}}\n    </div>\n    <div class=\"level-item is-size-4\">\n      {{action.display.sub_status_text}}\n    </div>\n  </div>\n  <div class=\"level-left\">\n    # {{action.lookup_id}}\n  </div>\n</div>\n<ht-data-table [tableData]=\"tableData\"></ht-data-table>\n<ht-user-table [user]=\"action.user\"></ht-user-table>\n",
                styles: [".icon-box{\n  width:30px;\n  height:30px;\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  border:1px solid grey;\n  border-radius:50%; }\n  .icon-box .fa{\n    margin:auto; }\n"],
                changeDetection: ChangeDetectionStrategy.OnPush
            },] },
];
ActionTableComponent.ctorParameters = function () { return []; };
ActionTableComponent.propDecorators = {
    "action": [{ type: Input },],
};
var ActionTableModule = /** @class */ (function () {
    function ActionTableModule() {
    }
    return ActionTableModule;
}());
ActionTableModule.decorators = [
    { type: NgModule, args: [{
                imports: [
                    CommonModule,
                    UserTableModule,
                    DataTableModule,
                    SharedModule
                ],
                declarations: [ActionTableComponent],
                exports: [ActionTableComponent]
            },] },
];
ActionTableModule.ctorParameters = function () { return []; };
var ActionsAnalyticsListModule = /** @class */ (function () {
    function ActionsAnalyticsListModule() {
    }
    return ActionsAnalyticsListModule;
}());
ActionsAnalyticsListModule.decorators = [
    { type: NgModule, args: [{
                imports: [
                    CommonModule,
                    DateRangeModule,
                    ActionTableModule
                ],
                declarations: [ActionsAnalyticsListComponent],
                exports: [ActionsAnalyticsListComponent]
            },] },
];
ActionsAnalyticsListModule.ctorParameters = function () { return []; };
var ActionsSummaryChartModule = /** @class */ (function () {
    function ActionsSummaryChartModule() {
    }
    return ActionsSummaryChartModule;
}());
ActionsSummaryChartModule.decorators = [
    { type: NgModule, args: [{
                imports: [
                    CommonModule,
                    UsersSummaryModule,
                ],
                declarations: [ActionsSummaryChartComponent],
                exports: [ActionsSummaryChartComponent]
            },] },
];
ActionsSummaryChartModule.ctorParameters = function () { return []; };
var AnalyticsTitleComponent = /** @class */ (function () {
    function AnalyticsTitleComponent() {
    }
    AnalyticsTitleComponent.prototype.ngOnInit = function () {
    };
    return AnalyticsTitleComponent;
}());
AnalyticsTitleComponent.decorators = [
    { type: Component, args: [{
                selector: 'ht-analytics-title',
                template: "<div class=\"level\">\n  <div class=\"level-left\">\n    <div class=\"level-item has-text-weight-bold has-text-primary is-size-4\">\n      {{title}}\n    </div>\n  </div>\n  <div class=\"level-right\">\n    <ng-content></ng-content>\n    <div class=\"level-item\" *ngIf=\"!hideDatePicker\">\n      <ht-date-range [isRight]=\"true\" [dateRangeService]=\"dateRangeService\"></ht-date-range>\n    </div>\n  </div>\n</div>\n",
                styles: [".level{\n  margin-bottom:10px; }\n"]
            },] },
];
AnalyticsTitleComponent.ctorParameters = function () { return []; };
AnalyticsTitleComponent.propDecorators = {
    "title": [{ type: Input },],
    "dateRangeService": [{ type: Input },],
    "hideDatePicker": [{ type: Input },],
};
var AnalyticsItemLoadComponent = /** @class */ (function () {
    function AnalyticsItemLoadComponent() {
        this.noData = false;
    }
    Object.defineProperty(AnalyticsItemLoadComponent.prototype, "_minHeight", {
        get: function () {
            return this.minHeight || 300;
        },
        enumerable: true,
        configurable: true
    });
    AnalyticsItemLoadComponent.prototype.ngOnInit = function () {
    };
    return AnalyticsItemLoadComponent;
}());
AnalyticsItemLoadComponent.decorators = [
    { type: Component, args: [{
                selector: 'ht-analytics-item-load',
                template: "<div class=\"loading-container\" [style.min-height.px]=\"_minHeight\">\n  <ng-content></ng-content>\n  <div class=\"loading-page\" *ngIf=\"loading$ | async\">\n    <div class=\"icon auto has-text-grey-light\">\n      <i class=\"fa fa-circle-o-notch fa-spin fa-3x fa-fw\"></i>\n    </div>\n  </div>\n  <div class=\"loading-page\" *ngIf=\"noData\">\n    <div class=\"auto has-text-grey-light is-size-1\">\n      No Data\n    </div>\n  </div>\n</div>\n",
                styles: [".loading-page{\n  background:#ffffff96;\n  position:absolute;\n  height:100%;\n  width:100%;\n  top:0;\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  z-index:600; }\n.loading-container{\n  position:relative; }\n"],
                changeDetection: ChangeDetectionStrategy.OnPush,
            },] },
];
AnalyticsItemLoadComponent.ctorParameters = function () { return []; };
AnalyticsItemLoadComponent.propDecorators = {
    "loading$": [{ type: Input },],
    "minHeight": [{ type: Input },],
    "noData": [{ type: Input },],
};
var AnalyticsItemLoadModule = /** @class */ (function () {
    function AnalyticsItemLoadModule() {
    }
    return AnalyticsItemLoadModule;
}());
AnalyticsItemLoadModule.decorators = [
    { type: NgModule, args: [{
                imports: [
                    CommonModule
                ],
                declarations: [AnalyticsItemLoadComponent],
                exports: [AnalyticsItemLoadComponent]
            },] },
];
AnalyticsItemLoadModule.ctorParameters = function () { return []; };
var AnalyticsMapContainerModule = /** @class */ (function () {
    function AnalyticsMapContainerModule() {
    }
    return AnalyticsMapContainerModule;
}());
AnalyticsMapContainerModule.decorators = [
    { type: NgModule, args: [{
                imports: [
                    CommonModule,
                    MapModule
                ],
                declarations: [AnalyticsMapContainerComponent],
                exports: [AnalyticsMapContainerComponent]
            },] },
];
AnalyticsMapContainerModule.ctorParameters = function () { return []; };
var AnalyticsContainerModule = /** @class */ (function () {
    function AnalyticsContainerModule() {
    }
    return AnalyticsContainerModule;
}());
AnalyticsContainerModule.decorators = [
    { type: NgModule, args: [{
                imports: [
                    CommonModule,
                    ActionsStatusGraphModule,
                    UsersAnalyticsListModule,
                    UsersSummaryChartModule,
                    AnalyticsTagsModule,
                    ActionsAnalyticsListModule,
                    ActionsSummaryChartModule,
                    AnalyticsItemLoadModule,
                    DateRangeModule,
                    AnalyticsMapContainerModule
                ],
                declarations: [
                    AnalyticsContainerComponent,
                    AnalyticsSlotDirective,
                    AnalyticsItemComponent,
                    AnalyticsSelectorComponent,
                    AnalyticsTitleComponent
                ],
                exports: [
                    AnalyticsContainerComponent,
                    AnalyticsSlotDirective,
                    AnalyticsItemComponent,
                    AnalyticsSelectorComponent
                ],
                entryComponents: [
                    UsersAnalyticsListComponent,
                    ActionsStatusGraphComponent,
                    UsersSummaryChartComponent,
                    ActionsAnalyticsListComponent,
                    ActionsSummaryChartComponent,
                    AnalyticsMapContainerComponent
                ],
                providers: [AnalyticsItemsService]
            },] },
];
AnalyticsContainerModule.ctorParameters = function () { return []; };
var HTPublishableKey = 'pk_fe8200189bbdfd44b078bd462b08cb86174aa97c';
var TrackingService = /** @class */ (function () {
    function TrackingService() {
        this.isMapDirty = false;
        this.isSliding = false;
        this.actions$ = new ReplaySubject();
        this.error$ = new ReplaySubject();
        this.setTrackApi();
    }
    TrackingService.prototype.setTrackApi = function () {
        var request = htRequestService.getInstance(HTPublishableKey);
        request.setClientType('hypertrack/trct.at');
        this.trackApi = new HtTrackingApi(request);
    };
    TrackingService.prototype.initShortCode = function (shortCode) {
        var _this = this;
        this.trackApi.track(shortCode).pipe(tap(function (data) {
        }), expand(function (data) {
            return timer(2000).pipe(concatMap(function (_) {
                return _this.trackApi.track(shortCode).pipe(catchError(function (err) {
                    _this.handleOnError(err);
                    return of(null);
                }));
            }));
        }), filter(function (data) {
            if (data)
                _this.handleOnError(null);
            return !!data;
        }), tap(function (data) {
            _this.handleOnUpdate(data);
        })).subscribe(this.actions$);
    };
    TrackingService.prototype.handleOnReady = function (actions) {
        console.log('On Actions ready', actions);
    };
    
    TrackingService.prototype.handleOnUpdate = function (actions) {
    };
    
    TrackingService.prototype.handleOnError = function (err) {
        this.error$.next(err);
    };
    TrackingService.prototype.handleDeepLinkRedirect = function (subAccount, action) {
    };
    return TrackingService;
}());
TrackingService.decorators = [
    { type: Injectable },
];
TrackingService.ctorParameters = function () { return []; };
var TrackingMapService = /** @class */ (function () {
    function TrackingMapService(mapService) {
        this.mapService = mapService;
        this.dirty$ = new BehaviorSubject(false);
        this.actionCompleted = false;
        this.defaultSetBoundsOptions = {
            paddingTopLeft: [15, 15],
            paddingBottomRight: [15, 70],
            duration: 2,
            animate: true,
            easeLinearity: 0.2,
        };
        this.setBoundsOptions = this.defaultSetBoundsOptions;
        this.mapInstance = this.mapService.mapInstance;
    }
    TrackingMapService.prototype.resetCleanMap = function (action) {
        var _this = this;
        if (!this.dirty$.getValue()) {
            this.mapService.resetBounds();
        }
        if (!this.checkDirtySub) {
            this.checkDirtySub = this.mapInstance.onEvent$('click mousedown dragstart')
                .subscribe(function (data) {
                _this.dirty$.next(true);
            });
        }
    };
    TrackingMapService.prototype.setData$ = function (actionsData$) {
        var mapInstance = this.mapService.mapInstance;
        if (!this.actionsTrace)
            this.actionsTrace = new ActionTrace(mapInstance, { hasPulse: true });
        this.setStyle();
        this.actionsTrace.setData$(actionsData$);
    };
    TrackingMapService.prototype.resetMap = function () {
        if (!this.actionCompleted)
            this.dirty$.next(false);
    };
    TrackingMapService.prototype.onComplete = function (action) {
        this.actionsTrace.polyline.toIncludeInBounds = true;
        this.actionsTrace.start.toIncludeInBounds = true;
        this.setBoundsOptions = Object.assign({}, this.setBoundsOptions, { paddingBottomRight: [15, 120] });
        this.mapService.resetBounds(this.setBoundsOptions);
        this.dirty$.next(true);
        this.actionCompleted = true;
    };
    
    TrackingMapService.prototype.setStyle = function () {
        var _this = this;
        var destinationStyle = {
            radius: 20,
            innerRadius: 12,
            liveColor: "#250D47",
            summaryColor: "#250D47"
        };
        var polylineStyle = {
            color: '#9013FE',
            weight: 3,
        };
        var userStyle = {
            radius: 24,
            color: '#9013FE',
            markerSize: 17,
        };
        var destination = this.actionsTrace.destination;
        var polyline = this.actionsTrace.polyline;
        var start = this.actionsTrace.start;
        var user = this.actionsTrace.user;
        var pulse = this.actionsTrace.pulse;
        polyline.toIncludeInBounds = false;
        start.toIncludeInBounds = false;
        user.styleObj = {
            default: {
                zIndexOffset: 12,
                iconSize: [userStyle.radius, userStyle.radius],
                className: "user-marker"
            }
        };
        pulse.styleObj = {
            default: {
                zIndexOffset: 10,
                iconSize: [userStyle.radius, userStyle.radius],
                className: "user-marker"
            }
        };
        destination.styleObj = {
            default: {
                zIndexOffset: 10,
                iconSize: [destinationStyle.radius, destinationStyle.radius],
                className: "destination-marker"
            }
        };
        polyline.toIncludeInBounds = false;
        polyline.styleObj = {
            default: {
                fillColor: polylineStyle.color,
                color: polylineStyle.color,
                weight: polylineStyle.weight
            },
            popup: {
                offset: [0, -5],
                closeButton: false
            }
        };
        pulse.getDivContent = function (data) {
            var pulse = data.user.availability_status == 'online' ? 'pulse' : '';
            var content = "\n    <div class=\"box-" + userStyle.radius + "\" style=\"background: " + userStyle.color + "\">\n  <div class=\"box-" + userStyle.radius + " " + pulse + "\" style=\"background: " + userStyle.color + "; margin: auto\">\n</div>\n</div>\n    ";
            return content;
        };
        user.getDivContent = function (data, bearing) {
            var iconDiv = _this.getUserIconDiv(data, bearing, userStyle.markerSize);
            return "<div class=\"box-" + userStyle.radius + "\" style=\"position: absolute\">\n    " + iconDiv + "\n</div>";
        };
        destination.getDivContent = function (action) {
            if (action.display.show_summary) {
                return "<div class=\"box-" + destinationStyle.radius + "\" style=\"background: " + destinationStyle.liveColor + "\">\n<!--<div class=\"icon\" style=\"font-size: 1.5rem; color: white; margin: auto\">-->\n        <!--<i class=\"ion-checkmark\"></i>-->\n      <!--</div>-->\n</div>";
            }
            else {
                return "<div class=\"box-" + destinationStyle.radius + " is-bordered\" style=\"display: flex; border-color: #" + destinationStyle.summaryColor + "\">\n    <div class=\"box-" + destinationStyle.innerRadius + "\" style=\"background: " + destinationStyle.summaryColor + "; margin: auto\"></div>\n</div>";
            }
        };
    };
    TrackingMapService.prototype.getUserIconDiv = function (action, bearing, size) {
        return "<i class=\"ion-android-navigate\" style=\"margin: auto;\n    color: white;\n    font-size: " + size + "px;\n    transition: transform 0.4s;\n    transform: rotate(" + bearing + "deg)\"></i>";
    };
    return TrackingMapService;
}());
TrackingMapService.decorators = [
    { type: Injectable },
];
TrackingMapService.ctorParameters = function () { return [
    { type: HtMapService, },
]; };
var TrackingComponent = /** @class */ (function () {
    function TrackingComponent(trackinService, mapService, trackingMapService) {
        this.trackinService = trackinService;
        this.mapService = mapService;
        this.trackingMapService = trackingMapService;
        this.init = false;
        this.loading = true;
    }
    TrackingComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.trackinService.initShortCode(this.shortCode);
        this.actionsData$ = this.trackinService.actions$.asObservable();
        this.init = true;
        this.trackingMapService.setData$(this.actionsData$);
        this.popups$ = this.actionsData$.pipe(map$1(function (data) {
            var entities = _this.trackingMapService.actionsTrace.destination.entities;
            var keys = Object.keys(entities);
            var mapUtils = _this.trackingMapService.actionsTrace.mapInstance.mapUtils;
            return keys.reduce(function (acc, key) {
                var entity = entities[key];
                var elem = mapUtils.getElement(entity.item);
                return elem ? __spread(acc, [{ data: entity.data, elem: elem, id: key }]) : acc;
            }, []);
        }));
        this.userPopup$ = this.actionsData$.pipe(debounceTime(100), map$1(function (data) {
            var entities = _this.trackingMapService.actionsTrace.user.entities;
            var keys = Object.keys(entities);
            var mapUtils = _this.trackingMapService.mapInstance.mapUtils;
            return keys.reduce(function (acc, key) {
                var entity = entities[key];
                var elem = mapUtils.getElement(entity.item);
                var onUpdate = _this.trackingMapService.actionsTrace.user.onEntityUpdate(key);
                return elem ? __spread(acc, [{ data: entity.data, elem: elem, id: key, onUpdate: onUpdate }]) : acc;
            }, []);
        }));
        var completedAction$ = this.actionsData$.pipe(filter(function (data) {
            return !!data && data.length && data[0].display.show_summary;
        }), take(1));
        this.actionsData$.pipe(filter(function (data) { return !!data && data.length && !data[0].display.show_summary; }), takeUntil(completedAction$)).subscribe(function (action) {
            _this.loading = false;
            _this.trackingMapService.resetCleanMap(action);
        });
        completedAction$.subscribe(function (action) {
            _this.loading = false;
            _this.trackingMapService.onComplete(action);
        });
        this.startPopup$ = completedAction$.pipe(map$1(function (data) {
            var entities = _this.trackingMapService.actionsTrace.start.entities;
            var keys = Object.keys(entities);
            var mapUtils = _this.trackingMapService.actionsTrace.mapInstance.mapUtils;
            return keys.reduce(function (acc, key) {
                var entity = entities[key];
                var elem = mapUtils.getElement(entity.item);
                return elem ? __spread(acc, [{ data: entity.data, elem: elem, id: key }]) : acc;
            }, []);
        }));
    };
    TrackingComponent.prototype.ngAfterContentInit = function () {
    };
    
    TrackingComponent.prototype.trackId = function (a, b) {
        return b.id;
    };
    return TrackingComponent;
}());
TrackingComponent.decorators = [
    { type: Component, args: [{
                selector: 'app-tracking',
                template: "<ht-tracking-map [showSummary]=\"trackingMapService.actionCompleted\">\n  <ng-container *ngFor=\"let action of actionsData$ | async; trackBy: trackId\">\n    <ht-action-summary *ngIf=\"action.display.show_summary; else status\" [action]=\"action\"></ht-action-summary>\n    <ng-template #status>\n      <ht-action-status [action]=\"action\"></ht-action-status>\n    </ng-template>\n  </ng-container>\n</ht-tracking-map>\n<ht-infobox [item]=\"item\" *ngFor=\"let item of popups$ | async; trackBy: trackId\">\n  <ht-destination-popup [action]=\"item.data\"></ht-destination-popup>\n</ht-infobox>\n<ht-infobox [item]=\"item\" *ngFor=\"let item of userPopup$ | async; trackBy: trackId\">\n  <ht-user-popup [action]=\"item.data\"></ht-user-popup>\n</ht-infobox>\n<ht-infobox [item]=\"item\" *ngFor=\"let item of startPopup$ | async; trackBy: trackId\">\n  <ht-start-popup [action]=\"item.data\"></ht-start-popup>\n</ht-infobox>\n<div class=\"is-overlay\" *ngIf=\"loading\" [@fade]>\n  <div id=\"root\">\n    <div class=\"loading-container\">\n      <div class=\"loading-section\">\n        <div class=\"loading-section-ht-logo-pale\"></div>\n        <div class=\"loading-section-ht-logo\"></div>\n      </div>\n    </div>\n  </div>\n</div>\n",
                styles: [".is-overlay{\n  background:#ffffff;\n  z-index:1002; }\n  .is-overlay #root{\n    height:100%;\n    width:100%; }\n  .is-overlay .loading-container{\n    display:-webkit-box;\n    display:-ms-flexbox;\n    display:flex;\n    -webkit-box-flex:1;\n        -ms-flex-positive:1;\n            flex-grow:1;\n    -webkit-box-orient:vertical;\n    -webkit-box-direction:normal;\n        -ms-flex-direction:column;\n            flex-direction:column;\n    height:100%;\n    -webkit-box-align:center;\n        -ms-flex-align:center;\n            align-items:center;\n    -webkit-box-pack:center;\n        -ms-flex-pack:center;\n            justify-content:center; }\n  .is-overlay .loading-section{\n    width:74px;\n    height:60px;\n    margin:0 auto;\n    position:relative; }\n  .is-overlay .loading-section-ht-logo-pale{\n    position:absolute;\n    margin:0;\n    padding:0;\n    height:100%;\n    width:100%;\n    display:block;\n    overflow:hidden;\n    background:url(\"data:image/png;base64,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\") no-repeat;\n    background-size:cover; }\n@-webkit-keyframes loading-logo{\n  0%{\n    width:0%; }\n  100%{\n    width:100%; } }\n@keyframes loading-logo{\n  0%{\n    width:0%; }\n  100%{\n    width:100%; } }\n  .is-overlay .loading-section-ht-logo{\n    position:relative;\n    margin:0;\n    padding:0;\n    height:100%;\n    display:block;\n    overflow:hidden;\n    -webkit-animation:loading-logo 5s linear infinite;\n            animation:loading-logo 5s linear infinite;\n    background:url(\"data:image/png;base64,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\") no-repeat;\n    background-size:cover;\n    z-index:20; }\n"],
                animations: [
                    trigger('fade', [
                        transition(":leave", [
                            animate('300ms ease-in', style({ transform: "translateY(100%)" }))
                        ])
                    ])
                ]
            },] },
];
TrackingComponent.ctorParameters = function () { return [
    { type: TrackingService, },
    { type: HtMapService, },
    { type: TrackingMapService, },
]; };
TrackingComponent.propDecorators = {
    "shortCode": [{ type: Input },],
};
var ActionSummaryComponent = /** @class */ (function () {
    function ActionSummaryComponent() {
        this.test = "str";
    }
    ActionSummaryComponent.prototype.ngOnInit = function () {
    };
    return ActionSummaryComponent;
}());
ActionSummaryComponent.decorators = [
    { type: Component, args: [{
                selector: 'ht-action-summary',
                template: "<div class=\"card is-tracking-card\" [@appear]>\n  <div class=\"card-content\">\n    <div class=\"flex-row align-center justify-center row-gap-10\">\n      <div class=\"icon\">\n        <i class=\"ion-checkmark-circled check\"></i>\n      </div>\n      <div class=\"text-title truncate has-color-title-text\">\n        {{action.type | nameCase}} completed\n      </div>\n    </div>\n    <div class=\"flex-column column-gap-4\">\n      <div class=\"flex-row row-gap-20\">\n        <div class=\"has-text-right flex\">\n          <span class=\"text-caption has-color-secondary-text\">distance</span>\n          <div class=\"text-info has-color-title-text\">{{action.distance | distanceLocale}}</div>\n        </div>\n        <div class=\"divider\"></div>\n        <div class=\"flex\">\n          <span class=\"text-caption has-color-secondary-text\">Name</span>\n          <div class=\"text-info has-color-title-text\">{{action.user.name | nameCase}}</div>\n        </div>\n      </div>\n      <div class=\"flex-row row-gap-20\">\n        <div class=\"has-text-right flex\">\n          <span class=\"text-caption has-color-secondary-text\">Trip time</span>\n          <div class=\"text-info has-color-title-text\">{{action.duration | hmString: 60}}</div>\n        </div>\n        <div class=\"divider\"></div>\n        <div class=\"flex\">\n          <span class=\"text-caption has-color-secondary-text\">id</span>\n          <div class=\"text-info has-color-title-text\">#</div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n",
                styles: [".check{\n  font-size:2rem;\n  color:#00C94B; }\n.truncate{\n  max-width:140px; }\n"],
                animations: [
                    trigger('appear', [
                        transition(":enter", [
                            style({ transform: "translateY(100px)" }),
                            animate('300ms ease-out', style({ transform: "*" }))
                        ])
                    ])
                ]
            },] },
];
ActionSummaryComponent.ctorParameters = function () { return []; };
ActionSummaryComponent.propDecorators = {
    "action": [{ type: Input },],
    "test": [{ type: Input },],
};
var ActionSummaryModule = /** @class */ (function () {
    function ActionSummaryModule() {
    }
    return ActionSummaryModule;
}());
ActionSummaryModule.decorators = [
    { type: NgModule, args: [{
                imports: [
                    CommonModule,
                    SharedModule
                ],
                exports: [ActionSummaryComponent],
                declarations: [ActionSummaryComponent]
            },] },
];
ActionSummaryModule.ctorParameters = function () { return []; };
var DestinationPopupComponent = /** @class */ (function () {
    function DestinationPopupComponent() {
    }
    DestinationPopupComponent.prototype.ngOnInit = function () {
    };
    DestinationPopupComponent.prototype.getDestinationName = function (action) {
        var place = action.completed_place || action.expected_place;
        if (place) {
            return place.name;
        }
        else {
            return "";
        }
    };
    return DestinationPopupComponent;
}());
DestinationPopupComponent.decorators = [
    { type: Component, args: [{
                selector: 'ht-destination-popup',
                template: "<div class=\"card\">\n  <div class=\"card-content is-popup\">\n    <ng-container *ngIf=\"action.eta && !action.completed_at; else comp\">\n      <div class=\"text-caption\">ETA</div>\n      <div class=\"text-title\">{{action.eta | timeString }}</div>\n    </ng-container>\n    <ng-template #comp>\n      <div class=\"text-caption\" *ngIf=\"action.completed_at\">{{action.type | nameCase}} | {{action.completed_at | timeString}}</div>\n    </ng-template>\n    <div class=\"is-size-7 has-text-weight-bold truncate\">{{getDestinationName(action)}}</div>\n  </div>\n</div>\n",
                styles: [".card{\n  max-width:170px;\n  background:#250D47;\n  color:white;\n  -webkit-box-shadow:0 2px 6px 0 rgba(114, 114, 114, 0.6);\n          box-shadow:0 2px 6px 0 rgba(114, 114, 114, 0.6); }\n.truncate{\n  max-width:170px; }\n"],
                changeDetection: ChangeDetectionStrategy.OnPush
            },] },
];
DestinationPopupComponent.ctorParameters = function () { return []; };
DestinationPopupComponent.propDecorators = {
    "action": [{ type: Input },],
};
var DestinationPopupModule = /** @class */ (function () {
    function DestinationPopupModule() {
    }
    return DestinationPopupModule;
}());
DestinationPopupModule.decorators = [
    { type: NgModule, args: [{
                imports: [
                    CommonModule,
                    SharedModule
                ],
                declarations: [DestinationPopupComponent],
                exports: [DestinationPopupComponent]
            },] },
];
DestinationPopupModule.ctorParameters = function () { return []; };
var UserPopupComponent = /** @class */ (function () {
    function UserPopupComponent() {
        this.opened = false;
    }
    UserPopupComponent.prototype.ngOnInit = function () {
    };
    UserPopupComponent.prototype.openCard = function () {
        this.opened = !this.opened;
    };
    return UserPopupComponent;
}());
UserPopupComponent.decorators = [
    { type: Component, args: [{
                selector: 'ht-user-popup',
                template: "<div class=\"card\" (click)=\"openCard()\">\n  <div class=\"card-content is-popup\">\n    <p *ngIf=\"!opened\" class=\"is-size-7 has-text-weight-bold is-uppercase\">\n      {{action.user.display.status_text}}\n      <span class=\"icon\">\n          <i class=\"ion-chevron-right\"></i>\n        </span>\n    </p>\n    <ng-container *ngIf=\"opened\">\n      <div class=\"flex-column column-gap-4\">\n        <div>\n          <div class=\"is-uppercase is-size-7\">{{action.user.display.status_text}} on</div>\n          <div class=\"has-text-weight-bold\">Random place</div>\n        </div>\n        <div>\n          <div class=\"is-uppercase is-size-7\">speed</div>\n          <div class=\"has-text-weight-bold\">37 kmh</div>\n        </div>\n        <div class=\"flex-row row-gap-20\">\n          <div>\n            <div class=\"is-uppercase is-size-7\">distance</div>\n            <div class=\"has-text-weight-bold\">{{action.distance | distanceLocale}}</div>\n          </div>\n          <div>\n            <div class=\"is-uppercase is-size-7\">time</div>\n            <div class=\"has-text-weight-bold\">{{action.duration | hmString: 60}}</div>\n          </div>\n        </div>\n      </div>\n    </ng-container>\n  </div>\n</div>\n",
                styles: [".card{\n  background-color:#9013FE;\n  color:white;\n  -webkit-box-shadow:0 2px 6px 0 rgba(114, 114, 114, 0.6);\n          box-shadow:0 2px 6px 0 rgba(114, 114, 114, 0.6); }\n"],
                changeDetection: ChangeDetectionStrategy.OnPush
            },] },
];
UserPopupComponent.ctorParameters = function () { return []; };
UserPopupComponent.propDecorators = {
    "action": [{ type: Input },],
};
var UserPopupModule = /** @class */ (function () {
    function UserPopupModule() {
    }
    return UserPopupModule;
}());
UserPopupModule.decorators = [
    { type: NgModule, args: [{
                imports: [
                    CommonModule,
                    SharedModule
                ],
                declarations: [UserPopupComponent],
                exports: [UserPopupComponent]
            },] },
];
UserPopupModule.ctorParameters = function () { return []; };
var ActionStatusComponent = /** @class */ (function () {
    function ActionStatusComponent() {
    }
    ActionStatusComponent.prototype.ngOnInit = function () {
    };
    return ActionStatusComponent;
}());
ActionStatusComponent.decorators = [
    { type: Component, args: [{
                selector: 'ht-action-status',
                template: "<div class=\"card is-tracking-card\">\n  <div class=\"card-content is-padding-normal\">\n    <div class=\"level is-mobile\">\n      <div class=\"level-left\">\n        <div class=\"level-item\">\n          <ht-profile [url]=\"action.user.photo\" [height]=\"40\"></ht-profile>\n        </div>\n        <div class=\"level-item text-title truncate --is-text-black\">\n          {{action.user.name | nameCase}}\n        </div>\n      </div>\n      <div class=\"level-right\" *ngIf=\"action.user.phone\">\n        <div class=\"level-item\">\n          <a [href]=\"'tel:'+action.user.phone\" class=\"button is-small is-info is-outlined\">\n            <div class=\"icon\">\n              <i class=\"ion-android-call\"></i>\n            </div>\n            <span>Call</span>\n          </a>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n",
                styles: [".truncate{\n  max-width:217px;\n  -webkit-box-pack:baseline;\n      -ms-flex-pack:baseline;\n          justify-content:baseline; }\n.card{\n  border-top-left-radius:14px;\n  border-top-right-radius:14px; }\n"]
            },] },
];
ActionStatusComponent.ctorParameters = function () { return []; };
ActionStatusComponent.propDecorators = {
    "action": [{ type: Input },],
};
var ActionStatusModule = /** @class */ (function () {
    function ActionStatusModule() {
    }
    return ActionStatusModule;
}());
ActionStatusModule.decorators = [
    { type: NgModule, args: [{
                imports: [
                    CommonModule,
                    SharedModule
                ],
                declarations: [ActionStatusComponent],
                exports: [ActionStatusComponent]
            },] },
];
ActionStatusModule.ctorParameters = function () { return []; };
var StartPopupComponent = /** @class */ (function () {
    function StartPopupComponent() {
    }
    StartPopupComponent.prototype.ngOnInit = function () {
    };
    StartPopupComponent.prototype.getStartName = function (action) {
        var place = action.started_place;
        if (place) {
            return place.name;
        }
        else {
            return "";
        }
    };
    return StartPopupComponent;
}());
StartPopupComponent.decorators = [
    { type: Component, args: [{
                selector: 'ht-start-popup',
                template: "<div class=\"card\">\n  <div class=\"card-content is-popup\">\n    <div class=\"text-caption\">{{action.started_at | timeString}}</div>\n    <div class=\"text-title\">{{getStartName(action)}}</div>\n  </div>\n</div>\n",
                styles: [".card{\n  max-width:150px;\n  background:#250D47;\n  color:white;\n  -webkit-box-shadow:0 2px 6px 0 rgba(114, 114, 114, 0.6);\n          box-shadow:0 2px 6px 0 rgba(114, 114, 114, 0.6); }\n"],
                changeDetection: ChangeDetectionStrategy.OnPush
            },] },
];
StartPopupComponent.ctorParameters = function () { return []; };
StartPopupComponent.propDecorators = {
    "action": [{ type: Input },],
};
var StartPopupModule = /** @class */ (function () {
    function StartPopupModule() {
    }
    return StartPopupModule;
}());
StartPopupModule.decorators = [
    { type: NgModule, args: [{
                imports: [
                    CommonModule,
                    SharedModule,
                ],
                declarations: [StartPopupComponent],
                exports: [StartPopupComponent]
            },] },
];
StartPopupModule.ctorParameters = function () { return []; };
var TrackingMapComponent = /** @class */ (function () {
    function TrackingMapComponent(mapService, trackingMapService) {
        this.mapService = mapService;
        this.trackingMapService = trackingMapService;
        this.showSummary = false;
        this.mapInstance = this.mapService.mapInstance;
    }
    Object.defineProperty(TrackingMapComponent.prototype, "dirty$", {
        get: function () {
            return this.trackingMapService.dirty$;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TrackingMapComponent.prototype, "setBoundsOptions", {
        get: function () {
            var options = this.showSummary ? Object.assign({}, this.trackingMapService.defaultSetBoundsOptions, { paddingBottomRight: [15, 120] }) : Object.assign({}, this.trackingMapService.defaultSetBoundsOptions);
            return options;
        },
        enumerable: true,
        configurable: true
    });
    TrackingMapComponent.prototype.ngOnInit = function () {
        this.mapInstance.setBoundsOptions = this.setBoundsOptions;
    };
    return TrackingMapComponent;
}());
TrackingMapComponent.decorators = [
    { type: Component, args: [{
                selector: 'ht-tracking-map',
                template: "<ng-container *ngIf=\"mapInstance\">\n  <ht-map (onMapReset)=\"trackingMapService.resetMap()\" [setBoundsOptions]=\"setBoundsOptions\" [showReset]=\"dirty$ | async\" [mapInstance]=\"mapInstance\">\n    <ng-template #reset>\n      <div class=\"icon reset-icon\">\n        <i class=\"ion-pinpoint auto\"></i>\n      </div>\n    </ng-template>\n  </ht-map>\n</ng-container>\n<div class=\"card-bottom\" #card >\n  <div class=\"card-bottom-content\">\n    <ng-content></ng-content>\n  </div>\n</div>\n",
                styles: [".card-bottom{\n  position:absolute;\n  bottom:0;\n  z-index:1001;\n  width:100vw; }\n.card-bottom-content{\n  width:93%;\n  margin:auto; }\n:host{\n  position:relative; }\n.reset-icon{\n  background-color:#fff;\n  border-radius:50%;\n  font-size:2.2rem;\n  height:3rem;\n  width:3rem;\n  -webkit-box-shadow:0px 0px 4px grey;\n          box-shadow:0px 0px 4px grey; }\n"]
            },] },
];
TrackingMapComponent.ctorParameters = function () { return [
    { type: HtMapService, },
    { type: TrackingMapService, },
]; };
TrackingMapComponent.propDecorators = {
    "showSummary": [{ type: Input },],
    "card": [{ type: ViewChild, args: ['card',] },],
};
var TrackingMapModule = /** @class */ (function () {
    function TrackingMapModule() {
    }
    return TrackingMapModule;
}());
TrackingMapModule.decorators = [
    { type: NgModule, args: [{
                imports: [
                    CommonModule,
                    MapModule
                ],
                declarations: [TrackingMapComponent],
                exports: [TrackingMapComponent],
                providers: [TrackingMapService]
            },] },
];
TrackingMapModule.ctorParameters = function () { return []; };
var Triggers = /** @class */ (function () {
    function Triggers() {
    }
    return Triggers;
}());
Triggers.CLICK = 'click';
Triggers.HOVER = 'hover';
Triggers.MOUSEDOWN = 'mousedown';
Triggers.NONE = 'none';
var Placements = /** @class */ (function () {
    function Placements() {
    }
    return Placements;
}());
Placements.Top = 'top';
Placements.Bottom = 'bottom';
Placements.Left = 'left';
Placements.Right = 'right';
Placements.TopStart = 'top-start';
Placements.BottomStart = 'bottom-start';
Placements.LeftStart = 'left-start';
Placements.RightStart = 'right-start';
Placements.TopEnd = 'top-end';
Placements.BottomEnd = 'bottom-end';
Placements.LeftEnd = 'left-end';
Placements.RightEnd = 'right-end';
Placements.Auto = 'auto';
Placements.AutoTop = 'auto-top';
Placements.AutoBottom = 'auto-bottom';
Placements.AutoLeft = 'auto-left';
Placements.AutoRight = 'auto-right';
var PopperService = /** @class */ (function () {
    function PopperService() {
        this.poppers = [];
    }
    PopperService.prototype.addPopper = function (popper) {
        var didMatch = false;
        this.poppers = this.poppers.map(function (currentPopper) {
            if (popper.instance == currentPopper.instance) {
                didMatch = true;
                return popper;
            }
            else {
                return currentPopper;
            }
        });
        if (!didMatch) {
            this.poppers.push(popper);
        }
    };
    
    PopperService.prototype.checkCollision = function (data) {
        var otherPoppers = this.getOtherPoppers(data);
        return this.detctCollisions(data, otherPoppers);
    };
    
    PopperService.prototype.getOtherPoppers = function (data) {
        return this.poppers.reduce(function (rest, p) {
            return p.instance == data.instance ? rest : __spread(rest, [p]);
        }, []);
    };
    
    PopperService.prototype.detctCollisions = function (data, otherPoppers) {
        var _this = this;
        var detected = otherPoppers.reduce(function (acc, data1) {
            var col = _this.detctCollision(data, data1);
            return col ? __spread(acc, [data1]) : acc;
        }, []);
        return detected.length ? detected : false;
    };
    PopperService.prototype.detctCollision = function (data1, data2) {
        var d1_offset = data1.popper;
        var d1_height = data1.popper.height;
        var d1_width = data1.popper.width;
        var d1_distance_from_top = d1_offset.top + d1_height;
        var d1_distance_from_left = d1_offset.left + d1_width;
        var d2_offset = data2.popper;
        var d2_height = data2.popper.height;
        var d2_width = data2.popper.width;
        var d2_distance_from_top = d2_offset.top + d2_height;
        var d2_distance_from_left = d2_offset.left + d2_width;
        var not_colliding = (d1_distance_from_top < d2_offset.top || d1_offset.top > d2_distance_from_top || d1_distance_from_left < d2_offset.left || d1_offset.left > d2_distance_from_left);
        return !not_colliding;
    };
    return PopperService;
}());
PopperService.decorators = [
    { type: Injectable },
];
PopperService.ctorParameters = function () { return []; };
var PopperContent = /** @class */ (function () {
    function PopperContent(renderer, popperService) {
        this.renderer = renderer;
        this.popperService = popperService;
        this.popperOptions = ({
            disableAnimation: false,
            disableDefaultStyling: false,
            placement: Placements.AutoTop,
            boundariesElement: '',
            trigger: Triggers.HOVER,
            positionFixed: false,
            popperModifiers: {}
        });
        this.isMouseOver = false;
        this.onHidden = new EventEmitter();
        this.displayType = "none";
        this.opacity = 0;
    }
    PopperContent.prototype.onMouseOver = function () {
        this.isMouseOver = true;
    };
    PopperContent.prototype.showOnLeave = function () {
        this.isMouseOver = false;
        if (this.popperOptions.trigger !== Triggers.HOVER) {
            return;
        }
        this.hide();
    };
    PopperContent.prototype.onDocumentResize = function () {
        this.update();
    };
    PopperContent.prototype.ngOnInit = function () {
        this.show();
    };
    PopperContent.prototype.ngOnDestroy = function () {
        if (!this.popperInstance) {
            return;
        }
        ((this.popperInstance)).disableEventListeners();
        this.popperInstance.destroy();
    };
    PopperContent.prototype.col = function (data) {
        var collision = this.popperService.checkCollision(data);
        if (collision) {
            data = Object.assign({}, data, { placement: this.clockwise(data.placement) });
        }
        this.popperService.addPopper(data);
        return data;
    };
    
    PopperContent.prototype.clockwise = function (placement) {
        var placements = [
            'auto-start',
            'auto',
            'auto-end',
            'top-start',
            'top',
            'top-end',
            'right-start',
            'right',
            'right-end',
            'bottom-end',
            'bottom',
            'bottom-start',
            'left-end',
            'left',
            'left-start',
        ];
        var validPlacements = placements.slice(3);
        var index = validPlacements.indexOf(placement);
        var arr = validPlacements
            .slice(index + 1)
            .concat(validPlacements.slice(0, index));
        return arr.reverse()[1];
    };
    PopperContent.prototype.show = function () {
        var _this = this;
        if (!this.referenceObject) {
            return;
        }
        var popperOptions = ({
            placement: this.popperOptions.placement,
            positionFixed: this.popperOptions.positionFixed,
            modifiers: {
                preventOverflow: {
                    escapeWithReference: true,
                },
                offset: {
                    offset: '0px, 8px'
                },
                flipCol: {
                    enabled: true,
                    order: 504,
                    fn: function (data) {
                        return _this.col(data);
                    }
                },
            }
        });
        var boundariesElement = this.popperOptions.boundariesElement && document.querySelector(this.popperOptions.boundariesElement);
        if (popperOptions.modifiers && boundariesElement) {
            popperOptions.modifiers.preventOverflow = { boundariesElement: boundariesElement };
        }
        popperOptions.modifiers = Object.assign(popperOptions.modifiers, this.popperOptions.popperModifiers);
        this.popperInstance = new Popper(this.referenceObject, this.popperViewRef.nativeElement, popperOptions);
        ((this.popperInstance)).enableEventListeners();
        this.scheduleUpdate();
        this.toggleVisibility(true);
        this.globalResize = this.renderer.listen('document', 'resize', this.onDocumentResize.bind(this));
    };
    
    PopperContent.prototype.update = function () {
        this.popperInstance && ((this.popperInstance)).update();
    };
    PopperContent.prototype.scheduleUpdate = function () {
        this.popperInstance && ((this.popperInstance)).scheduleUpdate();
    };
    PopperContent.prototype.hide = function () {
    };
    PopperContent.prototype.toggleVisibility = function (state$$1) {
        if (!state$$1) {
            this.opacity = 0;
        }
        else {
            this.opacity = 1;
            this.displayType = "block";
        }
    };
    PopperContent.prototype.clearGlobalResize = function () {
        this.globalResize && typeof this.globalResize === 'function' && this.globalResize();
    };
    return PopperContent;
}());
PopperContent.decorators = [
    { type: Component, args: [{
                selector: "popper-content",
                template: "\n<div #popperViewRef\n     [class.ngxp__container]=\"!popperOptions.disableDefaultStyling\"\n     [class.ngxp__animation]=\"!popperOptions.disableAnimation\"\n     [style.display]=\"displayType\"\n     [style.opacity]=\"opacity\"\n     role=\"popper\">\n    <ng-content ></ng-content>\n</div>\n",
                styles: ["\n.ngxp__container {\n  display:none;\n    z-index: 1000;\n}\n.ngxp__container.ngxp__animation {\n   -webkit-animation: ngxp-fadeIn  150ms ease-out;\n    -moz-animation: ngxp-fadeIn  150ms ease-out;\n    -o-animation: ngxp-fadeIn  150ms ease-out;\n    animation: ngxp-fadeIn  150ms ease-out;\n  transition: transform 0.1s;\n}\n.ngxp__container[x-placement^=\"top\"],\n.ngxp__container[x-placement^=\"bottom\"],\n.ngxp__container[x-placement^=\"right\"],\n.ngxp__container[x-placement^=\"left\"]\n{\n  display:block;\n}\n@-webkit-keyframes ngxp-fadeIn {\n 0% {\n        display: none;\n        opacity: 0;\n    }\n    1% {\n        display: block;\n        opacity: 0;\n    }\n    100% {\n        display: block;\n        opacity: 1;\n    }\n}\n@keyframes ngxp-fadeIn {\n  0% {\n        display: none;\n        opacity: 0;\n    }\n    1% {\n        display: block;\n        opacity: 0;\n    }\n    100% {\n        display: block;\n        opacity: 1;\n    }\n}\n"]
            },] },
];
PopperContent.ctorParameters = function () { return [
    { type: Renderer2, },
    { type: PopperService, },
]; };
PopperContent.propDecorators = {
    "referenceObject": [{ type: Input },],
    "popperViewRef": [{ type: ViewChild, args: ["popperViewRef",] },],
    "onMouseOver": [{ type: HostListener, args: ['mouseover',] },],
    "showOnLeave": [{ type: HostListener, args: ['mouseleave',] },],
};
var InfoboxComponent = /** @class */ (function () {
    function InfoboxComponent(mapService) {
        this.mapService = mapService;
    }
    InfoboxComponent.prototype.ngOnInit = function () {
    };
    InfoboxComponent.prototype.ngAfterViewInit = function () {
        var _this = this;
        var mapUtils = this.mapService.mapInstance.mapUtils;
        var map$$1 = this.mapService.mapInstance.map;
        mapUtils.onEvent(map$$1, 'move', function () {
            _this.popper.scheduleUpdate();
        });
        if (this.item.onUpdate)
            this.item.onUpdate.subscribe(function (entity) {
                _this.popper.scheduleUpdate();
            });
    };
    
    InfoboxComponent.prototype.onClick = function (e) {
        this.popper.scheduleUpdate();
    };
    return InfoboxComponent;
}());
InfoboxComponent.decorators = [
    { type: Component, args: [{
                selector: 'ht-infobox',
                template: "<popper-content [referenceObject]=\"item.elem\" (click)=\"onClick($event)\">\n  <ng-content></ng-content>\n</popper-content>\n",
                styles: [""]
            },] },
];
InfoboxComponent.ctorParameters = function () { return [
    { type: HtMapService, },
]; };
InfoboxComponent.propDecorators = {
    "popper": [{ type: ViewChild, args: [PopperContent,] },],
    "item": [{ type: Input },],
};
var PopperController = /** @class */ (function () {
    function PopperController(viewContainerRef, changeDetectorRef, resolver, renderer, popperDefaults) {
        if (popperDefaults === void 0) { popperDefaults = {}; }
        this.viewContainerRef = viewContainerRef;
        this.changeDetectorRef = changeDetectorRef;
        this.resolver = resolver;
        this.renderer = renderer;
        this.popperDefaults = popperDefaults;
        this.popperContentClass = PopperContent;
        this.shown = false;
        this.subscriptions = [];
        this.showDelay = 0;
        this.hideTimeout = 0;
        this.timeoutAfterShow = 0;
        this.popperOnShown = new EventEmitter();
        this.popperOnHidden = new EventEmitter();
        PopperController.baseOptions = Object.assign({}, PopperController.baseOptions, this.popperDefaults);
    }
    PopperController.prototype.showOrHideOnClick = function () {
        if (this.disabled || this.showTrigger !== Triggers.CLICK) {
            return;
        }
        this.toggle();
    };
    PopperController.prototype.showOrHideOnMouseOver = function () {
        if (this.disabled || this.showTrigger !== Triggers.MOUSEDOWN) {
            return;
        }
        this.toggle();
    };
    PopperController.prototype.showOnHover = function () {
        if (this.disabled || this.showTrigger !== Triggers.HOVER) {
            return;
        }
        this.scheduledShow();
    };
    PopperController.prototype.hideOnClickOutsideHandler = function ($event) {
        if (this.disabled || !this.hideOnClickOutside) {
            return;
        }
        this.scheduledHide($event, this.hideTimeout);
    };
    PopperController.prototype.hideOnScrollHandler = function ($event) {
        if (this.disabled || !this.hideOnScroll) {
            return;
        }
        this.scheduledHide($event, this.hideTimeout);
    };
    PopperController.prototype.hideOnLeave = function () {
        if (this.disabled || this.showTrigger !== Triggers.HOVER) {
            return;
        }
        this.scheduledHide(null, this.hideTimeout);
    };
    PopperController.assignDefined = function (target) {
        var sources = [];
        for (var _i = 1; _i < arguments.length; _i++) {
            sources[_i - 1] = arguments[_i];
        }
        try {
            for (var sources_1 = __values(sources), sources_1_1 = sources_1.next(); !sources_1_1.done; sources_1_1 = sources_1.next()) {
                var source = sources_1_1.value;
                try {
                    for (var _a = __values(Object.keys(source)), _b = _a.next(); !_b.done; _b = _a.next()) {
                        var key = _b.value;
                        var val = source[key];
                        if (val !== undefined) {
                            target[key] = val;
                        }
                    }
                }
                catch (e_1_1) { e_1 = { error: e_1_1 }; }
                finally {
                    try {
                        if (_b && !_b.done && (_c = _a.return)) _c.call(_a);
                    }
                    finally { if (e_1) throw e_1.error; }
                }
            }
        }
        catch (e_2_1) { e_2 = { error: e_2_1 }; }
        finally {
            try {
                if (sources_1_1 && !sources_1_1.done && (_d = sources_1.return)) _d.call(sources_1);
            }
            finally { if (e_2) throw e_2.error; }
        }
        return target;
        var e_2, _d, e_1, _c;
    };
    PopperController.prototype.ngOnInit = function () {
        this.hideOnClickOutside = typeof this.hideOnClickOutside === 'undefined' ?
            this.closeOnClickOutside : this.hideOnClickOutside;
        if (typeof this.content === 'string') {
            var text = this.content;
            this.content = this.constructContent();
            this.content.text = text;
        }
        var popperRef = (this.content);
        popperRef.referenceObject = this.getRefElement();
        this.setContentProperties(popperRef);
        this.setDefaults();
        if (this.showOnStart) {
            this.scheduledShow();
        }
    };
    PopperController.prototype.ngOnChanges = function (changes) {
        if (changes['popperDisabled']) {
            if (changes['popperDisabled'].currentValue) {
                this.hide();
            }
        }
    };
    PopperController.prototype.ngOnDestroy = function () {
        this.subscriptions.forEach(function (sub) { return sub.unsubscribe && sub.unsubscribe(); });
        this.subscriptions.length = 0;
        this.clearEventListeners();
    };
    PopperController.prototype.toggle = function () {
        this.shown ? this.scheduledHide(null, this.hideTimeout) : this.scheduledShow();
    };
    PopperController.prototype.show = function () {
        if (this.shown) {
            this.overrideHideTimeout();
            return;
        }
        this.shown = true;
        var popperRef = (this.content);
        var element = this.getRefElement();
        if (popperRef.referenceObject !== element) {
            popperRef.referenceObject = element;
        }
        this.setContentProperties(popperRef);
        popperRef.show();
        this.popperOnShown.emit(this);
        if (this.timeoutAfterShow > 0) {
            this.scheduledHide(null, this.timeoutAfterShow);
        }
        this.globalClick = this.renderer.listen('document', 'click', this.hideOnClickOutsideHandler.bind(this));
        this.globalScroll = this.renderer.listen(this.getScrollParent(this.getRefElement()), 'scroll', this.hideOnScrollHandler.bind(this));
    };
    PopperController.prototype.hide = function () {
        if (!this.shown) {
            this.overrideShowTimeout();
            return;
        }
        this.shown = false;
        if (this.popperContentRef) {
            this.popperContentRef.instance.hide();
        }
        else {
            ((this.content)).hide();
        }
        this.popperOnHidden.emit(this);
        this.clearEventListeners();
    };
    PopperController.prototype.scheduledShow = function (delay) {
        var _this = this;
        if (delay === void 0) { delay = this.showDelay; }
        this.overrideHideTimeout();
        this.scheduledShowTimeout = setTimeout(function () {
            _this.show();
            _this.applyChanges();
        }, delay);
    };
    PopperController.prototype.scheduledHide = function ($event, delay) {
        var _this = this;
        if ($event === void 0) { $event = null; }
        if (delay === void 0) { delay = 0; }
        this.overrideShowTimeout();
        this.scheduledHideTimeout = setTimeout(function () {
            var toElement = $event ? $event.toElement : null;
            var popperContentView = ((_this.content)).popperViewRef ? ((_this.content)).popperViewRef.nativeElement : false;
            if (!popperContentView || popperContentView === toElement || popperContentView.contains(toElement) || ((_this.content)).isMouseOver) {
                return;
            }
            _this.hide();
            _this.applyChanges();
        }, delay);
    };
    PopperController.prototype.getRefElement = function () {
        return this.targetElement || this.viewContainerRef.element.nativeElement;
    };
    PopperController.prototype.applyChanges = function () {
        this.changeDetectorRef.markForCheck();
        if (this.forceDetection) {
            this.changeDetectorRef.detectChanges();
        }
    };
    PopperController.prototype.setDefaults = function () {
        this.showTrigger = typeof this.showTrigger === 'undefined' ? PopperController.baseOptions.trigger : this.showTrigger;
        this.hideOnClickOutside = typeof this.hideOnClickOutside === 'undefined' ? PopperController.baseOptions.hideOnClickOutside : this.hideOnClickOutside;
        this.hideOnScroll = typeof this.hideOnScroll === 'undefined' ? PopperController.baseOptions.hideOnScroll : this.hideOnScroll;
    };
    PopperController.prototype.clearEventListeners = function () {
        this.globalClick && typeof this.globalClick === 'function' && this.globalClick();
        this.globalScroll && typeof this.globalScroll === 'function' && this.globalScroll();
    };
    PopperController.prototype.overrideShowTimeout = function () {
        if (this.scheduledShowTimeout) {
            clearTimeout(this.scheduledShowTimeout);
            this.scheduledHideTimeout = 0;
        }
    };
    PopperController.prototype.overrideHideTimeout = function () {
        if (this.scheduledHideTimeout) {
            clearTimeout(this.scheduledHideTimeout);
            this.scheduledHideTimeout = 0;
        }
    };
    PopperController.prototype.constructContent = function () {
        var factory = this.resolver.resolveComponentFactory(this.popperContentClass);
        this.popperContentRef = this.viewContainerRef.createComponent(factory);
        return (this.popperContentRef.instance);
    };
    PopperController.prototype.setContentProperties = function (popperRef) {
        popperRef.popperOptions = PopperController.assignDefined(popperRef.popperOptions, PopperController.baseOptions, {
            disableAnimation: this.disableAnimation,
            disableDefaultStyling: this.disableStyle,
            placement: this.placement,
            boundariesElement: this.boundariesElement,
            trigger: this.showTrigger,
            positionFixed: this.positionFixed,
            popperModifiers: this.popperModifiers,
        });
        this.subscriptions.push(popperRef.onHidden.subscribe(this.hide.bind(this)));
    };
    PopperController.prototype.getScrollParent = function (node) {
        var isElement = node instanceof HTMLElement;
        var overflowY = isElement && window.getComputedStyle(node).overflowY;
        var isScrollable = overflowY !== 'visible' && overflowY !== 'hidden';
        if (!node) {
            return null;
        }
        else if (isScrollable && node.scrollHeight >= node.clientHeight) {
            return node;
        }
        return this.getScrollParent(node.parentNode) || document;
    };
    return PopperController;
}());
PopperController.baseOptions = ({
    placement: Placements.AutoTop,
    hideOnClickOutside: true,
    hideOnScroll: false,
    showTrigger: Triggers.HOVER
});
PopperController.decorators = [
    { type: Directive, args: [{
                selector: '[popper]',
                exportAs: 'popper'
            },] },
];
PopperController.ctorParameters = function () { return [
    { type: ViewContainerRef, },
    { type: ChangeDetectorRef, },
    { type: ComponentFactoryResolver, },
    { type: Renderer2, },
    { type: undefined, decorators: [{ type: Inject, args: ['popperDefaults',] },] },
]; };
PopperController.propDecorators = {
    "content": [{ type: Input, args: ['popper',] },],
    "disabled": [{ type: Input, args: ['popperDisabled',] },],
    "placement": [{ type: Input, args: ['popperPlacement',] },],
    "showTrigger": [{ type: Input, args: ['popperTrigger',] },],
    "targetElement": [{ type: Input, args: ['popperTarget',] },],
    "showDelay": [{ type: Input, args: ['popperDelay',] },],
    "hideTimeout": [{ type: Input, args: ['popperTimeout',] },],
    "timeoutAfterShow": [{ type: Input, args: ['popperTimeoutAfterShow',] },],
    "boundariesElement": [{ type: Input, args: ['popperBoundaries',] },],
    "showOnStart": [{ type: Input, args: ['popperShowOnStart',] },],
    "closeOnClickOutside": [{ type: Input, args: ['popperCloseOnClickOutside',] },],
    "hideOnClickOutside": [{ type: Input, args: ['popperHideOnClickOutside',] },],
    "hideOnScroll": [{ type: Input, args: ['popperHideOnScroll',] },],
    "positionFixed": [{ type: Input, args: ['popperPositionFixed',] },],
    "popperModifiers": [{ type: Input, args: ['popperModifiers',] },],
    "disableStyle": [{ type: Input, args: ['popperDisableStyle',] },],
    "disableAnimation": [{ type: Input, args: ['popperDisableAnimation',] },],
    "forceDetection": [{ type: Input, args: ['popperForceDetection',] },],
    "popperOnShown": [{ type: Output },],
    "popperOnHidden": [{ type: Output },],
    "showOrHideOnClick": [{ type: HostListener, args: ['touchstart',] }, { type: HostListener, args: ['click',] },],
    "showOrHideOnMouseOver": [{ type: HostListener, args: ['touchstart',] }, { type: HostListener, args: ['mousedown',] },],
    "showOnHover": [{ type: HostListener, args: ['mouseenter',] },],
    "hideOnLeave": [{ type: HostListener, args: ['touchend',] }, { type: HostListener, args: ['touchcancel',] }, { type: HostListener, args: ['mouseleave',] },],
};
var 0 = {};
var PopperModule = /** @class */ (function () {
    function PopperModule() {
    }
    PopperModule.prototype.ngDoBootstrap = function () {
    };
    PopperModule.forRoot = function (popperBaseOptions) {
        if (popperBaseOptions === void 0) { popperBaseOptions = {}; }
        return { ngModule: PopperModule, providers: [{ provide: 'popperDefaults', useValue: popperBaseOptions }] };
    };
    return PopperModule;
}());
PopperModule.decorators = [
    { type: NgModule, args: [{
                imports: [
                    CommonModule
                ],
                declarations: [
                    PopperController,
                    PopperContent
                ],
                exports: [
                    PopperController,
                    PopperContent
                ],
                entryComponents: [
                    PopperContent
                ],
                providers: [
                    {
                        provide: 'popperDefaults', useValue: 0
                    },
                    PopperService
                ]
            },] },
];
PopperModule.ctorParameters = function () { return []; };
var InfoboxModule = /** @class */ (function () {
    function InfoboxModule() {
    }
    return InfoboxModule;
}());
InfoboxModule.decorators = [
    { type: NgModule, args: [{
                imports: [
                    CommonModule,
                    PopperModule
                ],
                declarations: [InfoboxComponent],
                exports: [InfoboxComponent]
            },] },
];
InfoboxModule.ctorParameters = function () { return []; };
var TrackingModule = /** @class */ (function () {
    function TrackingModule() {
    }
    return TrackingModule;
}());
TrackingModule.decorators = [
    { type: NgModule, args: [{
                imports: [
                    CommonModule,
                    TrackingMapModule,
                    ActionSummaryModule,
                    DestinationPopupModule,
                    UserPopupModule,
                    ActionStatusModule,
                    StartPopupModule,
                    InfoboxModule
                ],
                declarations: [TrackingComponent],
                exports: [TrackingComponent],
                providers: [TrackingService],
            },] },
];
TrackingModule.ctorParameters = function () { return []; };

export { HtClientService, HtUsersService, HtMapService, HtGroupsService, HtAccountService, HtActionsService, UsersSummaryContainerModule, UsersSummaryContainerComponent, UserCardModule, UserCardComponent, UsersComponent, UsersModule, UsersContainerModule, UsersContainerComponent, UsersMapContainerModule, UsersMapContainerComponent, UsersSummaryChartComponent, UsersSummaryChartModule, UsersAnalyticsListModule, UsersAnalyticsListComponent, UsersListContainerModule, GroupsModule, GroupsComponent, GroupsContainerModule, GroupsContainerComponent, GroupsChartContainerModule, GroupsChartContainerComponent, MapModule, MapContainerModule, MapContainerComponent, SharedModule, PaginationModule, PaginationComponent, PlacelineContainerModule, PlacelineContainerComponent, PlacelineModule, PlacelineComponent, PlacelineMapContainerModule, PlacelineMapContainerComponent, ActionsStatusGraphModule, ActionsStatusGraphComponent, UserTableModule, UserTableComponent, AnalyticsContainerModule, AnalyticsContainerComponent, DateRangeModule, DateRangePickerModule, DateRangePickerComponent, DateRangeComponent, TrackingModule, TOKEN, MAP_KEY, BASE_URL, requestServiceFactory, clientServiceFactory, mapServiceFactory, userClientServiceFactory, actionClientServiceFactory, groupClientServiceFactory, accountUsersClientServiceFactory, HtModule, ActionStatusComponent as ci, ActionStatusModule as ch, ActionSummaryComponent as cc, ActionSummaryModule as cb, ActionTableComponent as bl, ActionTableModule as bk, ActionsAnalyticsListComponent as bm, ActionsAnalyticsListModule as bj, ActionsSummaryChartComponent as bo, ActionsSummaryChartModule as bn, AnalyticsItemLoadComponent as bq, AnalyticsItemLoadModule as bp, AnalyticsItemComponent as bv, AnalyticsSlotDirective as bu, AnalyticsItemsService as bt, AnalyticsSelectorComponent as bw, AnalyticsTagsComponent as bi, AnalyticsTagsModule as bh, AnalyticsTitleComponent as bx, AnalyticsMapContainerComponent as bs, AnalyticsMapContainerModule as br, DataTableComponent as be, DataTableModule as bd, DestinationPopupComponent as ce, DestinationPopupModule as cd, EntitySearchComponent as bb, EntitySearchModule as ba, UsersFilterComponent as bc, UsersFilterModule as z, GroupsChartService as bg, MAP_TYPE as a, HtRequestService as b, InfoboxComponent as cr, InfoboxModule as cl, MapComponent as y, ActionSortingStringPipe as s, ActionStatusStringPipe as p, DateHumanizePipe as l, DateStringPipe as f, DistanceLocalePipe as m, DotPipe as h, HmStringPipe as n, NameCasePipe as i, PluralizePipe as t, SafeUrlPipe as q, TimeStringPipe as g, UserSortingStringPipe as r, UsersStatusStringPipe as o, PopperContent as cp, PopperController as cn, PopperModule as cm, PopperService as cq, BatteryIconComponent as e, ButtonComponent as u, DropdownDirective as w, LoadingBarComponent as v, LoadingDataComponent as k, LoadingDotsComponent as j, ProfileComponent as d, StartPopupComponent as ck, StartPopupModule as cj, TrackingMapComponent as bz, TrackingMapModule as by, TrackingMapService as ca, TrackingComponent as cs, TrackingService as ct, UserPopupComponent as cg, UserPopupModule as cf, UsersListContainerComponent as bf, UsersSummaryComponent as x, UsersSummaryModule as c };
//# sourceMappingURL=ht-angular.js.map
